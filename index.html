<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'/>
  <title>DRAFT-CSF Interface</title>
  <meta name = 'viewport' content='initial-scale=1, maximum-scale=1,user-scalable=no' />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <!--add glyphs -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<div class="wash" id="intro">
  <div class="introcontainer">
    <p class="introtitle" id="pretitle">Welcome to the Urban Strategies</p>
    <p class="introtitle" id="apptitle">Community Profile Engine</p>
    <p class="introtitle" id="introtext">This is an Urban Strategies-built app that opens up data from the Canadian census in four Ontario regional municipalities. <br>
      Select a region of interest, and then select a theme you would like to display on the map. Then, click on individual areas to generate a summary profile</p>
  <div class="intro-button-container">
   <!--enter the application -->
   <button class="lrg-button" id="tutorial">Tutorial</button>
   <button class="lrg-button" id="proceed">Start</button>
   <p class="introtitle" id="disclaimer"> Note: this site is not yet optimized for mobile devices</p>
  </div>
 </div>
</div>



<!--side panel -->
<div class="sidenav" id="detailmenu">

  <div class="radiocontainer" id="regions">
    <p id="title2">Select a Region</p>
      <!--choose another region -->
      <form action="#">
        <p class="region">
            <input type="radio" name="region" id="btn1">
            <label for="btn1">Toronto</label>

        </p>
        <p class="region">
            <input type="radio" name="region" id="btn2">
            <label for="btn2">York Region</label>
        </p>
        <p class="region">
            <input type="radio" name="region" id="btn3">
            <label for="btn3">Peel Region</label>
        </p>
        <p class="region">
            <input type="radio" name="region" id="btn4">
            <label for="btn4">Durham Region</label>
        </p>
      </form>
   </div>

     <!--choose another region -->
     <button class="toggles" id="restart">Clear Map</button>


  <!--statistics -->
  <div class="colcontainer" id="diagnostic">
  <form action="#">
    <div class="buttons">
      <p id="title2">Select a Layer</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay1">
      <label for="#lay1">Population</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay2">
      <label for="#lay2">Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay3">
      <label for="#lay3">Units</label>
      </p>
      <p class="vartitle">Unit typologies</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay4">
      <label for="#lay4">Low-rise units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay5">
      <label for="#lay5">Mid-rise units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay6">
      <label for="#lay6">High-rise units</label>
      </p>
      <p class="vartitle">Unit sizes</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay7">
      <label for="#lay7">No bedrooms units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay8">
      <label for="#lay8">One bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay9">
      <label for="#lay9">Two bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay10">
      <label for="#lay10">Three bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay11">
      <label for="#lay11">Four bedroom units</label>
      </p>
      <p class="layer">
      <p class="vartitle">Household size</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay14">
      <label for="#lay14">One person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay15">
      <label for="#lay15">Two person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay16">
      <label for="#lay16">Three person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay17">
      <label for="#lay17">Four person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay18" >
      <label for="#lay18">Five person Households</label>
      </p>
      <p class="vartitle">Mode of transportation (commuters)</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay19">
      <label for="#lay19">Commuters - Drivers</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay20">
      <label for="#lay20">Commuters - Public Transit</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay21">
      <label for="#lay21">Commuters - Active Transit</label>
      </p>
    </form>
    </div>

    <div class="col">
      <p class="colhead" id="Total">Total</p>
      <p class="diag" id="Total1"></p>
      <p class="diag" id="Total2"></p>
      <p class="diag" id="Total3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total4"></p>
      <p class="diag" id="Total5"></p>
      <p class="diag" id="Total6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total7"></p>
      <p class="diag" id="Total8"></p>
      <p class="diag" id="Total9"></p>
      <p class="diag" id="Total10"></p>
      <p class="diag" id="Total11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total14"></p>
      <p class="diag" id="Total15"></p>
      <p class="diag" id="Total16"></p>
      <p class="diag" id="Total17"></p>
      <p class="diag" id="Total18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total19"></p>
      <p class="diag" id="Total20"></p>
      <p class="diag" id="Total21"></p>
    </div>
    <div class="col">
      <p class="colhead" id="Penetration">Share</p>
      <p class="diag" id="RegionPen1"></p>
      <p class="diag" id="RegionPen2"></p>
      <p class="diag" id="RegionPen3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen4"></p>
      <p class="diag" id="RegionPen5"></p>
      <p class="diag" id="RegionPen6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen7"></p>
      <p class="diag" id="RegionPen8"></p>
      <p class="diag" id="RegionPen9"></p>
      <p class="diag" id="RegionPen10"></p>
      <p class="diag" id="RegionPen11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen14"></p>
      <p class="diag" id="RegionPen15"></p>
      <p class="diag" id="RegionPen16"></p>
      <p class="diag" id="RegionPen17"></p>
      <p class="diag" id="RegionPen18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen19"></p>
      <p class="diag" id="RegionPen20"></p>
      <p class="diag" id="RegionPen21"></p>
    </div>
    <div class="col">
      <p class="colhead" id="Representation">Benchmark</p>
      <p class="diag" id="GroupPen1"></p>
      <p class="diag" id="GroupPen2"></p>
      <p class="diag" id="GroupPen3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen4"></p>
      <p class="diag" id="GroupPen5"></p>
      <p class="diag" id="GroupPen6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen7"></p>
      <p class="diag" id="GroupPen8"></p>
      <p class="diag" id="GroupPen9"></p>
      <p class="diag" id="GroupPen10"></p>
      <p class="diag" id="GroupPen11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen14"></p>
      <p class="diag" id="GroupPen15"></p>
      <p class="diag" id="GroupPen16"></p>
      <p class="diag" id="GroupPen17"></p>
      <p class="diag" id="GroupPen18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen19"></p>
      <p class="diag" id="GroupPen20"></p>
      <p class="diag" id="GroupPen21"></p>
    </div>
</div>

<!--clear the statistics -->
<button class="toggles" id="clear">Clear Selection</button>


   <!--hide the panel -->
   <div class="hideside">
   <p class="glyphicon glyphicon-chevron-right"></p>
   </div>

</div>

<!--show the panel -->
<div class="showside">
<p class="glyphicon glyphicon-chevron-left"></p>
</div>

<!--map -->
<div id='map'></div>

<style>
/*map style*/

body {
  font-family: "Lato", sans-serif;
  color: #6A6A6A;
}

#map {
  position:absolute;
  top:0;
  bottom:0;
  width:100%;
  z-index: -1;
}

/*changed to detail menu*/
#detailmenu {
  width: 30%;
  height: 100%;
  background-color: #F0F0F0;
  opacity: 1;
  position: absolute;
  top: 0px;
  right: 0px;
  display:block;
}

#title2 {
  left: 20px;
  font-size: 16px;
  font-weight: bold;
  z-index: 1;
}

#coljump {
  color: #F0F0F0;
  padding-top: 10px;
  font-size: 14px;
}

.vartitle {
  font-weight: bold;
  font-size: 14px;
  padding-top: 10px;

}

.hideside {
  position: absolute;
  bottom: 50%;
  right: 10px;
  font-size: 36px;
  z-index: 1;
  display:block;
}

.showside {
  position: absolute;
  bottom: 50%;
  right: 10px;
  font-size: 36px;
  z-index: 1;
  display:block;
}

.wash {
  width: 100%;
  height: 100%;
  background-color: #F0F0F0;
  opacity: 1;
  position: absolute;
  top: 0px;
  right: 0px;
  display:block;
}

.introcontainer {
  width: 50%;
  height: 50%;
  position: absolute;
  top: 300px;
  left: 35%;
  display:inline-block;
}

.intro-button-container {
  display:inline-block;
  padding-top: 30px;

}

.lrg-button {
width: 100px;
height: 50px;
background-color: #F0F0F0;
border-style: solid;
border-color: #6A6A6A;
font-size: 20px;
font-weight: 20px;

}

.lrg-button:hover {
background-color: #C3C3C3;
}

#pretitle {
  font-size: 20px;
}

#apptitle {
  font-size: 40px;
  font-weight: bold;
}

#introtext {
  padding-top: 30px;
  font-size: 16px;
}

#disclaimer {
  padding-top: 30px;
  font-size: 12px;
}

/*layer button styles*/
[name="layer"]:checked,
[name="layer"]:not(:checked) {
    position: absolute;
    left: -9999px;
}

[name="layer"]:checked + label,
[name="layer"]:not(:checked) + label
{
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    line-height: 20px;
    display: block;
    color: #6A6A6A;
}

[name="layer"]:checked + label:before,
[name="layer"]:not(:checked) + label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 18px;
    height: 18px;
    border: 1px solid #6A6A6A;
    border-radius: 100%;
    background: #F0F0F0;
}

[name="layer"]:checked + label:after,
[name="layer"]:not(:checked) + label:after {
    content: '';
    width: 12px;
    height: 12px;
    background: #6A6A6A;
    position: absolute;
    top: 3px;
    left: 3px;
    border-radius: 100%;
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
}

[name="layer"]:not(:checked) + label:after {
    opacity: 0;
    -webkit-transform: scale(0);
    transform: scale(0);
}
[name="layer"]:checked + label:after {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
}

/*region button styles*/
[name="region"]:checked,
[name="region"]:not(:checked) {
    position: absolute;
    left: -9999px;
}

[name="region"]:checked + label,
[name="region"]:not(:checked) + label
{
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    line-height: 20px;
    display: block;
    color: #6A6A6A;
}

[name="region"]:checked + label:before,
[name="region"]:not(:checked) + label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 18px;
    height: 18px;
    border: 1px solid #6A6A6A;
    border-radius: 100%;
    background: #F0F0F0;
}

[name="region"]:checked + label:after,
[name="region"]:not(:checked) + label:after {
    content: '';
    width: 12px;
    height: 12px;
    background: #6A6A6A;
    position: absolute;
    top: 3px;
    left: 3px;
    border-radius: 100%;
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
}

[name="region"]:not(:checked) + label:after {
    opacity: 0;
    -webkit-transform: scale(0);
    transform: scale(0);
}
[name="region"]:checked + label:after {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
}



.colcontainer {
  display: table;
  width: 100%;
  padding-left: 20px;
  top: 180px;
  position: relative;
}

.radiocontainer {
  display: inline-block;
  width: 100%;
  padding-left: 20px;
  top: 100px;
  background-color: #F0F0F0;
  position: relative;
}

.region {
 display: inline-block;
 padding-right: 50px;
}

.region:hover {
 display: inline-block;
 padding-right: 50px;
}

.toggles {
  display: block;
  background-color: #F0F0F0;
  border-style: none;
  position: relative;
}

.toggles:hover {
  background-color: #CACACA;
}

#restart {
  top: 100px;
  left: 5%;
  text-align: center;
}

#clear {
  top: 190px;
  left: 5%;
  text-align: center;
}

.col {
  display: table-cell;
}

.colhead  {
  font-weight: bold;
  font-size: 14px;
}

.diag .variable .colhead {
  text-align: left;
  border-width: 1px;
  border-style: none;
  border-color: grey;
  padding:none;
  right: 40px;
}

.mapboxgl-ctrl-icon {
  right: 10px;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in {
  background-color: #F0F0F0;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out {
  background-color: #F0F0F0;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass {
  background-color: #F0F0F0;
}

</style>


<script>
//set your starting variables - map
mapboxgl.accessToken = 'pk.eyJ1Ijoic3RvcnByaW1lIiwiYSI6InR6YWtmU2MifQ.mzm3c3_RSxKKc5MgUe0Fig';
var map = new mapboxgl.Map({
  container: 'map', //container id
  style: 'mapbox://styles/storprime/cjdalgxvfayh22rnuqvpq2gaq',
  center: [-79.019871,43.839352],
  zoom: 9, //starting zoom
  bearing: 0, // starting direction
  pitch: 0, //starting pitch
});

//hard coded variables
var toronto_coord = [-79.372458, 43.635469]
var york_coord =    [-79.309697, 43.900075]
var durham_coord =  [-78.687524, 43.903606]
var peel_coord =    [-79.602378, 43.584678]


//begin jquery functions
$( document ).ready(function() {
//$(".wash").hide(0);
$(".showside").hide(0);
$("#detailmenu").hide(0);
$("#map").hide(0);
$("#proceed").click(function(){
  $("#map").fadeIn(500);
  $("#detailmenu").show(1000);
  $(".wash").hide();
})

  //on any show of the map, load
 map.on('style.load', function() {
        // zoom and rotation controls for the <map>
          document.getElementById('map').style.cursor = "pointer";
          map.addControl (new mapboxgl.NavigationControl(),'top-left');
          map.setLight({
            'anchor':'map',
            'color':'white',
            'intensity': 0.40,
            'position': [45,45,45,],
           });

          //add sources

          map.addSource('GGH_Upper_Tier_Municipalities-0no6kp', {
            type: "vector",
            url: "mapbox://storprime.a9d493uz"
          });


          map.addSource('Peel-133r08', {
            type: "vector",
            url: "mapbox://storprime.aa48h68g"
          });

          map.addSource('Toronto-4j070p', {
            type:"vector",
            url: "mapbox://storprime.98u9a55v"
          });

          map.addSource('Durham-d6npoo', {
            type:"vector",
            url: "mapbox://storprime.7yjarn1o"
          });

          map.addSource('York-8edenn', {
            type:"vector",
            url: "mapbox://storprime.59vfjdmt"
          });

          map.addLayer({
                'id': 'GGH Outlines',
                'type':'line',
                'source': 'GGH_Upper_Tier_Municipalities-0no6kp',
                'source-layer': 'GGH_Upper_Tier_Municipalities-0no6kp',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'line-color': "#cccccc",
                    'line-width': 3
                  },
              },'water');

          //Toronto layers general
          map.addLayer({
                'id': 'Toronto-gen',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
              });
          //Toronto layers for styling
          map.addLayer({
                'id': 'Toronto-layer1',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                      [100, '#fef9e7'],
                      [250, '#fcf3cf'],
                      [500, '#f9e79f'],
                      [750, '#f7dc6f'],
                      [1000, '#f4d03f'],
                      [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.5
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer2',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer3',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer4',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer5',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer6',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer7',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer8',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer9',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer10',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer11',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer12',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer13',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer14',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer15',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer16',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer17',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer18',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer19',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer20',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer21',
                'type':'fill',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');

          map.addLayer({
               'id': 'Toronto-outline',
                'type':'line',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
               'id': 'Toronto-hover',
                'type':'line',
                'source': 'Toronto-4j070p',
                'source-layer': 'Toronto-4j070p',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
              'id': 'Toronto-select',
              'type':'fill',
              'source': 'Toronto-4j070p',
              'source-layer': 'Toronto-4j070p',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

          //York layers gens
          map.addLayer({
                'id': 'York-gen',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                    },

                });
          //York layers styling
          map.addLayer({
                'id': 'York-layer1',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer2',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer3',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer4',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer5',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer6',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer7',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer8',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer9',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer10',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer11',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer12',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer13',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer14',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer15',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer16',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer17',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer18',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer19',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer20',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer21',
                'type':'fill',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');

          //York layers other
          map.addLayer({
               'id': 'York-outline',
                'type':'line',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 0.5,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
               'id': 'York-hover',
                'type':'line',
                'source': 'York-8edenn',
                'source-layer': 'York-8edenn',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
              'id': 'York-select',
              'type':'fill',
              'source': 'York-8edenn',
              'source-layer': 'York-8edenn',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5

              },
            });

          //Durham layers gen
          map.addLayer({
                'id': 'Durham-gen',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
              });
          //Durham layers styling
          map.addLayer({
                'id': 'Durham-layer1',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer2',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer3',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer4',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer5',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer6',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer7',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer8',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer9',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer10',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer11',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer12',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer13',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer14',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer15',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer16',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer17',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer18',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer19',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer20',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer21',
                'type':'fill',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          //Durham layers other
          map.addLayer({
               'id': 'Durham-outline',
                'type':'line',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 0.5,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
               'id': 'Durham-hover',
                'type':'line',
                'source': 'Durham-d6npoo',
                'source-layer': 'Durham-d6npoo',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
              'id': 'Durham-select',
              'type':'fill',
              'source': 'Durham-d6npoo',
              'source-layer': 'Durham-d6npoo',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

          //Peel layers general
          map.addLayer({
                  'id': 'Peel-gen',
                  'type':'fill',
                  'source': 'Peel-133r08',
                  'source-layer': 'Peel-133r08',
                  'layout': {
                      	visibility: 'visible'
                    },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
                });
          //Peel layers styling
          map.addLayer({
                'id': 'Peel-layer1',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer2',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer3',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer4',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer5',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer6',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer7',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer8',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer9',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer10',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer11',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer12',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer13',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer14',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer15',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer16',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              });
          map.addLayer({
                'id': 'Peel-layer17',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              });
          map.addLayer({
                'id': 'Peel-layer18',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              });
          map.addLayer({
                'id': 'Peel-layer19',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              });
          map.addLayer({
                'id': 'Peel-layer20',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              });
          map.addLayer({
                'id': 'Peel-layer21',
                'type':'fill',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');

          //Peel layers other
          map.addLayer({
               'id': 'Peel-outline',
                'type':'line',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
               'id': 'Peel-hover',
                'type':'line',
                'source': 'Peel-133r08',
                'source-layer': 'Peel-133r08',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
              'id': 'Peel-select',
              'type':'fill',
              'source': 'Peel-133r08',
              'source-layer': 'Peel-133r08',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

  });//close initial layer management

  // set properties beforehand -  should be an array eg (["dashape.properties.commute_public_transit", "dashape.properties.commute_public_transit"]

 var peelclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none');
       map.setLayoutProperty("Toronto-select", 'visibility', 'none');
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none');
       map.setLayoutProperty("Durham-select", 'visibility', 'none');
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
     };
 };

 var torontoclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none')
       map.setLayoutProperty("Peel-select", 'visibility', 'none')
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none');
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none')
       map.setLayoutProperty("Durham-select", 'visibility', 'none')
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none')
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
     };
 };

 var yorkclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none')
       map.setLayoutProperty("Peel-select", 'visibility', 'none')
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
     };
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none')
       map.setLayoutProperty("Toronto-select", 'visibility', 'none')
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none')
       map.setLayoutProperty("Durham-select", 'visibility', 'none')
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
     };
 };

 var durhamclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none')
       map.setLayoutProperty("Peel-select", 'visibility', 'none')
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
     };
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none')
       map.setLayoutProperty("Toronto-select", 'visibility', 'none')
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
     };
 };

 var clearall  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
   if (toronto_visibility === 'visible') {
     map.setLayoutProperty("Toronto-gen", 'visibility', 'none')
     map.setLayoutProperty("Toronto-select", 'visibility', 'none')
     map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
     map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
   };

     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none')
       map.setLayoutProperty("Peel-select", 'visibility', 'none')
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none');
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none')
       map.setLayoutProperty("Durham-select", 'visibility', 'none')
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
     };
 };

$(".hideside").click(function(){
 $("#detailmenu").hide(50);
 $(".showside").show(50);
 });

 $(".showside").click(function(){
  $("#detailmenu").show(50);
  $(".showside").hide(50);
  });

//$("#showside").click(function(){
 //$("#detailmenu").width(30);
 //});

var toggle = ["#lay1","#lay2","#lay3","#lay4","#lay5","#lay6","#lay7","#lay8","#lay9","#lay10","#lay11","#lay12",
   "#lay13","#lay14","#lay15","#lay16","#lay17","#lay18","#lay19","#lay20","#lay21"]

   var torontolayers = [
     'Toronto-layer1',
     'Toronto-layer2',
     'Toronto-layer3',
     'Toronto-layer4',
     'Toronto-layer5',
     'Toronto-layer6',
     'Toronto-layer7',
     'Toronto-layer8',
     'Toronto-layer9',
     'Toronto-layer10',
     'Toronto-layer11',
     'Toronto-layer12',
     'Toronto-layer13',
     'Toronto-layer14',
     'Toronto-layer15',
     'Toronto-layer16',
     'Toronto-layer17',
     'Toronto-layer18',
     'Toronto-layer19',
     'Toronto-layer20',
     'Toronto-layer21'
   ]
   var yorklayers = [
     'York-layer1',
     'York-layer2',
     'York-layer3',
     'York-layer4',
     'York-layer5',
     'York-layer6',
     'York-layer7',
     'York-layer8',
     'York-layer9',
     'York-layer10',
     'York-layer11',
     'York-layer12',
     'York-layer13',
     'York-layer14',
     'York-layer15',
     'York-layer16',
     'York-layer17',
     'York-layer18',
     'York-layer19',
     'York-layer20',
     'York-layer21'
   ]
   var peellayers = [
     'Peel-layer1',
     'Peel-layer2',
     'Peel-layer3',
     'Peel-layer4',
     'Peel-layer5',
     'Peel-layer6',
     'Peel-layer7',
     'Peel-layer8',
     'Peel-layer9',
     'Peel-layer10',
     'Peel-layer11',
     'Peel-layer12',
     'Peel-layer13',
     'Peel-layer14',
     'Peel-layer15',
     'Peel-layer16',
     'Peel-layer17',
     'Peel-layer18',
     'Peel-layer19',
     'Peel-layer20',
     'Peel-layer21'
   ]
   var durhamlayers = [
     'Durham-layer1',
     'Durham-layer2',
     'Durham-layer3',
     'Durham-layer4',
     'Durham-layer5',
     'Durham-layer6',
     'Durham-layer7',
     'Durham-layer8',
     'Durham-layer9',
     'Durham-layer10',
     'Durham-layer11',
     'Durham-layer12',
     'Durham-layer13',
     'Durham-layer14',
     'Durham-layer15',
     'Durham-layer16',
     'Durham-layer17',
     'Durham-layer18',
     'Durham-layer19',
     'Durham-layer20',
     'Durham-layer21'
   ]
   var torontoclearlayers = yorklayers.concat(peellayers,durhamlayers) // holds layer groupings to turn off
   var yorkclearlayers = torontolayers.concat(peellayers,durhamlayers) // holds layer groupings to turn off
   var peelclearlayers = torontolayers.concat(yorklayers,durhamlayers) // holds layer groupings to turn off
   var durhamclearlayers = torontolayers.concat(yorklayers,peellayers) // holds layer groupings to turn off
//cycle through the layers and turn off all layers except the one with the clicked radio
  $("input[type=radio][name=layer]").click(function(){
    var radionumber = $('input[type=radio][name=layer]:checked').prop('id')
    console.log(radionumber)
    var radioindex = toggle.indexOf(String(radionumber))
    console.log(radioindex)
    if ($("input[type=radio][id=btn1]").prop("checked") == true) {
      var torontoactive = String(torontolayers[radioindex])
      map.setLayoutProperty(torontoactive, "visibility", "visible")
      console.log(torontoactive)
      var torontolayersWithoutCurrent = torontolayers.filter(function(x) { return x !== torontolayers[radioindex]; });
      for (d = 0; d < torontolayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(torontolayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+torontolayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn2]").prop("checked") == true) {
      //close all other layers

      var yorkactive = String(yorklayers[radioindex])
      map.setLayoutProperty(yorkactive, "visibility", "visible")
      console.log(yorkactive)
      var yorklayersWithoutCurrent = yorklayers.filter(function(x) { return x !== yorklayers[radioindex]; });
      for (d = 0; d < yorklayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(yorklayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+yorklayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn3]").prop("checked") == true) {
      var peelactive = String(peellayers[radioindex])
      map.setLayoutProperty(peelactive, "visibility", "visible")
      console.log(peelactive)
      var peellayersWithoutCurrent = peellayers.filter(function(x) { return x !== peellayers[radioindex]; });
      for (d = 0; d < peellayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(peellayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+peellayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn4]").prop("checked") == true) {
      var durhamactive = String(durhamlayers[radioindex])
      map.setLayoutProperty(durhamactive, "visibility", "visible")
      console.log(durhamactive)
      var durhamlayersWithoutCurrent = durhamlayers.filter(function(x) { return x !== durhamlayers[radioindex]; });
      for (d = 0; d < durhamlayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(durhamlayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+durhamlayersWithoutCurrent)
      console.log("This layer has been turned on:"+durhamactive)
    }
  });

 //if toronto gen is visible
 $("input[type=radio][id=btn1]").click(function(){
     //clear layers from other regions first
     for (c = 0; c < torontoclearlayers.length; c++) {
       map.setLayoutProperty(String(torontoclearlayers[c]), 'visibility', 'none');
     }
    var toronto_visibility = map.getLayoutProperty("Toronto-gen", 'visibility')
    if (toronto_visibility === 'none') {
      map.setLayoutProperty("Toronto-gen", 'visibility', 'visible')
      console.log("The toronto gen layer is on")
    };
  });
  $("input[type=radio][id=btn2]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < yorkclearlayers.length; c++) {
      map.setLayoutProperty(String(yorkclearlayers[c]), 'visibility', 'none');
    }
    var york_visibility = map.getLayoutProperty("York-gen", 'visibility')
    if (york_visibility === 'none') {
      map.getLayoutProperty("York-gen", 'visibility', 'visible')
      console.log("The york gen layer is on")
    };
  });
  $("input[type=radio][id=btn3]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < peelclearlayers.length; c++) {
      map.setLayoutProperty(String(peelclearlayers[c]), 'visibility', 'none');
    }
    var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility')
    if (peel_visibility === 'none') {
      console.log("The peel gen layer is on")
      map.setLayoutProperty("Peel-gen", 'visibility', 'visible')
    };
  });
  $("input[type=radio][id=btn4]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < durhamclearlayers.length; c++) {
      map.setLayoutProperty(String(durhamclearlayers[c]), 'visibility', 'none');
    }
    var durham_visibility = map.getLayoutProperty("Durham-gen", 'visibility')
    if (durham_visibility === 'none') {
      map.setLayoutProperty("Durham-gen", 'visibility', 'visible')
      console.log("The durham gen layer is on")
    };
  });



$("input[type=radio][id=btn1]").click(function(){
  var torontoDwellings = 1462275;
  var torontoPopulation = 2731571;
  var torontoHouseholds = 1112930;

  map.setLayoutProperty("Toronto-gen", 'visibility', 'visible')
  torontoclear();
  map.flyTo({center: toronto_coord, zoom: 13, bearing: 40, pitch: 45 })
  var queriednumbers1 = []
  var queriednumbers2 = []
  var queriednumbers3 = []
  var queriednumbers4 = []
  var queriednumbers5 = []
  var queriednumbers6 = []
  var queriednumbers7 = []
  var queriednumbers8 = []
  var queriednumbers9 = []
  var queriednumbers10 = []
  var queriednumbers11 = []
  var queriednumbers12 = []
  var queriednumbers13 = []
  var queriednumbers14 = []
  var queriednumbers15 = []
  var queriednumbers16 = []
  var queriednumbers17 = []
  var queriednumbers18 = []
  var queriednumbers19 = []
  var queriednumbers20 = []
  var queriednumbers21 = []
  var activeids = []

  map.on('mousemove', function (e) {
      var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Toronto-gen']});
      if (hovFeatures.length) {
        map.setFilter(['Toronto-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
      }
      else {
        map.setFilter(['Toronto-hover'], ["==", "dauid", ""]);
      };
  });

  map.on ('click', function (e){
  // query the feature that is clicked
  var features = map.queryRenderedFeatures(e.point, { layers: ["Toronto-gen"]});
  if (!features.length){
      return;}
      // capture in a new variable the first feature clicked
      var dashape = features[0];
      var id = dashape.properties.dauid;
      var lowmun = dashape.properties.lower_tier_name;
      var uppmun = dashape.properties.upper_tier_name;
      var queriednumber1 = dashape.properties.population;
      var queriednumber2 = dashape.properties.households;
      var queriednumber3 = dashape.properties.dwellings;
      var queriednumber4 = dashape.properties.low_rise;
      var queriednumber5 = dashape.properties.mid_rise;
      var queriednumber6 = dashape.properties.high_rise;
      var queriednumber7 = dashape.properties.No_bedrooms;
      var queriednumber8 = dashape.properties.One_bedroom;
      var queriednumber9 = dashape.properties.Two_bedroom;
      var queriednumber10 = dashape.properties.Three_bedroom;
      var queriednumber11 = dashape.properties.Four_or_more_bedroom;
      var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
      var queriednumber13 = dashape.properties.More_than_one_person_per_room;
      var queriednumber14 = dashape.properties.One_person_household;
      var queriednumber15 = dashape.properties.Two_person_household;
      var queriednumber16 = dashape.properties.Three_person_household;
      var queriednumber17 = dashape.properties.Four_person_household;
      var queriednumber18 = dashape.properties.Five_person_household;
      var queriednumber19 = dashape.properties.commute_driver;
      var queriednumber20 = dashape.properties.commute_public_transit;
      var queriednumber21 = dashape.properties.commute_active;
      var region1 = torontoPopulation;
      var region2 = torontoHouseholds;
      var region3 = torontoDwellings;
      var region4 = dashape.properties.low_rise_regional;
      var region5 = dashape.properties.mid_rise_regional;
      var region6 = dashape.properties.high_rise_regional;
      var region7 = dashape.properties.No_bedrooms_regional;
      var region8 = dashape.properties.One_bedroom_regional;
      var region9 = dashape.properties.Two_bedroom_regional;
      var region10 = dashape.properties.Three_bedroom_regional;
      var region11 = dashape.properties.Four_bedroom_regional;
      var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
      var region13 = dashape.properties.More_than_one_person_per_room_regional;
      var region14 = dashape.properties.One_person_household_regional;
      var region15 = dashape.properties.Two_person_household_regional;
      var region16 = dashape.properties.Three_person_household_regional;
      var region17 = dashape.properties.Four_person_household_regional;
      var region18 = dashape.properties.Five_person_household_regional;
      var region19 = dashape.properties.commute_driver_regional;
      var region20 = dashape.properties.commute_public_transit_regional;
      var region21 = dashape.properties.commute_active_total_regional;
      //dynamically toggle selection on click
        if (activeids.includes(id)===false) {
          queriednumbers1.push(queriednumber1);
          queriednumbers2.push(queriednumber2);
          queriednumbers3.push(queriednumber3);
          queriednumbers4.push(queriednumber4);
          queriednumbers5.push(queriednumber5);
          queriednumbers6.push(queriednumber6);
          queriednumbers7.push(queriednumber7);
          queriednumbers8.push(queriednumber8);
          queriednumbers9.push(queriednumber9);
          queriednumbers10.push(queriednumber10);
          queriednumbers11.push(queriednumber11);
          queriednumbers12.push(queriednumber12);
          queriednumbers13.push(queriednumber13);
          queriednumbers14.push(queriednumber14);
          queriednumbers15.push(queriednumber15);
          queriednumbers16.push(queriednumber16);
          queriednumbers17.push(queriednumber17);
          queriednumbers18.push(queriednumber18);
          queriednumbers19.push(queriednumber19);
          queriednumbers20.push(queriednumber20);
          queriednumbers21.push(queriednumber21);
          activeids.push(id);
          let filter = ['match', ['get', 'dauid'], activeids, true, false]
          map.setFilter("Toronto-select",filter)
          map.setLayoutProperty("Toronto-select", 'visibility', 'visible')
          console.log("You've added a DA. These are the activeids: "+activeids)
        }
        else if (activeids.includes(id)===true) {
          ind = activeids.indexOf(id)
          activeids.splice(ind,1);
          queriednumbers1.splice(ind,1);
          queriednumbers2.splice(ind,1);
          queriednumbers3.splice(ind,1);
          queriednumbers4.splice(ind,1);
          queriednumbers5.splice(ind,1);
          queriednumbers6.splice(ind,1);
          queriednumbers7.splice(ind,1);
          queriednumbers8.splice(ind,1);
          queriednumbers9.splice(ind,1);
          queriednumbers10.splice(ind,1);
          queriednumbers11.splice(ind,1);
          queriednumbers12.splice(ind,1);
          queriednumbers13.splice(ind,1);
          queriednumbers14.splice(ind,1);
          queriednumbers15.splice(ind,1);
          queriednumbers16.splice(ind,1);
          queriednumbers17.splice(ind,1);
          queriednumbers18.splice(ind,1);
          queriednumbers19.splice(ind,1);
          queriednumbers20.splice(ind,1);
          queriednumbers21.splice(ind,1);
          let filter = ['match', ['get', 'dauid'], activeids, true, false]
          map.setFilter("Toronto-select",filter)
          map.setLayoutProperty("Toronto-select", 'visibility', 'visible')
          console.log("You've removed a DA. These are the activeids: "+activeids)
        }

        //dynamically aggregate the values
        const add = (a, b) =>
          a + b
        var themetotal1 = queriednumbers1.reduce(add);
        var themetotal2 = queriednumbers2.reduce(add);
        var themetotal3 = queriednumbers3.reduce(add);
        var themetotal4 = queriednumbers4.reduce(add);
        var themetotal5 = queriednumbers5.reduce(add);
        var themetotal6 = queriednumbers6.reduce(add);
        var themetotal7 = queriednumbers7.reduce(add);
        var themetotal8 = queriednumbers8.reduce(add);
        var themetotal9 = queriednumbers9.reduce(add);
        var themetotal10 = queriednumbers10.reduce(add);
        var themetotal11 = queriednumbers11.reduce(add);
        var themetotal12 = queriednumbers12.reduce(add);
        var themetotal13 = queriednumbers13.reduce(add);
        var themetotal14 = queriednumbers14.reduce(add);
        var themetotal15 = queriednumbers15.reduce(add);
        var themetotal16 = queriednumbers16.reduce(add);
        var themetotal17 = queriednumbers17.reduce(add);
        var themetotal18 = queriednumbers18.reduce(add);
        var themetotal19 = queriednumbers19.reduce(add);
        var themetotal20 = queriednumbers20.reduce(add);
        var themetotal21 = queriednumbers21.reduce(add);

        //dynamically calculate the group percentage
        var penetr1 = ((region1/torontoPopulation)*100).toFixed(2);//population
        var penetr2 = ((region2/torontoHouseholds)*100).toFixed(2);//households
        var penetr3 = ((region3/torontoDwellings)*100).toFixed(2);//dwellings
        var penetr4 = ((region4/torontoDwellings)*100).toFixed(2);//households
        var penetr5 = ((region5/torontoDwellings)*100).toFixed(2);//households
        var penetr6 = ((region6/torontoDwellings)*100).toFixed(2);//households
        var penetr7 = ((region7/torontoHouseholds)*100).toFixed(2);//households
        var penetr8 = ((region8/torontoHouseholds)*100).toFixed(2);//households
        var penetr9 = ((region9/torontoHouseholds)*100).toFixed(2);//households
        var penetr10 = ((region10/torontoHouseholds)*100).toFixed(2);//households
        var penetr11 = ((region11/torontoHouseholds)*100).toFixed(2);//households
        var penetr12 = ((region12/torontoHouseholds)*100).toFixed(2);//households
        var penetr13 = ((region13/torontoHouseholds)*100).toFixed(2);//households
        var penetr14 = ((region14/torontoHouseholds)*100).toFixed(2);//households
        var penetr15 = ((region15/torontoHouseholds)*100).toFixed(2);//households
        var penetr16 = ((region16/torontoHouseholds)*100).toFixed(2);//households
        var penetr17 = ((region17/torontoHouseholds)*100).toFixed(2);//households
        var penetr18 = ((region18/torontoHouseholds)*100).toFixed(2);//households
        var penetr19 = ((region19/torontoPopulation)*100).toFixed(2);//population
        var penetr20 = ((region20/torontoPopulation)*100).toFixed(2);//population
        var penetr21 = ((region21/torontoPopulation)*100).toFixed(2);//population

        var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
        var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
        var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
        var regetr4 = ((themetotal4/(themetotal3))*100).toFixed(2);
        var regetr5 = ((themetotal5/(themetotal3))*100).toFixed(2);
        var regetr6 = ((themetotal6/(themetotal3))*100).toFixed(2);
        var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
        var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
        var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
        var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
        var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
        var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
        var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
        var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
        var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
        var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
        var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
        var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
        var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
        var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
        var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);

        //add to html content
        $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
        $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
        $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
        $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
        $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
        $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
        $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
        $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
        $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
        $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
        $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
        $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
        $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
        $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
        $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
        $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
        $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
        $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
        $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
        $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
        $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );

        $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
        $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
        $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
        $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
        $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
        $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
        $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
        $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
        $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
        $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
        $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
        $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
        $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
        $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
        $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
        $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
        $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
        $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
        $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
        $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
        $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );

        $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
        $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
        $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
        $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
        $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
        $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
        $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
        $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
        $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
        $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
        $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
        $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
        $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
        $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
        $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
        $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
        $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
        $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
        $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
        $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
        $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );

      });


  //reset variables
  function resetstats() {
    queriednumbers1.length = 0;
    queriednumbers2.length = 0;
    queriednumbers3.length = 0;
    queriednumbers4.length = 0;
    queriednumbers5.length = 0;
    queriednumbers6.length = 0;
    queriednumbers7.length = 0;
    queriednumbers8.length = 0;
    queriednumbers9.length = 0;
    queriednumbers10.length = 0;
    queriednumbers11.length = 0;
    queriednumbers12.length = 0;
    queriednumbers13.length = 0;
    queriednumbers14.length = 0;
    queriednumbers15.length = 0;
    queriednumbers16.length = 0;
    queriednumbers17.length = 0;
    queriednumbers18.length = 0;
    queriednumbers19.length = 0;
    queriednumbers20.length = 0;
    queriednumbers21.length = 0;
    activeids.length = 0;
    map.setLayoutProperty("Toronto-select", 'visibility', 'none');
    $(".diag").html( "<p>"+"-"+"</p>" );
  };

  $("#clear").click(resetstats);

    //restart functions
  $("#restart").click(function(){
    clearall();
    resetstats();
    });
  });

$("input[type=radio][id=btn2]").click(function(){
      var yorkPopulation = 1109909;
      var yorkHouseholds = 357085;
      var yorkDwellings = 449355;
      map.setLayoutProperty("York-gen", 'visibility', 'visible')
      yorkclear();
      map.flyTo({center: york_coord, zoom: 10, pitch: 45, bearing: 25})
      var queriednumbers1 = []
      var queriednumbers2 = []
      var queriednumbers3 = []
      var queriednumbers4 = []
      var queriednumbers5 = []
      var queriednumbers6 = []
      var queriednumbers7 = []
      var queriednumbers8 = []
      var queriednumbers9 = []
      var queriednumbers10 = []
      var queriednumbers11 = []
      var queriednumbers12 = []
      var queriednumbers13 = []
      var queriednumbers14 = []
      var queriednumbers15 = []
      var queriednumbers16 = []
      var queriednumbers17 = []
      var queriednumbers18 = []
      var queriednumbers19 = []
      var queriednumbers20 = []
      var queriednumbers21 = []
      var activeids = []

      map.on ('click', function (e){
      // query the feature that is clicked
        var features = map.queryRenderedFeatures(e.point, { layers: ["York-gen"]});
        if (!features.length){
            return;}
            // capture in a new variable the first feature clicked
        var dashape = features[0];
        var id = dashape.properties.dauid;
        var lowmun = dashape.properties.lower_tier_name;
        var uppmun = dashape.properties.upper_tier_name;
        var queriednumber1 = dashape.properties.population;
        var queriednumber2 = dashape.properties.households;
        var queriednumber3 = dashape.properties.dwellings;
        var queriednumber4 = dashape.properties.low_rise;
        var queriednumber5 = dashape.properties.mid_rise;
        var queriednumber6 = dashape.properties.high_rise;
        var queriednumber7 = dashape.properties.No_bedrooms;
        var queriednumber8 = dashape.properties.One_bedroom;
        var queriednumber9 = dashape.properties.Two_bedroom;
        var queriednumber10 = dashape.properties.Three_bedroom;
        var queriednumber11 = dashape.properties.Four_or_more_bedroom;
        var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
        var queriednumber13 = dashape.properties.More_than_one_person_per_room;
        var queriednumber14 = dashape.properties.One_person_household;
        var queriednumber15 = dashape.properties.Two_person_household;
        var queriednumber16 = dashape.properties.Three_person_household;
        var queriednumber17 = dashape.properties.Four_person_household;
        var queriednumber18 = dashape.properties.Five_person_household;
        var queriednumber19 = dashape.properties.commute_driver;
        var queriednumber20 = dashape.properties.commute_public_transit;
        var queriednumber21 = dashape.properties.commute_active;
        var region1 = yorkPopulation;
        var region2 = yorkHouseholds;
        var region3 = yorkDwellings;
        var region4 = dashape.properties.low_rise_regional;
        var region5 = dashape.properties.mid_rise_regional;
        var region6 = dashape.properties.high_rise_regional;
        var region7 = dashape.properties.No_bedrooms_regional;
        var region8 = dashape.properties.One_bedroom_regional;
        var region9 = dashape.properties.Two_bedroom_regional;
        var region10 = dashape.properties.Three_bedroom_regional;
        var region11 = dashape.properties.Four_bedroom_regional;
        var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
        var region13 = dashape.properties.More_than_one_person_per_room_regional;
        var region14 = dashape.properties.One_person_household_regional;
        var region15 = dashape.properties.Two_person_household_regional;
        var region16 = dashape.properties.Three_person_household_regional;
        var region17 = dashape.properties.Four_person_household_regional;
        var region18 = dashape.properties.Five_person_household_regional;
        var region19 = dashape.properties.commute_driver_regional;
        var region20 = dashape.properties.commute_public_transit_regional;
        var region21 = dashape.properties.commute_active_total_regional;


            //dynamically toggle selection on click
              if (activeids.includes(id)===false) {
                queriednumbers1.push(queriednumber1);
                queriednumbers2.push(queriednumber2);
                queriednumbers3.push(queriednumber3);
                queriednumbers4.push(queriednumber4);
                queriednumbers5.push(queriednumber5);
                queriednumbers6.push(queriednumber6);
                queriednumbers7.push(queriednumber7);
                queriednumbers8.push(queriednumber8);
                queriednumbers9.push(queriednumber9);
                queriednumbers10.push(queriednumber10);
                queriednumbers11.push(queriednumber11);
                queriednumbers12.push(queriednumber12);
                queriednumbers13.push(queriednumber13);
                queriednumbers14.push(queriednumber14);
                queriednumbers15.push(queriednumber15);
                queriednumbers16.push(queriednumber16);
                queriednumbers17.push(queriednumber17);
                queriednumbers18.push(queriednumber18);
                queriednumbers19.push(queriednumber19);
                queriednumbers20.push(queriednumber20);
                queriednumbers21.push(queriednumber21);
                activeids.push(id);
                let filter = ['match', ['get', 'dauid'], activeids, true, false]
                map.setFilter("York-select",filter)
                map.setLayoutProperty("York-select", 'visibility', 'visible')
                console.log("You've added a DA. These are the activeids: "+activeids)
              }
              else if (activeids.includes(id)===true) {
                ind = activeids.indexOf(id)
                activeids.splice(ind,1);
                queriednumbers1.splice(ind,1);
                queriednumbers2.splice(ind,1);
                queriednumbers3.splice(ind,1);
                queriednumbers4.splice(ind,1);
                queriednumbers5.splice(ind,1);
                queriednumbers6.splice(ind,1);
                queriednumbers7.splice(ind,1);
                queriednumbers8.splice(ind,1);
                queriednumbers9.splice(ind,1);
                queriednumbers10.splice(ind,1);
                queriednumbers11.splice(ind,1);
                queriednumbers12.splice(ind,1);
                queriednumbers13.splice(ind,1);
                queriednumbers14.splice(ind,1);
                queriednumbers15.splice(ind,1);
                queriednumbers16.splice(ind,1);
                queriednumbers17.splice(ind,1);
                queriednumbers18.splice(ind,1);
                queriednumbers19.splice(ind,1);
                queriednumbers20.splice(ind,1);
                queriednumbers21.splice(ind,1);
                let filter = ['match', ['get', 'dauid'], activeids, true, false]
                map.setFilter("York-select",filter)
                map.setLayoutProperty("York-select", 'visibility', 'visible')
                console.log("You've removed a DA. These are the activeids: "+activeids)
              };

              //dynamically aggregate the values
              const add = (a, b) =>
                a + b
              var themetotal1 = queriednumbers1.reduce(add);
              var themetotal2 = queriednumbers2.reduce(add);
              var themetotal3 = queriednumbers3.reduce(add);
              var themetotal4 = queriednumbers4.reduce(add);
              var themetotal5 = queriednumbers5.reduce(add);
              var themetotal6 = queriednumbers6.reduce(add);
              var themetotal7 = queriednumbers7.reduce(add);
              var themetotal8 = queriednumbers8.reduce(add);
              var themetotal9 = queriednumbers9.reduce(add);
              var themetotal10 = queriednumbers10.reduce(add);
              var themetotal11 = queriednumbers11.reduce(add);
              var themetotal12 = queriednumbers12.reduce(add);
              var themetotal13 = queriednumbers13.reduce(add);
              var themetotal14 = queriednumbers14.reduce(add);
              var themetotal15 = queriednumbers15.reduce(add);
              var themetotal16 = queriednumbers16.reduce(add);
              var themetotal17 = queriednumbers17.reduce(add);
              var themetotal18 = queriednumbers18.reduce(add);
              var themetotal19 = queriednumbers19.reduce(add);
              var themetotal20 = queriednumbers20.reduce(add);
              var themetotal21 = queriednumbers21.reduce(add);

              //dynamically calculate the group percentage
              var penetr1 = ((region1/yorkPopulation)*100).toFixed(2);//population
              var penetr2 = ((region2/yorkHouseholds)*100).toFixed(2);//households
              var penetr3 = ((region3/yorkDwellings)*100).toFixed(2);//dwellings
              var penetr4 = ((region4/yorkDwellings)*100).toFixed(2);//households
              var penetr5 = ((region5/yorkDwellings)*100).toFixed(2);//households
              var penetr6 = ((region6/yorkDwellings)*100).toFixed(2);//households
              var penetr7 = ((region7/yorkHouseholds)*100).toFixed(2);//households
              var penetr8 = ((region8/yorkHouseholds)*100).toFixed(2);//households
              var penetr9 = ((region9/yorkHouseholds)*100).toFixed(2);//households
              var penetr10 = ((region10/yorkHouseholds)*100).toFixed(2);//households
              var penetr11 = ((region11/yorkHouseholds)*100).toFixed(2);//households
              var penetr12 = ((region12/yorkHouseholds)*100).toFixed(2);//households
              var penetr13 = ((region13/yorkHouseholds)*100).toFixed(2);//households
              var penetr14 = ((region14/yorkHouseholds)*100).toFixed(2);//households
              var penetr15 = ((region15/yorkHouseholds)*100).toFixed(2);//households
              var penetr16 = ((region16/yorkHouseholds)*100).toFixed(2);//households
              var penetr17 = ((region17/yorkHouseholds)*100).toFixed(2);//households
              var penetr18 = ((region18/yorkHouseholds)*100).toFixed(2);//households
              var penetr19 = ((region19/yorkPopulation)*100).toFixed(2);//population
              var penetr20 = ((region20/yorkPopulation)*100).toFixed(2);//population
              var penetr21 = ((region21/yorkPopulation)*100).toFixed(2);//population

              var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
              console.log("regetr1:"+regetr1)
              var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
              var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
              var regetr4 = ((themetotal4/themetotal3)*100).toFixed(2);
              var regetr5 = ((themetotal5/themetotal3)*100).toFixed(2);
              var regetr6 = ((themetotal6/themetotal3)*100).toFixed(2);
              var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
              var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
              var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
              var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
              console.log("regetr10:"+regetr10)
              var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
              var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
              var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
              var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
              var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
              var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
              var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
              var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
              var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
              var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
              var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);

              //add to html content
              $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
              $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
              $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
              $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
              $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
              $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
              $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
              $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
              $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
              $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
              $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
              $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
              $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
              $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
              $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
              $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
              $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
              $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
              $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
              $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
              $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );

              $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
              $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
              $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
              $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
              $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
              $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
              $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
              $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
              $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );

              $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
              $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
              $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
              $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
              $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
              $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
              $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
              $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
              $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
              $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
              $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
              $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );

              $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
              $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
              $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
              $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
              $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
              $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
              $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
              $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
              $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
              $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );

              $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
              $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
              $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
              $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
              $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
              $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
              $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
              $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
              $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
              $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
              $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );

            });

          map.on('mousemove', function (e) {
              var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['York-gen']});
              if (hovFeatures.length) {
                map.setFilter(['York-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
              }
              else {
                map.setFilter(['York-hover'], ["==", "dauid", ""]);
              };
          });

          //reset variables
          function resetstats() {
          queriednumbers1.length = 0;
          queriednumbers2.length = 0;
          queriednumbers3.length = 0;
          queriednumbers4.length = 0;
          queriednumbers5.length = 0;
          queriednumbers6.length = 0;
          queriednumbers7.length = 0;
          queriednumbers8.length = 0;
          queriednumbers9.length = 0;
          queriednumbers10.length = 0;
          queriednumbers11.length = 0;
          queriednumbers12.length = 0;
          queriednumbers13.length = 0;
          queriednumbers14.length = 0;
          queriednumbers15.length = 0;
          queriednumbers16.length = 0;
          queriednumbers17.length = 0;
          queriednumbers18.length = 0;
          queriednumbers19.length = 0;
          queriednumbers20.length = 0;
          queriednumbers21.length = 0;
          activeids.length = 0;
          map.setLayoutProperty("York-select", 'visibility', 'none');
          $(".diag").html( "<p>"+"-"+"</p>" );
        };

      $("#clear").click(resetstats);

        //restart functions
      $("#restart").click(function(){
        clearall();
        resetstats();
        });
    });

$("input[type=radio][id=btn3]").click(function(){
     var peelPopulation = 1381739;
     var peelHouseholds = 430180;
     var peelDwellings = 585265;
     map.setLayoutProperty("Peel-gen", 'visibility', 'visible')
     peelclear();
     map.flyTo({center: peel_coord, zoom: 12, bearing: 0, pitch: 45 })
     var queriednumbers1 = []
     var queriednumbers2 = []
     var queriednumbers3 = []
     var queriednumbers4 = []
     var queriednumbers5 = []
     var queriednumbers6 = []
     var queriednumbers7 = []
     var queriednumbers8 = []
     var queriednumbers9 = []
     var queriednumbers10 = []
     var queriednumbers11 = []
     var queriednumbers12 = []
     var queriednumbers13 = []
     var queriednumbers14 = []
     var queriednumbers15 = []
     var queriednumbers16 = []
     var queriednumbers17 = []
     var queriednumbers18 = []
     var queriednumbers19 = []
     var queriednumbers20 = []
     var queriednumbers21 = []
     var activeids = []

     map.on ('click', function (e){
     // query the feature that is clicked
     var features = map.queryRenderedFeatures(e.point, { layers: ["Peel-gen"]});
     if (!features.length){
         return;}
         // capture in a new variable the first feature clicked
         var dashape = features[0];
         var id = dashape.properties.dauid;
         var lowmun = dashape.properties.lower_tier_name;
         var uppmun = dashape.properties.upper_tier_name;
         var queriednumber1 = dashape.properties.population;
         var queriednumber2 = dashape.properties.households;
         var queriednumber3 = dashape.properties.dwellings;
         var queriednumber4 = dashape.properties.low_rise;
         var queriednumber5 = dashape.properties.mid_rise;
         var queriednumber6 = dashape.properties.high_rise;
         var queriednumber7 = dashape.properties.No_bedrooms;
         var queriednumber8 = dashape.properties.One_bedroom;
         var queriednumber9 = dashape.properties.Two_bedroom;
         var queriednumber10 = dashape.properties.Three_bedroom;
         var queriednumber11 = dashape.properties.Four_or_more_bedroom;
         var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
         var queriednumber13 = dashape.properties.More_than_one_person_per_room;
         var queriednumber14 = dashape.properties.One_person_household;
         var queriednumber15 = dashape.properties.Two_person_household;
         var queriednumber16 = dashape.properties.Three_person_household;
         var queriednumber17 = dashape.properties.Four_person_household;
         var queriednumber18 = dashape.properties.Five_person_household;
         var queriednumber19 = dashape.properties.commute_driver;
         var queriednumber20 = dashape.properties.commute_public_transit;
         var queriednumber21 = dashape.properties.commute_active;
         var region1 = peelPopulation;
         var region2 = peelHouseholds;
         var region3 = peelDwellings;
         var region4 = dashape.properties.low_rise_regional;
         var region5 = dashape.properties.mid_rise_regional;
         var region6 = dashape.properties.high_rise_regional;
         var region7 = dashape.properties.No_bedrooms_regional;
         var region8 = dashape.properties.One_bedroom_regional;
         var region9 = dashape.properties.Two_bedroom_regional;
         var region10 = dashape.properties.Three_bedroom_regional;
         var region11 = dashape.properties.Four_bedroom_regional;
         var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
         var region13 = dashape.properties.More_than_one_person_per_room_regional;
         var region14 = dashape.properties.One_person_household_regional;
         var region15 = dashape.properties.Two_person_household_regional;
         var region16 = dashape.properties.Three_person_household_regional;
         var region17 = dashape.properties.Four_person_household_regional;
         var region18 = dashape.properties.Five_person_household_regional;
         var region19 = dashape.properties.commute_driver_regional;
         var region20 = dashape.properties.commute_public_transit_regional;
         var region21 = dashape.properties.commute_active_total_regional;

         //dynamically toggle selection on click
           if (activeids.includes(id)===false) {
             queriednumbers1.push(queriednumber1);
             queriednumbers2.push(queriednumber2);
             queriednumbers3.push(queriednumber3);
             queriednumbers4.push(queriednumber4);
             queriednumbers5.push(queriednumber5);
             queriednumbers6.push(queriednumber6);
             queriednumbers7.push(queriednumber7);
             queriednumbers8.push(queriednumber8);
             queriednumbers9.push(queriednumber9);
             queriednumbers10.push(queriednumber10);
             queriednumbers11.push(queriednumber11);
             queriednumbers12.push(queriednumber12);
             queriednumbers13.push(queriednumber13);
             queriednumbers14.push(queriednumber14);
             queriednumbers15.push(queriednumber15);
             queriednumbers16.push(queriednumber16);
             queriednumbers17.push(queriednumber17);
             queriednumbers18.push(queriednumber18);
             queriednumbers19.push(queriednumber19);
             queriednumbers20.push(queriednumber20);
             queriednumbers21.push(queriednumber21);
             activeids.push(id);
             let filter = ['match', ['get', 'dauid'], activeids, true, false]
             map.setFilter("Peel-select",filter)
             map.setLayoutProperty("Peel-select", 'visibility', 'visible')
             console.log("You've added a DA. These are the activeids: "+activeids)
           }
           else if (activeids.includes(id)===true) {
             ind = activeids.indexOf(id)
             activeids.splice(ind,1);
             queriednumbers1.splice(ind,1);
             queriednumbers2.splice(ind,1);
             queriednumbers3.splice(ind,1);
             queriednumbers4.splice(ind,1);
             queriednumbers5.splice(ind,1);
             queriednumbers6.splice(ind,1);
             queriednumbers7.splice(ind,1);
             queriednumbers8.splice(ind,1);
             queriednumbers9.splice(ind,1);
             queriednumbers10.splice(ind,1);
             queriednumbers11.splice(ind,1);
             queriednumbers12.splice(ind,1);
             queriednumbers13.splice(ind,1);
             queriednumbers14.splice(ind,1);
             queriednumbers15.splice(ind,1);
             queriednumbers16.splice(ind,1);
             queriednumbers17.splice(ind,1);
             queriednumbers18.splice(ind,1);
             queriednumbers19.splice(ind,1);
             queriednumbers20.splice(ind,1);
             queriednumbers21.splice(ind,1);
             let filter = ['match', ['get', 'dauid'], activeids, true, false]
             map.setFilter("Peel-select",filter)
             map.setLayoutProperty("Peel-select", 'visibility', 'visible')
             console.log("You've removed a DA. These are the activeids: "+activeids)
           }

           //dynamically aggregate the values
           const add = (a, b) =>
             a + b
           var themetotal1 = queriednumbers1.reduce(add);
           var themetotal2 = queriednumbers2.reduce(add);
           var themetotal3 = queriednumbers3.reduce(add);
           var themetotal4 = queriednumbers4.reduce(add);
           var themetotal5 = queriednumbers5.reduce(add);
           var themetotal6 = queriednumbers6.reduce(add);
           var themetotal7 = queriednumbers7.reduce(add);
           var themetotal8 = queriednumbers8.reduce(add);
           var themetotal9 = queriednumbers9.reduce(add);
           var themetotal10 = queriednumbers10.reduce(add);
           var themetotal11 = queriednumbers11.reduce(add);
           var themetotal12 = queriednumbers12.reduce(add);
           var themetotal13 = queriednumbers13.reduce(add);
           var themetotal14 = queriednumbers14.reduce(add);
           var themetotal15 = queriednumbers15.reduce(add);
           var themetotal16 = queriednumbers16.reduce(add);
           var themetotal17 = queriednumbers17.reduce(add);
           var themetotal18 = queriednumbers18.reduce(add);
           var themetotal19 = queriednumbers19.reduce(add);
           var themetotal20 = queriednumbers20.reduce(add);
           var themetotal21 = queriednumbers21.reduce(add);

           //dynamically calculate the group percentage
           var penetr1 = ((region1/peelPopulation)*100).toFixed(2);//population
           var penetr2 = ((region2/peelHouseholds)*100).toFixed(2);//households
           var penetr3 = ((region3/peelDwellings)*100).toFixed(2);//dwellings
           var penetr4 = ((region4/peelHouseholds)*100).toFixed(2);//households
           var penetr5 = ((region5/peelHouseholds)*100).toFixed(2);//households
           var penetr6 = ((region6/peelHouseholds)*100).toFixed(2);//households
           var penetr7 = ((region7/peelHouseholds)*100).toFixed(2);//households
           var penetr8 = ((region8/peelHouseholds)*100).toFixed(2);//households
           var penetr9 = ((region9/peelHouseholds)*100).toFixed(2);//households
           var penetr10 = ((region10/peelHouseholds)*100).toFixed(2);//households
           var penetr11 = ((region11/peelHouseholds)*100).toFixed(2);//households
           var penetr12 = ((region12/peelHouseholds)*100).toFixed(2);//households
           var penetr13 = ((region13/peelHouseholds)*100).toFixed(2);//households
           var penetr14 = ((region14/peelHouseholds)*100).toFixed(2);//households
           var penetr15 = ((region15/peelHouseholds)*100).toFixed(2);//households
           var penetr16 = ((region16/peelHouseholds)*100).toFixed(2);//households
           var penetr17 = ((region17/peelHouseholds)*100).toFixed(2);//households
           var penetr18 = ((region18/peelHouseholds)*100).toFixed(2);//households
           var penetr19 = ((region19/peelPopulation)*100).toFixed(2);//population
           var penetr20 = ((region20/peelPopulation)*100).toFixed(2);//population
           var penetr21 = ((region21/peelPopulation)*100).toFixed(2);//population

           var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
           console.log("regetr1:"+regetr1)
           var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
           var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
           var regetr4 = ((themetotal4/themetotal3)*100).toFixed(2);
           var regetr5 = ((themetotal5/themetotal3)*100).toFixed(2);
           var regetr6 = ((themetotal6/themetotal3)*100).toFixed(2);
           var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
           var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
           var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
           var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
           console.log("regetr10:"+regetr10)
           var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
           var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
           var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
           var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
           var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
           var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
           var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
           var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
           var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
           var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
           var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);

           //add to html content
           $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
           $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
           $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
           $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
           $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
           $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
           $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
           $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
           $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
           $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
           $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
           $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
           $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
           $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
           $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
           $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
           $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
           $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
           $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
           $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
           $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
           $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
           $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
           $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
           $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
           $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
           $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
           $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
           $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
           $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
           $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
           $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
           $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
           $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
           $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
           $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
           $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
           $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
           $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
           $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
           $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
           $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
           $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
           $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
           $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
           $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
           $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
           $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
           $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
           $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
           $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
           $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
           $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
           $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
           $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
           $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
           $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
           $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
           $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
           $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
           $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
           $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
           $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
           });

       map.on('mousemove', function (e) {
           var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Peel-gen']});
           if (hovFeatures.length) {
             map.setFilter(['Peel-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
           }
           else {
             map.setFilter(['Peel-hover'], ["==", "dauid", ""]);
           };
       });


       //reset variables
       function resetstats() {
       queriednumbers1.length = 0;
       queriednumbers2.length = 0;
       queriednumbers3.length = 0;
       queriednumbers4.length = 0;
       queriednumbers5.length = 0;
       queriednumbers6.length = 0;
       queriednumbers7.length = 0;
       queriednumbers8.length = 0;
       queriednumbers9.length = 0;
       queriednumbers10.length = 0;
       queriednumbers11.length = 0;
       queriednumbers12.length = 0;
       queriednumbers13.length = 0;
       queriednumbers14.length = 0;
       queriednumbers15.length = 0;
       queriednumbers16.length = 0;
       queriednumbers17.length = 0;
       queriednumbers18.length = 0;
       queriednumbers19.length = 0;
       queriednumbers20.length = 0;
       queriednumbers21.length = 0;
       activeids.length = 0;
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       $(".diag").html( "<p>"+"-"+"</p>" );
       };

       $("#clear").click(function(){
         resetstats();
       });

         //restart functions
       $("#restart").click(function(){
         clearall();
         resetstats();
       });
    });

$("input[type=radio][id=btn4]").click(function(){
      var durhamPopulation = 645862;
      var durhamHouseholds = 227905;
      var durhamDwellings = 287925;
      map.setLayoutProperty("Durham-gen", 'visibility', 'visible')
      durhamclear();
      map.flyTo({center: durham_coord, zoom: 10, bearing: 0, pitch: 45})
      var queriednumbers1 = []
      var queriednumbers2 = []
      var queriednumbers3 = []
      var queriednumbers4 = []
      var queriednumbers5 = []
      var queriednumbers6 = []
      var queriednumbers7 = []
      var queriednumbers8 = []
      var queriednumbers9 = []
      var queriednumbers10 = []
      var queriednumbers11 = []
      var queriednumbers12 = []
      var queriednumbers13 = []
      var queriednumbers14 = []
      var queriednumbers15 = []
      var queriednumbers16 = []
      var queriednumbers17 = []
      var queriednumbers18 = []
      var queriednumbers19 = []
      var queriednumbers20 = []
      var queriednumbers21 = []
      var activeids = []

      map.on ('click', function (e){
      // query the feature that is clicked
      var features = map.queryRenderedFeatures(e.point, { layers: ["Durham-gen"]});
      if (!features.length){
          return;}
          // capture in a new variable the first feature clicked
          var dashape = features[0];
          var id = dashape.properties.dauid;
          var lowmun = dashape.properties.lower_tier_name;
          var uppmun = dashape.properties.upper_tier_name;
          var queriednumber1 = dashape.properties.population;
          var queriednumber2 = dashape.properties.households;
          var queriednumber3 = dashape.properties.dwellings;
          var queriednumber4 = dashape.properties.low_rise;
          var queriednumber5 = dashape.properties.mid_rise;
          var queriednumber6 = dashape.properties.high_rise;
          var queriednumber7 = dashape.properties.No_bedrooms;
          var queriednumber8 = dashape.properties.One_bedroom;
          var queriednumber9 = dashape.properties.Two_bedroom;
          var queriednumber10 = dashape.properties.Three_bedroom;
          var queriednumber11 = dashape.properties.Four_or_more_bedroom;
          var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
          var queriednumber13 = dashape.properties.More_than_one_person_per_room;
          var queriednumber14 = dashape.properties.One_person_household;
          var queriednumber15 = dashape.properties.Two_person_household;
          var queriednumber16 = dashape.properties.Three_person_household;
          var queriednumber17 = dashape.properties.Four_person_household;
          var queriednumber18 = dashape.properties.Five_person_household;
          var queriednumber19 = dashape.properties.commute_driver;
          var queriednumber20 = dashape.properties.commute_public_transit;
          var queriednumber21 = dashape.properties.commute_active;
          var region1 = durhamPopulation;
          var region2 = durhamHouseholds;
          var region3 = durhamDwellings
          var region4 = dashape.properties.low_rise_regional;
          var region5 = dashape.properties.mid_rise_regional;
          var region6 = dashape.properties.high_rise_regional;
          var region7 = dashape.properties.No_bedrooms_regional;
          var region8 = dashape.properties.One_bedroom_regional;
          var region9 = dashape.properties.Two_bedroom_regional;
          var region10 = dashape.properties.Three_bedroom_regional;
          var region11 = dashape.properties.Four_bedroom_regional;
          var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
          var region13 = dashape.properties.More_than_one_person_per_room_regional;
          var region14 = dashape.properties.One_person_household_regional;
          var region15 = dashape.properties.Two_person_household_regional;
          var region16 = dashape.properties.Three_person_household_regional;
          var region17 = dashape.properties.Four_person_household_regional;
          var region18 = dashape.properties.Five_person_household_regional;
          var region19 = dashape.properties.commute_driver_regional;
          var region20 = dashape.properties.commute_public_transit_regional;
          var region21 = dashape.properties.commute_active_total_regional;
          //dynamically toggle selection on click
            if (activeids.includes(id)===false) {
              queriednumbers1.push(queriednumber1);
              queriednumbers2.push(queriednumber2);
              queriednumbers3.push(queriednumber3);
              queriednumbers4.push(queriednumber4);
              queriednumbers5.push(queriednumber5);
              queriednumbers6.push(queriednumber6);
              queriednumbers7.push(queriednumber7);
              queriednumbers8.push(queriednumber8);
              queriednumbers9.push(queriednumber9);
              queriednumbers10.push(queriednumber10);
              queriednumbers11.push(queriednumber11);
              queriednumbers12.push(queriednumber12);
              queriednumbers13.push(queriednumber13);
              queriednumbers14.push(queriednumber14);
              queriednumbers15.push(queriednumber15);
              queriednumbers16.push(queriednumber16);
              queriednumbers17.push(queriednumber17);
              queriednumbers18.push(queriednumber18);
              queriednumbers19.push(queriednumber19);
              queriednumbers20.push(queriednumber20);
              queriednumbers21.push(queriednumber21);
              activeids.push(id);
              let filter = ['match', ['get', 'dauid'], activeids, true, false]
              map.setFilter("Durham-select",filter)
              map.setLayoutProperty("Durham-select", 'visibility', 'visible')
              console.log("You've added a DA. These are the activeids: "+activeids)
            }
            else if (activeids.includes(id)===true) {
              ind = activeids.indexOf(id)
              activeids.splice(ind,1);
              queriednumbers1.splice(ind,1);
              queriednumbers2.splice(ind,1);
              queriednumbers3.splice(ind,1);
              queriednumbers4.splice(ind,1);
              queriednumbers5.splice(ind,1);
              queriednumbers6.splice(ind,1);
              queriednumbers7.splice(ind,1);
              queriednumbers8.splice(ind,1);
              queriednumbers9.splice(ind,1);
              queriednumbers10.splice(ind,1);
              queriednumbers11.splice(ind,1);
              queriednumbers12.splice(ind,1);
              queriednumbers13.splice(ind,1);
              queriednumbers14.splice(ind,1);
              queriednumbers15.splice(ind,1);
              queriednumbers16.splice(ind,1);
              queriednumbers17.splice(ind,1);
              queriednumbers18.splice(ind,1);
              queriednumbers19.splice(ind,1);
              queriednumbers20.splice(ind,1);
              queriednumbers21.splice(ind,1);
              let filter = ['match', ['get', 'dauid'], activeids, true, false]
              map.setFilter("Durham-select",filter)
              map.setLayoutProperty("Durham-select", 'visibility', 'visible')
              console.log("You've removed a DA. These are the activeids: "+activeids)
            }

            //dynamically aggregate the values
            const add = (a, b) =>
              a + b
            var themetotal1 = queriednumbers1.reduce(add);
            var themetotal2 = queriednumbers2.reduce(add);
            var themetotal3 = queriednumbers3.reduce(add);
            var themetotal4 = queriednumbers4.reduce(add);
            var themetotal5 = queriednumbers5.reduce(add);
            var themetotal6 = queriednumbers6.reduce(add);
            var themetotal7 = queriednumbers7.reduce(add);
            var themetotal8 = queriednumbers8.reduce(add);
            var themetotal9 = queriednumbers9.reduce(add);
            var themetotal10 = queriednumbers10.reduce(add);
            var themetotal11 = queriednumbers11.reduce(add);
            var themetotal12 = queriednumbers12.reduce(add);
            var themetotal13 = queriednumbers13.reduce(add);
            var themetotal14 = queriednumbers14.reduce(add);
            var themetotal15 = queriednumbers15.reduce(add);
            var themetotal16 = queriednumbers16.reduce(add);
            var themetotal17 = queriednumbers17.reduce(add);
            var themetotal18 = queriednumbers18.reduce(add);
            var themetotal19 = queriednumbers19.reduce(add);
            var themetotal20 = queriednumbers20.reduce(add);
            var themetotal21 = queriednumbers21.reduce(add);

            //dynamically calculate the group percentage
            var penetr1 = ((region1/durhamPopulation)*100).toFixed(2);//population
            var penetr2 = ((region2/durhamHouseholds)*100).toFixed(2);//households
            var penetr3 = ((region3/durhamDwellings)*100).toFixed(2);//dwellings
            var penetr4 = ((region4/durhamDwellings)*100).toFixed(2);//households
            var penetr5 = ((region5/durhamDwellings)*100).toFixed(2);//households
            var penetr6 = ((region6/durhamDwellings)*100).toFixed(2);//households
            var penetr7 = ((region7/durhamHouseholds)*100).toFixed(2);//households
            var penetr8 = ((region8/durhamHouseholds)*100).toFixed(2);//households
            var penetr9 = ((region9/durhamHouseholds)*100).toFixed(2);//households
            var penetr10 = ((region10/durhamHouseholds)*100).toFixed(2);//households
            var penetr11 = ((region11/durhamHouseholds)*100).toFixed(2);//households
            var penetr12 = ((region12/durhamHouseholds)*100).toFixed(2);//households
            var penetr13 = ((region13/durhamHouseholds)*100).toFixed(2);//households
            var penetr14 = ((region14/durhamHouseholds)*100).toFixed(2);//households
            var penetr15 = ((region15/durhamHouseholds)*100).toFixed(2);//households
            var penetr16 = ((region16/durhamHouseholds)*100).toFixed(2);//households
            var penetr17 = ((region17/durhamHouseholds)*100).toFixed(2);//households
            var penetr18 = ((region18/durhamHouseholds)*100).toFixed(2);//households
            var penetr19 = ((region19/durhamPopulation)*100).toFixed(2);//population
            var penetr20 = ((region20/durhamPopulation)*100).toFixed(2);//population
            var penetr21 = ((region21/durhamPopulation)*100).toFixed(2);//population

            var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
            console.log("regetr1:"+regetr1)
            var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
            var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
            var regetr4 = ((themetotal4/themetotal3)*100).toFixed(2);
            var regetr5 = ((themetotal5/themetotal3)*100).toFixed(2);
            var regetr6 = ((themetotal6/themetotal3)*100).toFixed(2);
            var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
            var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
            var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
            var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
            console.log("regetr10:"+regetr10)
            var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
            var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
            var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
            var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
            var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
            var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
            var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
            var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
            var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
            var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
            var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);

            //add to html content
            $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
            $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
            $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
            $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
            $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
            $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
            $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
            $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
            $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
            $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
            $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
            $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
            $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
            $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
            $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
            $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
            $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
            $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
            $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
            $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
            $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
            $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
            $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
            $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
            $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
            $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
            $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
            $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
            $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
            $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
            $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
            $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
            $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
            $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
            $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
            $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
            $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
            $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
            $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
            $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
            $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
            $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
            $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
            $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
            $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
            $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
            $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
            $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
            $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
            $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
            $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
            $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
            $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
            $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
            $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
            $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
            $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
            $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
            $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
            $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
            $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
            $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
            $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
            });

        map.on('mousemove', function (e) {
            var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Durham-gen']});
            if (hovFeatures.length) {
              map.setFilter(['Durham-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
            }
            else {
              map.setFilter(['Durham-hover'], ["==", "dauid", ""]);
            };
        });


        //reset variables
        function resetstats() {
        queriednumbers1.length = 0;
        queriednumbers2.length = 0;
        queriednumbers3.length = 0;
        queriednumbers4.length = 0;
        queriednumbers5.length = 0;
        queriednumbers6.length = 0;
        queriednumbers7.length = 0;
        queriednumbers8.length = 0;
        queriednumbers9.length = 0;
        queriednumbers10.length = 0;
        queriednumbers11.length = 0;
        queriednumbers12.length = 0;
        queriednumbers13.length = 0;
        queriednumbers14.length = 0;
        queriednumbers15.length = 0;
        queriednumbers16.length = 0;
        queriednumbers17.length = 0;
        queriednumbers18.length = 0;
        queriednumbers19.length = 0;
        queriednumbers20.length = 0;
        queriednumbers21.length = 0;
        activeids.length = 0;
        map.setLayoutProperty("Durham-select", 'visibility', 'none');
        $(".diag").html( "<p>"+"-"+"</p>" );
        };

        $("#clear").click(resetstats);

          //restart functions
        $("#restart").click(function(){
          clearall();
          resetstats();
        });
     });
});
</script>

</body>
</html>
