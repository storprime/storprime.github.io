<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'/>
  <title>Community Profiles</title>
  <meta name = 'viewport' content='initial-scale=1, maximum-scale=1,user-scalable=no' />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <!--add glyphs -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<div class="wash" id="intro">
  <div class="introcontainer">
    <p class="introtitle" id="pretitle">Welcome to the Urban Strategies</p>
    <p class="introtitle" id="apptitle">Community Profile Engine</p>
    <p class="introtitle" id="introtext">This is an Urban Strategies-built app that opens up data from the Canadian census in four Ontario regional municipalities. <br>
      Select a region of interest, and then select a theme you would like to display on the map. Then, click on individual areas to generate a summary profile</p>
  <div class="intro-button-container">
   <!--enter the application -->
   <button class="lrg-button" id="tutorial">Tutorial</button>
   <button class="lrg-button" id="proceed">Start</button>
   <p class="introtitle" id="disclaimer"> Note: this site is not yet optimized for mobile devices</p>
  </div>
 </div>
</div>



<!--side panel -->
<div class="sidenav" id="detailmenu">
  <!--choose another region -->
  <div class="radiocontainer" id="regions">
      <p id="title1">Select a Region</p>
      <!--choose another region -->
      <form action="#">
        <p class="region">
            <input type="radio" name="region" id="btn1">
            <label for="btn1">Toronto</label>

        </p>
        <p class="region">
            <input type="radio" name="region" id="btn2">
            <label for="btn2">York Region</label>
        </p>
        <p class="region">
            <input type="radio" name="region" id="btn3">
            <label for="btn3">Peel Region</label>
        </p>
        <p class="region">
            <input type="radio" name="region" id="btn4">
            <label for="btn4">Durham Region</label>
        </p>
      </form>
   <button class="toggles" id="restart">Clear Map</button>
   </div>

  <!--statistics -->
  <div class="colcontainer" id="diagnostic">
    <p id="title2">Select a Layer</p>
  <form action="#">
    <div class="buttons">

      <p class="layer">
      <input type="radio" name="layer" id="#lay1">
      <label for="#lay1">Population</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay2">
      <label for="#lay2">Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay3">
      <label for="#lay3">Units</label>
      </p>
      <p class="vartitle">Unit typologies</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay4">
      <label for="#lay4">Low-rise units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay5">
      <label for="#lay5">Mid-rise units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay6">
      <label for="#lay6">High-rise units</label>
      </p>
      <p class="vartitle">Unit sizes</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay7">
      <label for="#lay7">No bedrooms units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay8">
      <label for="#lay8">One bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay9">
      <label for="#lay9">Two bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay10">
      <label for="#lay10">Three bedroom units</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay11">
      <label for="#lay11">Four bedroom units</label>
      </p>
      <p class="layer">
      <p class="vartitle">Household size</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay14">
      <label for="#lay14">One person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay15">
      <label for="#lay15">Two person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay16">
      <label for="#lay16">Three person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay17">
      <label for="#lay17">Four person Households</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay18" >
      <label for="#lay18">Five person Households</label>
      </p>
      <p class="vartitle">Mode of transportation (commuters)</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay19">
      <label for="#lay19">Commuters - Drivers</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay20">
      <label for="#lay20">Commuters - Public Transit</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay21">
      <label for="#lay21">Commuters - Active Transit</label>
      </p>
      <p class="vartitle">Individual Income</p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay22">
      <label for="#lay22">Less than $10,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay23">
      <label for="#lay23">$10,000 - $20,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay24">
      <label for="#lay24">$20,000 - $30,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay25">
      <label for="#lay25">$30,000 - $40,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay26">
      <label for="#lay26">$40,000 - $50,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay27">
      <label for="#lay27">$50,000 - $60,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay28">
      <label for="#lay28">$60,000 - $70,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay29">
      <label for="#lay29">$70,000 - $80,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay30">
      <label for="#lay30">$80,000 - $90,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay31">
      <label for="#lay31">$90,000 - $100,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay32">
      <label for="#lay32">$100,000 - $150,000</label>
      </p>
      <p class="layer">
      <input type="radio" name="layer" id="#lay33">
      <label for="#lay33">Over $150,000</label>
      </p>
    </form>
    <!--clear the statistics -->
    <button class="toggles" id="clear">Clear Selection</button>
    </div>

    <div class="col">
      <p class="colhead" id="Total">Total</p>
      <p class="diag" id="Total1"></p>
      <p class="diag" id="Total2"></p>
      <p class="diag" id="Total3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total4"></p>
      <p class="diag" id="Total5"></p>
      <p class="diag" id="Total6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total7"></p>
      <p class="diag" id="Total8"></p>
      <p class="diag" id="Total9"></p>
      <p class="diag" id="Total10"></p>
      <p class="diag" id="Total11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total14"></p>
      <p class="diag" id="Total15"></p>
      <p class="diag" id="Total16"></p>
      <p class="diag" id="Total17"></p>
      <p class="diag" id="Total18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total19"></p>
      <p class="diag" id="Total20"></p>
      <p class="diag" id="Total21"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="Total22"></p>
      <p class="diag" id="Total23"></p>
      <p class="diag" id="Total24"></p>
      <p class="diag" id="Total25"></p>
      <p class="diag" id="Total26"></p>
      <p class="diag" id="Total27"></p>
      <p class="diag" id="Total28"></p>
      <p class="diag" id="Total29"></p>
      <p class="diag" id="Total30"></p>
      <p class="diag" id="Total31"></p>
      <p class="diag" id="Total32"></p>
      <p class="diag" id="Total33"></p>
    </div>
    <div class="col">
      <p class="colhead" id="Penetration">Share</p>
      <p class="diag" id="RegionPen1"></p>
      <p class="diag" id="RegionPen2"></p>
      <p class="diag" id="RegionPen3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen4"></p>
      <p class="diag" id="RegionPen5"></p>
      <p class="diag" id="RegionPen6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen7"></p>
      <p class="diag" id="RegionPen8"></p>
      <p class="diag" id="RegionPen9"></p>
      <p class="diag" id="RegionPen10"></p>
      <p class="diag" id="RegionPen11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen14"></p>
      <p class="diag" id="RegionPen15"></p>
      <p class="diag" id="RegionPen16"></p>
      <p class="diag" id="RegionPen17"></p>
      <p class="diag" id="RegionPen18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen19"></p>
      <p class="diag" id="RegionPen20"></p>
      <p class="diag" id="RegionPen21"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="RegionPen22"></p>
      <p class="diag" id="RegionPen23"></p>
      <p class="diag" id="RegionPen24"></p>
      <p class="diag" id="RegionPen25"></p>
      <p class="diag" id="RegionPen26"></p>
      <p class="diag" id="RegionPen27"></p>
      <p class="diag" id="RegionPen28"></p>
      <p class="diag" id="RegionPen29"></p>
      <p class="diag" id="RegionPen30"></p>
      <p class="diag" id="RegionPen31"></p>
      <p class="diag" id="RegionPen32"></p>
      <p class="diag" id="RegionPen33"></p>
    </div>
    <div class="col">
      <p class="colhead" id="Representation">Benchmark</p>
      <p class="diag" id="GroupPen1"></p>
      <p class="diag" id="GroupPen2"></p>
      <p class="diag" id="GroupPen3"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen4"></p>
      <p class="diag" id="GroupPen5"></p>
      <p class="diag" id="GroupPen6"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen7"></p>
      <p class="diag" id="GroupPen8"></p>
      <p class="diag" id="GroupPen9"></p>
      <p class="diag" id="GroupPen10"></p>
      <p class="diag" id="GroupPen11"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen14"></p>
      <p class="diag" id="GroupPen15"></p>
      <p class="diag" id="GroupPen16"></p>
      <p class="diag" id="GroupPen17"></p>
      <p class="diag" id="GroupPen18"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen19"></p>
      <p class="diag" id="GroupPen20"></p>
      <p class="diag" id="GroupPen21"></p>
      <p class="diag" id='coljump'>---</p>
      <p class="diag" id="GroupPen22"></p>
      <p class="diag" id="GroupPen23"></p>
      <p class="diag" id="GroupPen24"></p>
      <p class="diag" id="GroupPen25"></p>
      <p class="diag" id="GroupPen26"></p>
      <p class="diag" id="GroupPen27"></p>
      <p class="diag" id="GroupPen28"></p>
      <p class="diag" id="GroupPen29"></p>
      <p class="diag" id="GroupPen30"></p>
      <p class="diag" id="GroupPen31"></p>
      <p class="diag" id="GroupPen32"></p>
      <p class="diag" id="GroupPen33"></p>
    </div>
</div>
<!--hide the panel -->
<div class="hideside">
<p class="glyphicon glyphicon-chevron-right"></p>
</div>

</div>

<!--show the panel -->
<div class="showside">
<p class="glyphicon glyphicon-chevron-left"></p>
</div>

<!--map -->
<div id='map'></div>

<style>
/*map style*/

body {
  font-family: "Lato", sans-serif;
  color: #6A6A6A;
}

#map {
  position:absolute;
  top:0;
  bottom:0;
  width:100%;
  z-index: -1;
}


/*changed to detail menu*/
#detailmenu {
  width: 30%;
  height: 100%;
  left: 70%;
  padding-left: 3px;
  padding-top: 3px;
  padding-bottom: 3%;
  background-color: #F0F0F0;
  opacity: 1;
  position: absolute;
  overflow-y: auto;
}

#title1 {
  top: 5%;
  padding: none;
  left: 20px;
  font-size: 16px;
  font-weight: bold;
  z-index: 1;

}

#title2 {
  padding: none;
  left: 20px;
  font-size: 16px;
  font-weight: bold;
  z-index: 1;
  top: 5%;
}

#coljump {
  color: #F0F0F0;
  padding-top: 10px;
  font-size: 14px;
}

.vartitle {
  font-weight: bold;
  font-size: 14px;
  padding-top: 10px;

}

.hideside {
  position: fixed;
  top:2%;
  right: 1%;
  font-size: 36px;
  z-index: 1;
  display:block;
}

.showside {
  position: fixed;
  top: 2%;
  right: 1%;
  font-size: 36px;
  z-index: 1;
  display:block;
}

.wash {
  width: 100%;
  height: 100%;
  background-color: #F0F0F0;
  opacity: 1;
  position: absolute;
  display:block;
}

.introcontainer {
  width: 50%;
  height: 50%;
  position: absolute;
  top: 30%;
  left: 35%;
  display:inline-block;
}

.intro-button-container {
  display:inline-block;
  padding-top: 30px;

}

.lrg-button {
width: 30%;
height: 15%;
background-color: #F0F0F0;
border-style: solid;
border-color: #6A6A6A;
font-size: 20px;
font-weight: 20px;

}

.lrg-button:hover {
background-color: #C3C3C3;
}

#pretitle {
  font-size: 20px;
}

#apptitle {
  font-size: 40px;
  font-weight: bold;
}

#introtext {
  padding-top: 30px;
  font-size: 16px;
}

#disclaimer {
  padding-top: 30px;
  font-size: 12px;
}

.colcontainer {
  display: table;
  width: 100%;
  padding-left: 20px;
  top: 10%;
  position: relative;
}

.radiocontainer {
  display: block;
  width: 100%;
  padding-left: 20px;
  top: 3%;
  position: relative;
}


.region:hover {
 display: block;
 padding-right: 50px;
 font-style: italic;
}

.toggles {
  display: block;
  background-color: #F0F0F0;
  border-style: none;
  position: absolute;
}

.toggles:hover {
  background-color: #CACACA;
}


.col {
  display: table-cell;

}

.colhead  {
  font-weight: bold;
  font-size: 14px;
}

.diag .variable .colhead {
  text-align: left;
  line-height: 20px;
}

.layer:hover {
  font-style: italic;
}

label  {
  display: block;
  padding: none;
  white-space: nowrap;
  overflow: hidden;
  text-align: left;

}

/*layer button styles*/
[name="layer"]:checked,
[name="layer"]:not(:checked) {
    position: absolute;
    left: -9999px;
}

[name="layer"]:checked + label,
[name="layer"]:not(:checked) + label
{
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    line-height: 20px;
    display: block;
    color: #6A6A6A;
}

[name="layer"]:checked + label:before,
[name="layer"]:not(:checked) + label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 18px;
    height: 18px;
    border: 1px solid #6A6A6A;
    border-radius: 100%;
    background: #F0F0F0;
}

[name="layer"]:checked + label:after,
[name="layer"]:not(:checked) + label:after {
    content: '';
    width: 12px;
    height: 12px;
    background: #6A6A6A;
    position: absolute;
    top: 3px;
    left: 3px;
    border-radius: 100%;
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
}

[name="layer"]:not(:checked) + label:after {
    opacity: 0;
    -webkit-transform: scale(0);
    transform: scale(0);
}
[name="layer"]:checked + label:after {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
}

/*region button styles*/
[name="region"]:checked,
[name="region"]:not(:checked) {
    position: absolute;
    left: -9999px;
}

[name="region"]:checked + label,
[name="region"]:not(:checked) + label
{
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    line-height: 20px;
    display: block;
    color: #6A6A6A;
}

[name="region"]:checked + label:before,
[name="region"]:not(:checked) + label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 18px;
    height: 18px;
    border: 1px solid #6A6A6A;
    border-radius: 100%;
    background: #F0F0F0;
}

[name="region"]:checked + label:after,
[name="region"]:not(:checked) + label:after {
    content: '';
    width: 12px;
    height: 12px;
    background: #6A6A6A;
    position: absolute;
    top: 3px;
    left: 3px;
    border-radius: 100%;
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
}

[name="region"]:not(:checked) + label:after {
    opacity: 0;
    -webkit-transform: scale(0);
    transform: scale(0);
}
[name="region"]:checked + label:after {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
}


.mapboxgl-ctrl-icon {
  right: 10px;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in {
  background-color: #F0F0F0;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out {
  background-color: #F0F0F0;
}

.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass {
  background-color: #F0F0F0;
}

</style>


<script>
//set your starting variables - map
mapboxgl.accessToken = 'pk.eyJ1Ijoic3RvcnByaW1lIiwiYSI6InR6YWtmU2MifQ.mzm3c3_RSxKKc5MgUe0Fig';
var map = new mapboxgl.Map({
  container: 'map', //container id
  style: 'mapbox://styles/storprime/cjdalgxvfayh22rnuqvpq2gaq',
  center: [-79.019871,43.839352],
  zoom: 9, //starting zoom
  bearing: 0, // starting direction
  pitch: 0, //starting pitch
});

//hard coded variables
var toronto_coord = [-79.372458, 43.635469]
var york_coord =    [-79.309697, 43.900075]
var durham_coord =  [-78.687524, 43.903606]
var peel_coord =    [-79.602378, 43.584678]


//begin jquery functions
$( document ).ready(function() {
//$(".wash").hide(0);
$(".showside").hide(0);
$("#detailmenu").hide(0);
$("#map").hide(0);
$("#proceed").click(function(){
  $("#map").fadeIn(500);
  $("#detailmenu").fadeIn(500);
  $(".wash").hide();
})

  //on any show of the map, load
 map.on('style.load', function() {
        // zoom and rotation controls for the <map>
          document.getElementById('map').style.cursor = "pointer";
          map.addControl (new mapboxgl.NavigationControl(),'top-left');
          map.setLight({
            'anchor':'map',
            'color':'white',
            'intensity': 0.40,
            'position': [45,45,45,],
           });

          //add sources

          map.addSource('GGH_Upper_Tier_Municipalities-0no6kp', {
            type: "vector",
            url: "mapbox://storprime.a9d493uz"
          });


          map.addSource('Peel-9c3pnh', {
            type: "vector",
            url: "mapbox://storprime.bfjvrzmm"
          });

          map.addSource('Toronto-bwo2qe', {
            type:"vector",
            url: "mapbox://storprime.0zo0oxjp"
          });

          map.addSource('Durham-3krwwb', {
            type:"vector",
            url: "mapbox://storprime.0gef7f10"
          });

          map.addSource('York-0370nl', {
            type:"vector",
            url: "mapbox://storprime.2t6giu4s"
          });

          map.addLayer({
                'id': 'GGH Outlines',
                'type':'line',
                'source': 'GGH_Upper_Tier_Municipalities-0no6kp',
                'source-layer': 'GGH_Upper_Tier_Municipalities-0no6kp',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'line-color': "#cccccc",
                    'line-width': 3
                  },
              },'water');

          //Toronto layers general
          map.addLayer({
                'id': 'Toronto-gen',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
              });
          //Toronto layers for styling
          map.addLayer({
                'id': 'Toronto-layer1',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                      [100, '#fef9e7'],
                      [250, '#fcf3cf'],
                      [500, '#f9e79f'],
                      [750, '#f7dc6f'],
                      [1000, '#f4d03f'],
                      [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.5
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer2',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer3',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer4',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer5',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer6',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer7',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer8',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer9',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer10',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer11',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer12',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer13',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer14',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer15',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer16',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer17',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer18',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer19',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer20',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer21',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer22',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_Less_10000_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer23',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '__10000_19999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer24',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_20000_29999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer25',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_30000_39999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer26',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_40000_49999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Toronto-layer27',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_50000_59999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
              'id': 'Toronto-layer28',
              'type':'fill',
              'source': 'Toronto-bwo2qe',
              'source-layer': 'Toronto-bwo2qe',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_60000_69999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Toronto-layer29',
              'type':'fill',
              'source': 'Toronto-bwo2qe',
              'source-layer': 'Toronto-bwo2qe',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_70000_79999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Toronto-layer30',
              'type':'fill',
              'source': 'Toronto-bwo2qe',
              'source-layer': 'Toronto-bwo2qe',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_80000_89999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
                'id': 'Toronto-layer31',
                'type':'fill',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_90000_99999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                  'id': 'Toronto-layer32',
                  'type':'fill',
                  'source': 'Toronto-bwo2qe',
                  'source-layer': 'Toronto-bwo2qe',
                  'layout': {
                        visibility: 'none'
                    },
                    'paint': {
                      'fill-color': {
                        'property': '_100000_150000_NORM',
                        'type':'interval',
                        'stops': [
                          [0.05, '#fef9e7'],
                          [0.1, '#fcf3cf'],
                          [0.15, '#f9e79f'],
                          [0.2, '#f7dc6f'],
                          [0.5, '#f4d03f'],
                          [0.8, '#f1c40f']
                      ]},
                    'fill-opacity': 0.75
                  },
                },'water');
          map.addLayer({
                    'id': 'Toronto-layer33',
                    'type':'fill',
                    'source': 'Toronto-bwo2qe',
                    'source-layer': 'Toronto-bwo2qe',
                    'layout': {
                          visibility: 'none'
                      },
                      'paint': {
                        'fill-color': {
                          'property': '_150000_Above-2',
                          'type':'interval',
                          'stops': [
                            [0.05, '#fef9e7'],
                            [0.1, '#fcf3cf'],
                            [0.15, '#f9e79f'],
                            [0.2, '#f7dc6f'],
                            [0.5, '#f4d03f'],
                            [0.8, '#f1c40f']
                        ]},
                      'fill-opacity': 0.75
                    },
                  },'water');

          map.addLayer({
               'id': 'Toronto-outline',
                'type':'line',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
               'id': 'Toronto-hover',
                'type':'line',
                'source': 'Toronto-bwo2qe',
                'source-layer': 'Toronto-bwo2qe',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
              'id': 'Toronto-select',
              'type':'fill',
              'source': 'Toronto-bwo2qe',
              'source-layer': 'Toronto-bwo2qe',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

          //York layers gens
          map.addLayer({
                'id': 'York-gen',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'visible'
                  },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                    },

                });
          //York layers styling
          map.addLayer({
                'id': 'York-layer1',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer2',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer3',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer4',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer5',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer6',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer7',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer8',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer9',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer10',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer11',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer12',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer13',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer14',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer15',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer16',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer17',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer18',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer19',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer20',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'York-layer21',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
              'id': 'York-layer22',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_Less_10000_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer23',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '__10000_19999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer24',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_20000_29999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer25',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_30000_39999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer26',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_40000_49999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
            'id': 'York-layer27',
            'type':'fill',
            'source': 'York-0370nl',
            'source-layer': 'York-0370nl',
            'layout': {
                  visibility: 'none'
              },
              'paint': {
                'fill-color': {
                  'property': '_50000_59999_NORM',
                  'type':'interval',
                  'stops': [
                    [0.05, '#fef9e7'],
                    [0.1, '#fcf3cf'],
                    [0.15, '#f9e79f'],
                    [0.2, '#f7dc6f'],
                    [0.5, '#f4d03f'],
                    [0.8, '#f1c40f']
                ]},
              'fill-opacity': 0.75
            },
          },'water');
          map.addLayer({
              'id': 'York-layer28',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_60000_69999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer29',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_70000_79999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'York-layer30',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_80000_89999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
                'id': 'York-layer31',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_90000_99999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                  'id': 'York-layer32',
                  'type':'fill',
                  'source': 'York-0370nl',
                  'source-layer': 'York-0370nl',
                  'layout': {
                        visibility: 'none'
                    },
                    'paint': {
                      'fill-color': {
                        'property': '_100000_150000_NORM',
                        'type':'interval',
                        'stops': [
                          [0.05, '#fef9e7'],
                          [0.1, '#fcf3cf'],
                          [0.15, '#f9e79f'],
                          [0.2, '#f7dc6f'],
                          [0.5, '#f4d03f'],
                          [0.8, '#f1c40f']
                      ]},
                    'fill-opacity': 0.75
                  },
                },'water');
          map.addLayer({
                'id': 'York-layer33',
                'type':'fill',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_150000_Above-2',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          //York layers other
          map.addLayer({
               'id': 'York-outline',
                'type':'line',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 0.5,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
               'id': 'York-hover',
                'type':'line',
                'source': 'York-0370nl',
                'source-layer': 'York-0370nl',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
              'id': 'York-select',
              'type':'fill',
              'source': 'York-0370nl',
              'source-layer': 'York-0370nl',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5

              },
            });

          //Durham layers gen
          map.addLayer({
                'id': 'Durham-gen',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
              });
          //Durham layers styling
          map.addLayer({
                'id': 'Durham-layer1',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer2',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer3',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer4',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer5',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer6',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer7',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer8',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer9',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer10',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer11',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer12',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer13',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer14',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer15',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer16',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer17',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer18',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer19',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer20',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer21',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer22',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_Less_10000_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer23',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '__10000_19999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Durham-layer24',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_20000_29999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
              'id': 'Durham-layer25',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_30000_39999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Durham-layer26',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_40000_49999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
            'id': 'Durham-layer27',
            'type':'fill',
            'source': 'Durham-3krwwb',
            'source-layer': 'Durham-3krwwb',
            'layout': {
                  visibility: 'none'
              },
              'paint': {
                'fill-color': {
                  'property': '_50000_59999_NORM',
                  'type':'interval',
                  'stops': [
                    [0.05, '#fef9e7'],
                    [0.1, '#fcf3cf'],
                    [0.15, '#f9e79f'],
                    [0.2, '#f7dc6f'],
                    [0.5, '#f4d03f'],
                    [0.8, '#f1c40f']
                ]},
              'fill-opacity': 0.75
            },
          },'water');
          map.addLayer({
              'id': 'Durham-layer28',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_60000_69999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Durham-layer29',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_70000_79999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Durham-layer30',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_80000_89999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
                'id': 'Durham-layer31',
                'type':'fill',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_90000_99999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                  'id': 'Durham-layer32',
                  'type':'fill',
                  'source': 'Durham-3krwwb',
                  'source-layer': 'Durham-3krwwb',
                  'layout': {
                        visibility: 'none'
                    },
                    'paint': {
                      'fill-color': {
                        'property': '_100000_150000_NORM',
                        'type':'interval',
                        'stops': [
                          [0.05, '#fef9e7'],
                          [0.1, '#fcf3cf'],
                          [0.15, '#f9e79f'],
                          [0.2, '#f7dc6f'],
                          [0.5, '#f4d03f'],
                          [0.8, '#f1c40f']
                      ]},
                    'fill-opacity': 0.75
                  },
                },'water');
          map.addLayer({
                    'id': 'Durham-layer33',
                    'type':'fill',
                    'source': 'Durham-3krwwb',
                    'source-layer': 'Durham-3krwwb',
                    'layout': {
                          visibility: 'none'
                      },
                      'paint': {
                        'fill-color': {
                          'property': '_150000_Above-2',
                          'type':'interval',
                          'stops': [
                            [0.05, '#fef9e7'],
                            [0.1, '#fcf3cf'],
                            [0.15, '#f9e79f'],
                            [0.2, '#f7dc6f'],
                            [0.5, '#f4d03f'],
                            [0.8, '#f1c40f']
                        ]},
                      'fill-opacity': 0.75
                    },
                  },'water');
          //Durham layers other
          map.addLayer({
               'id': 'Durham-outline',
                'type':'line',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 0.5,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
               'id': 'Durham-hover',
                'type':'line',
                'source': 'Durham-3krwwb',
                'source-layer': 'Durham-3krwwb',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });;
          map.addLayer({
              'id': 'Durham-select',
              'type':'fill',
              'source': 'Durham-3krwwb',
              'source-layer': 'Durham-3krwwb',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

          //Peel layers general
          map.addLayer({
                  'id': 'Peel-gen',
                  'type':'fill',
                  'source': 'Peel-9c3pnh',
                  'source-layer': 'Peel-9c3pnh',
                  'layout': {
                      	visibility: 'visible'
                    },
                  'paint': {
                    'fill-color': "#FFFFFF",
                    'fill-opacity': 0.1
                  },
                });
          //Peel layers styling
          map.addLayer({
                'id': 'Peel-layer1',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'population',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer2',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'households',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer3',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'dwellings',
                      'type':'interval',
                      'stops': [
                        [100, '#fef9e7'],
                        [250, '#fcf3cf'],
                        [500, '#f9e79f'],
                        [750, '#f7dc6f'],
                        [1000, '#f4d03f'],
                        [1500, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer4',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'low_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer5',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'mid_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer6',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'high_rise_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer7',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'No_bedrooms_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer8',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer9',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer10',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer11',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_bedroom_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer12',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_or_fewer_people_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer13',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'More_than_one_person_per_room_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer14',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'One_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer15',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Two_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer16',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Three_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer17',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Four_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer18',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'Five_person_household_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer19',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_driver_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer20',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_public_transit_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                'id': 'Peel-layer21',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': 'commute_active_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
              'id': 'Peel-layer22',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_Less_10000_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer23',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '__10000_19999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer24',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_20000_29999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer25',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_30000_39999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer26',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_40000_49999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer27',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_50000_59999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer28',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_60000_69999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer29',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_70000_79999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
              'id': 'Peel-layer30',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_80000_89999_NORM',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          map.addLayer({
                'id': 'Peel-layer31',
                'type':'fill',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                  'paint': {
                    'fill-color': {
                      'property': '_90000_99999_NORM',
                      'type':'interval',
                      'stops': [
                        [0.05, '#fef9e7'],
                        [0.1, '#fcf3cf'],
                        [0.15, '#f9e79f'],
                        [0.2, '#f7dc6f'],
                        [0.5, '#f4d03f'],
                        [0.8, '#f1c40f']
                    ]},
                  'fill-opacity': 0.75
                },
              },'water');
          map.addLayer({
                  'id': 'Peel-layer32',
                  'type':'fill',
                  'source': 'Peel-9c3pnh',
                  'source-layer': 'Peel-9c3pnh',
                  'layout': {
                        visibility: 'none'
                    },
                    'paint': {
                      'fill-color': {
                        'property': '_100000_150000_NORM',
                        'type':'interval',
                        'stops': [
                          [0.05, '#fef9e7'],
                          [0.1, '#fcf3cf'],
                          [0.15, '#f9e79f'],
                          [0.2, '#f7dc6f'],
                          [0.5, '#f4d03f'],
                          [0.8, '#f1c40f']
                      ]},
                    'fill-opacity': 0.75
                  },
                },'water');
          map.addLayer({
              'id': 'Peel-layer33',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
                },
                'paint': {
                  'fill-color': {
                    'property': '_150000_Above-2',
                    'type':'interval',
                    'stops': [
                      [0.05, '#fef9e7'],
                      [0.1, '#fcf3cf'],
                      [0.15, '#f9e79f'],
                      [0.2, '#f7dc6f'],
                      [0.5, '#f4d03f'],
                      [0.8, '#f1c40f']
                  ]},
                'fill-opacity': 0.75
              },
            },'water');
          //Peel layers other
          map.addLayer({
               'id': 'Peel-outline',
                'type':'line',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 4,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
               'id': 'Peel-hover',
                'type':'line',
                'source': 'Peel-9c3pnh',
                'source-layer': 'Peel-9c3pnh',
                'layout': {
                      visibility: 'none'
                  },
                'paint': {
                  'line-color': '#656565',
                  'line-width': 5,
                  'line-blur': 2,
                  'line-opacity': 1
                },
              });
          map.addLayer({
              'id': 'Peel-select',
              'type':'fill',
              'source': 'Peel-9c3pnh',
              'source-layer': 'Peel-9c3pnh',
              'layout': {
                    visibility: 'none'
              },
              'paint': {
                'fill-color': '#656565',
                'fill-opacity': 0.5
              },
            });

  });//close initial layer management

  // set properties beforehand -  should be an array eg (["dashape.properties.commute_public_transit", "dashape.properties.commute_public_transit"]

 var peelclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none');
       map.setLayoutProperty("Toronto-select", 'visibility', 'none');
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer22", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer23", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer24", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer25", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer26", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer27", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer28", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer29", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer30", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer31", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer32", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer33", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
       map.setLayoutProperty("York-layer22", 'visibility', 'none');
       map.setLayoutProperty("York-layer23", 'visibility', 'none');
       map.setLayoutProperty("York-layer24", 'visibility', 'none');
       map.setLayoutProperty("York-layer25", 'visibility', 'none');
       map.setLayoutProperty("York-layer26", 'visibility', 'none');
       map.setLayoutProperty("York-layer27", 'visibility', 'none');
       map.setLayoutProperty("York-layer28", 'visibility', 'none');
       map.setLayoutProperty("York-layer29", 'visibility', 'none');
       map.setLayoutProperty("York-layer30", 'visibility', 'none');
       map.setLayoutProperty("York-layer31", 'visibility', 'none');
       map.setLayoutProperty("York-layer32", 'visibility', 'none');
       map.setLayoutProperty("York-layer33", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none');
       map.setLayoutProperty("Durham-select", 'visibility', 'none');
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer22", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer23", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer24", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer25", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer26", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer27", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer28", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer29", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer30", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer31", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer32", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer33", 'visibility', 'none');
     };
 };

 var torontoclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none');
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer22", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer23", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer24", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer25", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer26", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer27", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer28", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer29", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer30", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer31", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer32", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer33", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
       map.setLayoutProperty("York-layer22", 'visibility', 'none');
       map.setLayoutProperty("York-layer23", 'visibility', 'none');
       map.setLayoutProperty("York-layer24", 'visibility', 'none');
       map.setLayoutProperty("York-layer25", 'visibility', 'none');
       map.setLayoutProperty("York-layer26", 'visibility', 'none');
       map.setLayoutProperty("York-layer27", 'visibility', 'none');
       map.setLayoutProperty("York-layer28", 'visibility', 'none');
       map.setLayoutProperty("York-layer29", 'visibility', 'none');
       map.setLayoutProperty("York-layer30", 'visibility', 'none');
       map.setLayoutProperty("York-layer31", 'visibility', 'none');
       map.setLayoutProperty("York-layer32", 'visibility', 'none');
       map.setLayoutProperty("York-layer33", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none');
       map.setLayoutProperty("Durham-select", 'visibility', 'none');
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer22", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer23", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer24", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer25", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer26", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer27", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer28", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer29", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer30", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer31", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer32", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer33", 'visibility', 'none');
     };
 };

 var yorkclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none');
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer22", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer23", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer24", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer25", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer26", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer27", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer28", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer29", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer30", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer31", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer32", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer33", 'visibility', 'none');
     };
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none');
       map.setLayoutProperty("Toronto-select", 'visibility', 'none');
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer22", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer23", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer24", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer25", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer26", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer27", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer28", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer29", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer30", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer31", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer32", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer33", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none');
       map.setLayoutProperty("Durham-select", 'visibility', 'none');
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer22", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer23", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer24", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer25", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer26", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer27", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer28", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer29", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer30", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer31", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer32", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer33", 'visibility', 'none');
     };
 };

 var durhamclear  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none');
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer22", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer23", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer24", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer25", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer26", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer27", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer28", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer29", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer30", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer31", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer32", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer33", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
       map.setLayoutProperty("York-layer22", 'visibility', 'none');
       map.setLayoutProperty("York-layer23", 'visibility', 'none');
       map.setLayoutProperty("York-layer24", 'visibility', 'none');
       map.setLayoutProperty("York-layer25", 'visibility', 'none');
       map.setLayoutProperty("York-layer26", 'visibility', 'none');
       map.setLayoutProperty("York-layer27", 'visibility', 'none');
       map.setLayoutProperty("York-layer28", 'visibility', 'none');
       map.setLayoutProperty("York-layer29", 'visibility', 'none');
       map.setLayoutProperty("York-layer30", 'visibility', 'none');
       map.setLayoutProperty("York-layer31", 'visibility', 'none');
       map.setLayoutProperty("York-layer32", 'visibility', 'none');
       map.setLayoutProperty("York-layer33", 'visibility', 'none');
     };
     if (toronto_visibility === 'visible') {
       map.setLayoutProperty("Toronto-gen", 'visibility', 'none');
       map.setLayoutProperty("Toronto-select", 'visibility', 'none');
       map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
       map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer22", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer23", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer24", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer25", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer26", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer27", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer28", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer29", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer30", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer31", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer32", 'visibility', 'none');
       map.setLayoutProperty("Toronto-layer33", 'visibility', 'none');
     };
 };

 var clearall  = function () {
   var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility');
   var toronto_visibility = map.getLayoutProperty('Toronto-gen', 'visibility');
   var york_visibility = map.getLayoutProperty('York-gen', 'visibility');
   var durham_visibility = map.getLayoutProperty('Durham-gen', 'visibility');
   visibilities = [peel_visibility,toronto_visibility,york_visibility,durham_visibility]
   if (toronto_visibility === 'visible') {
     map.setLayoutProperty("Toronto-gen", 'visibility', 'none');
     map.setLayoutProperty("Toronto-select", 'visibility', 'none');
     map.setLayoutProperty("Toronto-outline", 'visibility', 'none');
     map.setLayoutProperty("Toronto-hover", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer1", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer2", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer3", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer4", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer5", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer6", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer7", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer8", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer9", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer10", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer11", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer12", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer13", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer14", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer15", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer16", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer17", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer18", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer19", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer20", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer21", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer22", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer23", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer24", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer25", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer26", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer27", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer28", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer29", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer30", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer31", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer32", 'visibility', 'none');
     map.setLayoutProperty("Toronto-layer33", 'visibility', 'none');
   };

     if (peel_visibility === 'visible') {
       map.setLayoutProperty("Peel-gen", 'visibility', 'none');
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       map.setLayoutProperty("Peel-outline", 'visibility', 'none');
       map.setLayoutProperty("Peel-hover", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer1", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer2", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer3", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer4", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer5", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer6", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer7", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer8", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer9", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer10", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer11", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer12", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer13", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer14", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer15", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer16", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer17", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer18", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer19", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer20", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer21", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer22", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer23", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer24", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer25", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer26", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer27", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer28", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer29", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer30", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer31", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer32", 'visibility', 'none');
       map.setLayoutProperty("Peel-layer33", 'visibility', 'none');
     };
     if (york_visibility === 'visible') {
       map.setLayoutProperty("York-gen", 'visibility', 'none')
       map.setLayoutProperty("York-select", 'visibility', 'none')
       map.setLayoutProperty("York-outline", 'visibility', 'none')
       map.setLayoutProperty("York-hover", 'visibility', 'none');
       map.setLayoutProperty("York-layer1", 'visibility', 'none');
       map.setLayoutProperty("York-layer2", 'visibility', 'none');
       map.setLayoutProperty("York-layer3", 'visibility', 'none');
       map.setLayoutProperty("York-layer4", 'visibility', 'none');
       map.setLayoutProperty("York-layer5", 'visibility', 'none');
       map.setLayoutProperty("York-layer6", 'visibility', 'none');
       map.setLayoutProperty("York-layer7", 'visibility', 'none');
       map.setLayoutProperty("York-layer8", 'visibility', 'none');
       map.setLayoutProperty("York-layer9", 'visibility', 'none');
       map.setLayoutProperty("York-layer10", 'visibility', 'none');
       map.setLayoutProperty("York-layer11", 'visibility', 'none');
       map.setLayoutProperty("York-layer12", 'visibility', 'none');
       map.setLayoutProperty("York-layer13", 'visibility', 'none');
       map.setLayoutProperty("York-layer14", 'visibility', 'none');
       map.setLayoutProperty("York-layer15", 'visibility', 'none');
       map.setLayoutProperty("York-layer16", 'visibility', 'none');
       map.setLayoutProperty("York-layer17", 'visibility', 'none');
       map.setLayoutProperty("York-layer18", 'visibility', 'none');
       map.setLayoutProperty("York-layer19", 'visibility', 'none');
       map.setLayoutProperty("York-layer20", 'visibility', 'none');
       map.setLayoutProperty("York-layer21", 'visibility', 'none');
       map.setLayoutProperty("York-layer22", 'visibility', 'none');
       map.setLayoutProperty("York-layer23", 'visibility', 'none');
       map.setLayoutProperty("York-layer24", 'visibility', 'none');
       map.setLayoutProperty("York-layer25", 'visibility', 'none');
       map.setLayoutProperty("York-layer26", 'visibility', 'none');
       map.setLayoutProperty("York-layer27", 'visibility', 'none');
       map.setLayoutProperty("York-layer28", 'visibility', 'none');
       map.setLayoutProperty("York-layer29", 'visibility', 'none');
       map.setLayoutProperty("York-layer30", 'visibility', 'none');
       map.setLayoutProperty("York-layer31", 'visibility', 'none');
       map.setLayoutProperty("York-layer32", 'visibility', 'none');
       map.setLayoutProperty("York-layer33", 'visibility', 'none');
     };
     if (durham_visibility === 'visible') {
       map.setLayoutProperty("Durham-gen", 'visibility', 'none');
       map.setLayoutProperty("Durham-select", 'visibility', 'none');
       map.setLayoutProperty("Durham-outline", 'visibility', 'none');
       map.setLayoutProperty("Durham-hover", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer1", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer2", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer3", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer4", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer5", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer6", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer7", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer8", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer9", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer10", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer11", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer12", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer13", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer14", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer15", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer16", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer17", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer18", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer19", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer20", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer21", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer22", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer23", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer24", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer25", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer26", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer27", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer28", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer29", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer30", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer31", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer32", 'visibility', 'none');
       map.setLayoutProperty("Durham-layer33", 'visibility', 'none');
     };
 };

$(".hideside").click(function(){
 $("#detailmenu").hide(50);
 $(".showside").show(50);
 });

 $(".showside").click(function(){
  $("#detailmenu").show(50);
  $(".showside").hide(50);
  });

//$("#showside").click(function(){
 //$("#detailmenu").width(30);
 //});

var toggle = ["#lay1","#lay2","#lay3","#lay4","#lay5","#lay6","#lay7","#lay8","#lay9","#lay10","#lay11","#lay12","#lay13","#lay14","#lay15","#lay16","#lay17","#lay18","#lay19","#lay20","#lay21","#lay22","#lay23","#lay24","#lay25","#lay26","#lay27","#lay28","#lay29","#lay30","#lay31","#lay32","#lay33"]

   var torontolayers = [
     'Toronto-layer1',
     'Toronto-layer2',
     'Toronto-layer3',
     'Toronto-layer4',
     'Toronto-layer5',
     'Toronto-layer6',
     'Toronto-layer7',
     'Toronto-layer8',
     'Toronto-layer9',
     'Toronto-layer10',
     'Toronto-layer11',
     'Toronto-layer12',
     'Toronto-layer13',
     'Toronto-layer14',
     'Toronto-layer15',
     'Toronto-layer16',
     'Toronto-layer17',
     'Toronto-layer18',
     'Toronto-layer19',
     'Toronto-layer20',
     'Toronto-layer21',
     'Toronto-layer22',
     'Toronto-layer23',
     'Toronto-layer24',
     'Toronto-layer25',
     'Toronto-layer26',
     'Toronto-layer27',
     'Toronto-layer28',
     'Toronto-layer29',
     'Toronto-layer30',
     'Toronto-layer31',
     'Toronto-layer32',
     'Toronto-layer33'
   ]
   var yorklayers = [
     'York-layer1',
     'York-layer2',
     'York-layer3',
     'York-layer4',
     'York-layer5',
     'York-layer6',
     'York-layer7',
     'York-layer8',
     'York-layer9',
     'York-layer10',
     'York-layer11',
     'York-layer12',
     'York-layer13',
     'York-layer14',
     'York-layer15',
     'York-layer16',
     'York-layer17',
     'York-layer18',
     'York-layer19',
     'York-layer20',
     'York-layer21',
     'York-layer22',
     'York-layer23',
     'York-layer24',
     'York-layer25',
     'York-layer26',
     'York-layer27',
     'York-layer28',
     'York-layer29',
     'York-layer30',
     'York-layer31',
     'York-layer32',
     'York-layer33'
   ]
   var peellayers = [
     'Peel-layer1',
     'Peel-layer2',
     'Peel-layer3',
     'Peel-layer4',
     'Peel-layer5',
     'Peel-layer6',
     'Peel-layer7',
     'Peel-layer8',
     'Peel-layer9',
     'Peel-layer10',
     'Peel-layer11',
     'Peel-layer12',
     'Peel-layer13',
     'Peel-layer14',
     'Peel-layer15',
     'Peel-layer16',
     'Peel-layer17',
     'Peel-layer18',
     'Peel-layer19',
     'Peel-layer20',
     'Peel-layer21',
     'Peel-layer22',
     'Peel-layer23',
     'Peel-layer24',
     'Peel-layer25',
     'Peel-layer26',
     'Peel-layer27',
     'Peel-layer28',
     'Peel-layer29',
     'Peel-layer30',
     'Peel-layer31',
     'Peel-layer32',
     'Peel-layer33'
   ]
   var durhamlayers = [
     'Durham-layer1',
     'Durham-layer2',
     'Durham-layer3',
     'Durham-layer4',
     'Durham-layer5',
     'Durham-layer6',
     'Durham-layer7',
     'Durham-layer8',
     'Durham-layer9',
     'Durham-layer10',
     'Durham-layer11',
     'Durham-layer12',
     'Durham-layer13',
     'Durham-layer14',
     'Durham-layer15',
     'Durham-layer16',
     'Durham-layer17',
     'Durham-layer18',
     'Durham-layer19',
     'Durham-layer20',
     'Durham-layer21',
     'Durham-layer22',
     'Durham-layer23',
     'Durham-layer24',
     'Durham-layer25',
     'Durham-layer26',
     'Durham-layer27',
     'Durham-layer28',
     'Durham-layer29',
     'Durham-layer30',
     'Durham-layer31',
     'Durham-layer32',
     'Durham-layer33'
   ]
   var torontoclearlayers = yorklayers.concat(peellayers,durhamlayers) // holds layer groupings to turn off
   var yorkclearlayers = torontolayers.concat(peellayers,durhamlayers) // holds layer groupings to turn off
   var peelclearlayers = torontolayers.concat(yorklayers,durhamlayers) // holds layer groupings to turn off
   var durhamclearlayers = torontolayers.concat(yorklayers,peellayers) // holds layer groupings to turn off
//cycle through the layers and turn off all layers except the one with the clicked radio
  $("input[type=radio][name=layer]").click(function(){
    var radionumber = $('input[type=radio][name=layer]:checked').prop('id')
    console.log(radionumber)
    var radioindex = toggle.indexOf(String(radionumber))
    console.log(radioindex)
    if ($("input[type=radio][id=btn1]").prop("checked") == true) {
      var torontoactive = String(torontolayers[radioindex])
      map.setLayoutProperty(torontoactive, "visibility", "visible")
      console.log(torontoactive)
      var torontolayersWithoutCurrent = torontolayers.filter(function(x) { return x !== torontolayers[radioindex]; });
      for (d = 0; d < torontolayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(torontolayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+torontolayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn2]").prop("checked") == true) {
      //close all other layers

      var yorkactive = String(yorklayers[radioindex])
      map.setLayoutProperty(yorkactive, "visibility", "visible")
      console.log(yorkactive)
      var yorklayersWithoutCurrent = yorklayers.filter(function(x) { return x !== yorklayers[radioindex]; });
      for (d = 0; d < yorklayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(yorklayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+yorklayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn3]").prop("checked") == true) {
      var peelactive = String(peellayers[radioindex])
      map.setLayoutProperty(peelactive, "visibility", "visible")
      console.log(peelactive)
      var peellayersWithoutCurrent = peellayers.filter(function(x) { return x !== peellayers[radioindex]; });
      for (d = 0; d < peellayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(peellayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+peellayersWithoutCurrent)
    }
    if ($("input[type=radio][id=btn4]").prop("checked") == true) {
      var durhamactive = String(durhamlayers[radioindex])
      map.setLayoutProperty(durhamactive, "visibility", "visible")
      console.log(durhamactive)
      var durhamlayersWithoutCurrent = durhamlayers.filter(function(x) { return x !== durhamlayers[radioindex]; });
      for (d = 0; d < durhamlayersWithoutCurrent.length; d++) {
        map.setLayoutProperty(String(durhamlayersWithoutCurrent[d]), 'visibility', 'none');
      }
      console.log("These layers have been turned off:"+durhamlayersWithoutCurrent)
      console.log("This layer has been turned on:"+durhamactive)
    }
  });

 //if toronto gen is visible
 $("input[type=radio][id=btn1]").click(function(){
     //clear layers from other regions first
     for (c = 0; c < torontoclearlayers.length; c++) {
       map.setLayoutProperty(String(torontoclearlayers[c]), 'visibility', 'none');
     }
    var toronto_visibility = map.getLayoutProperty("Toronto-gen", 'visibility')
    if (toronto_visibility === 'none') {
      map.setLayoutProperty("Toronto-gen", 'visibility', 'visible')
      console.log("The toronto gen layer is on")
    };
  });
  $("input[type=radio][id=btn2]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < yorkclearlayers.length; c++) {
      map.setLayoutProperty(String(yorkclearlayers[c]), 'visibility', 'none');
    }
    var york_visibility = map.getLayoutProperty("York-gen", 'visibility')
    if (york_visibility === 'none') {
      map.getLayoutProperty("York-gen", 'visibility', 'visible')
      console.log("The york gen layer is on")
    };
  });
  $("input[type=radio][id=btn3]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < peelclearlayers.length; c++) {
      map.setLayoutProperty(String(peelclearlayers[c]), 'visibility', 'none');
    }
    var peel_visibility = map.getLayoutProperty("Peel-gen", 'visibility')
    if (peel_visibility === 'none') {
      console.log("The peel gen layer is on")
      map.setLayoutProperty("Peel-gen", 'visibility', 'visible')
    };
  });
  $("input[type=radio][id=btn4]").click(function(){
    //clear layers from other regions first
    for (c = 0; c < durhamclearlayers.length; c++) {
      map.setLayoutProperty(String(durhamclearlayers[c]), 'visibility', 'none');
    }
    var durham_visibility = map.getLayoutProperty("Durham-gen", 'visibility')
    if (durham_visibility === 'none') {
      map.setLayoutProperty("Durham-gen", 'visibility', 'visible')
      console.log("The durham gen layer is on")
    };
  });



$("input[type=radio][id=btn1]").click(function(){
  var torontoDwellings = 1462275;
  var torontoPopulation = 2731571;
  var torontoHouseholds = 1112930;

  map.setLayoutProperty("Toronto-gen", 'visibility', 'visible')
  torontoclear();
  map.flyTo({center: toronto_coord, zoom: 12, bearing: 40, pitch: 45 })
  var queriednumbers1 = []
  var queriednumbers2 = []
  var queriednumbers3 = []
  var queriednumbers4 = []
  var queriednumbers5 = []
  var queriednumbers6 = []
  var queriednumbers7 = []
  var queriednumbers8 = []
  var queriednumbers9 = []
  var queriednumbers10 = []
  var queriednumbers11 = []
  var queriednumbers12 = []
  var queriednumbers13 = []
  var queriednumbers14 = []
  var queriednumbers15 = []
  var queriednumbers16 = []
  var queriednumbers17 = []
  var queriednumbers18 = []
  var queriednumbers19 = []
  var queriednumbers20 = []
  var queriednumbers21 = []
  var queriednumbers22 = []
  var queriednumbers23 = []
  var queriednumbers24 = []
  var queriednumbers25 = []
  var queriednumbers26 = []
  var queriednumbers27 = []
  var queriednumbers28 = []
  var queriednumbers29 = []
  var queriednumbers30 = []
  var queriednumbers31 = []
  var queriednumbers32 = []
  var queriednumbers33 = []
  var activeids = []

  map.on('mousemove', function (e) {
      var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Toronto-gen']});
      if (hovFeatures.length) {
        map.setFilter(['Toronto-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
      }
      else {
        map.setFilter(['Toronto-hover'], ["==", "dauid", ""]);
      };
  });

  map.on ('click', function (e){
  // query the feature that is clicked
  var features = map.queryRenderedFeatures(e.point, { layers: ["Toronto-gen"]});
  if (!features.length){
      return;}
      // capture in a new variable the first feature clicked
      var dashape = features[0];
      var id = dashape.properties.dauid;
      var lowmun = dashape.properties.lower_tier_name;
      var uppmun = dashape.properties.upper_tier_name;
      var queriednumber1 = dashape.properties.population;
      var queriednumber2 = dashape.properties.households;
      var queriednumber3 = dashape.properties.dwellings;
      var queriednumber4 = dashape.properties.low_rise;
      var queriednumber5 = dashape.properties.mid_rise;
      var queriednumber6 = dashape.properties.high_rise;
      var queriednumber7 = dashape.properties.No_bedrooms;
      var queriednumber8 = dashape.properties.One_bedroom;
      var queriednumber9 = dashape.properties.Two_bedroom;
      var queriednumber10 = dashape.properties.Three_bedroom;
      var queriednumber11 = dashape.properties.Four_or_more_bedroom;
      var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
      var queriednumber13 = dashape.properties.More_than_one_person_per_room;
      var queriednumber14 = dashape.properties.One_person_household;
      var queriednumber15 = dashape.properties.Two_person_household;
      var queriednumber16 = dashape.properties.Three_person_household;
      var queriednumber17 = dashape.properties.Four_person_household;
      var queriednumber18 = dashape.properties.Five_person_household;
      var queriednumber19 = dashape.properties.commute_driver;
      var queriednumber20 = dashape.properties.commute_public_transit;
      var queriednumber21 = dashape.properties.commute_active;
      var queriednumber22 = dashape.properties._Less_10000;
      var queriednumber23 = dashape.properties.__10000_19999;
      var queriednumber24 = dashape.properties._20000_29999;
      var queriednumber25 = dashape.properties._30000_39999;
      var queriednumber26 = dashape.properties._40000_49999;
      var queriednumber27 = dashape.properties._50000_59999;
      var queriednumber28 = dashape.properties._60000_69999;
      var queriednumber29 = dashape.properties._70000_79999;
      var queriednumber30 = dashape.properties._80000_89999;
      var queriednumber31 = dashape.properties._90000_99999;
      var queriednumber32 = dashape.properties._100000_150000;
      var queriednumber33 = dashape.properties._150000_Above;
      var region1 = torontoPopulation;
      var region2 = torontoHouseholds;
      var region3 = torontoDwellings;
      var region4 = dashape.properties.low_rise_regional;
      var region5 = dashape.properties.mid_rise_regional;
      var region6 = dashape.properties.high_rise_regional;
      var region7 = dashape.properties.No_bedrooms_regional;
      var region8 = dashape.properties.One_bedroom_regional;
      var region9 = dashape.properties.Two_bedroom_regional;
      var region10 = dashape.properties.Three_bedroom_regional;
      var region11 = dashape.properties.Four_bedroom_regional;
      var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
      var region13 = dashape.properties.More_than_one_person_per_room_regional;
      var region14 = dashape.properties.One_person_household_regional;
      var region15 = dashape.properties.Two_person_household_regional;
      var region16 = dashape.properties.Three_person_household_regional;
      var region17 = dashape.properties.Four_person_household_regional;
      var region18 = dashape.properties.Five_person_household_regional;
      var region19 = dashape.properties.commute_driver_regional;
      var region20 = dashape.properties.commute_public_transit_regional;
      var region21 = dashape.properties.commute_active_total_regional;
      var region22 = dashape.properties._Less_10000_regional;
      var region23 = dashape.properties.__10000_19999_regional;
      var region24 = dashape.properties._20000_29999_regional;
      var region25 = dashape.properties._30000_39999_regional;
      var region26 = dashape.properties._40000_49999_regional;
      var region27 = dashape.properties._50000_59999_regional;
      var region28 = dashape.properties._60000_69999_regional;
      var region29 = dashape.properties._70000_79999_regional;
      var region30 = dashape.properties._80000_89999_regional;
      var region31 = dashape.properties._90000_99999_regional;
      var region32 = dashape.properties._100000_150000_regional;
      var region33 = dashape.properties._150000_Above_regional;
      //dynamically toggle selection on click
        if (activeids.includes(id)===false) {
          queriednumbers1.push(queriednumber1);
          queriednumbers2.push(queriednumber2);
          queriednumbers3.push(queriednumber3);
          queriednumbers4.push(queriednumber4);
          queriednumbers5.push(queriednumber5);
          queriednumbers6.push(queriednumber6);
          queriednumbers7.push(queriednumber7);
          queriednumbers8.push(queriednumber8);
          queriednumbers9.push(queriednumber9);
          queriednumbers10.push(queriednumber10);
          queriednumbers11.push(queriednumber11);
          queriednumbers12.push(queriednumber12);
          queriednumbers13.push(queriednumber13);
          queriednumbers14.push(queriednumber14);
          queriednumbers15.push(queriednumber15);
          queriednumbers16.push(queriednumber16);
          queriednumbers17.push(queriednumber17);
          queriednumbers18.push(queriednumber18);
          queriednumbers19.push(queriednumber19);
          queriednumbers20.push(queriednumber20);
          queriednumbers21.push(queriednumber21);
          queriednumbers22.push(queriednumber22);
          queriednumbers23.push(queriednumber23);
          queriednumbers24.push(queriednumber24);
          queriednumbers25.push(queriednumber25);
          queriednumbers26.push(queriednumber26);
          queriednumbers27.push(queriednumber27);
          queriednumbers28.push(queriednumber28);
          queriednumbers29.push(queriednumber29);
          queriednumbers30.push(queriednumber30);
          queriednumbers31.push(queriednumber31);
          queriednumbers32.push(queriednumber32);
          queriednumbers33.push(queriednumber33);
          activeids.push(id);
          let filter = ['match', ['get', 'dauid'], activeids, true, false]
          map.setFilter("Toronto-select",filter)
          map.setLayoutProperty("Toronto-select", 'visibility', 'visible')
          console.log("You've added a DA. These are the activeids: "+activeids)
        }
        else if (activeids.includes(id)===true) {
          ind = activeids.indexOf(id)
          activeids.splice(ind,1);
          queriednumbers1.splice(ind,1);
          queriednumbers2.splice(ind,1);
          queriednumbers3.splice(ind,1);
          queriednumbers4.splice(ind,1);
          queriednumbers5.splice(ind,1);
          queriednumbers6.splice(ind,1);
          queriednumbers7.splice(ind,1);
          queriednumbers8.splice(ind,1);
          queriednumbers9.splice(ind,1);
          queriednumbers10.splice(ind,1);
          queriednumbers11.splice(ind,1);
          queriednumbers12.splice(ind,1);
          queriednumbers13.splice(ind,1);
          queriednumbers14.splice(ind,1);
          queriednumbers15.splice(ind,1);
          queriednumbers16.splice(ind,1);
          queriednumbers17.splice(ind,1);
          queriednumbers18.splice(ind,1);
          queriednumbers19.splice(ind,1);
          queriednumbers20.splice(ind,1);
          queriednumbers21.splice(ind,1);
          queriednumbers22.splice(ind,1);
          queriednumbers23.splice(ind,1);
          queriednumbers24.splice(ind,1);
          queriednumbers25.splice(ind,1);
          queriednumbers26.splice(ind,1);
          queriednumbers27.splice(ind,1);
          queriednumbers28.splice(ind,1);
          queriednumbers29.splice(ind,1);
          queriednumbers30.splice(ind,1);
          queriednumbers31.splice(ind,1);
          queriednumbers32.splice(ind,1);
          queriednumbers33.splice(ind,1);
          let filter = ['match', ['get', 'dauid'], activeids, true, false]
          map.setFilter("Toronto-select",filter)
          map.setLayoutProperty("Toronto-select", 'visibility', 'visible')
          console.log("You've removed a DA. These are the activeids: "+activeids)
        }

        //dynamically aggregate the values
        const add = (a, b) =>
          a + b
        var themetotal1 = queriednumbers1.reduce(add);
        var themetotal2 = queriednumbers2.reduce(add);
        var themetotal3 = queriednumbers3.reduce(add);
        var themetotal4 = queriednumbers4.reduce(add);
        var themetotal5 = queriednumbers5.reduce(add);
        var themetotal6 = queriednumbers6.reduce(add);
        var themetotal7 = queriednumbers7.reduce(add);
        var themetotal8 = queriednumbers8.reduce(add);
        var themetotal9 = queriednumbers9.reduce(add);
        var themetotal10 = queriednumbers10.reduce(add);
        var themetotal11 = queriednumbers11.reduce(add);
        var themetotal12 = queriednumbers12.reduce(add);
        var themetotal13 = queriednumbers13.reduce(add);
        var themetotal14 = queriednumbers14.reduce(add);
        var themetotal15 = queriednumbers15.reduce(add);
        var themetotal16 = queriednumbers16.reduce(add);
        var themetotal17 = queriednumbers17.reduce(add);
        var themetotal18 = queriednumbers18.reduce(add);
        var themetotal19 = queriednumbers19.reduce(add);
        var themetotal20 = queriednumbers20.reduce(add);
        var themetotal21 = queriednumbers21.reduce(add);
        var themetotal22 = queriednumbers22.reduce(add);
        var themetotal23 = queriednumbers23.reduce(add);
        var themetotal24 = queriednumbers24.reduce(add);
        var themetotal25 = queriednumbers25.reduce(add);
        var themetotal26 = queriednumbers26.reduce(add);
        var themetotal27 = queriednumbers27.reduce(add);
        var themetotal28 = queriednumbers28.reduce(add);
        var themetotal29 = queriednumbers29.reduce(add);
        var themetotal30 = queriednumbers30.reduce(add);
        var themetotal31 = queriednumbers31.reduce(add);
        var themetotal32 = queriednumbers32.reduce(add);
        var themetotal33 = queriednumbers33.reduce(add);

        //dynamically calculate the group percentage
        var penetr1 = ((region1/torontoPopulation)*100).toFixed(2);//population
        var penetr2 = ((region2/torontoHouseholds)*100).toFixed(2);//households
        var penetr3 = ((region3/torontoDwellings)*100).toFixed(2);//dwellings
        var penetr4 = ((region4/torontoDwellings)*100).toFixed(2);//households
        var penetr5 = ((region5/torontoDwellings)*100).toFixed(2);//households
        var penetr6 = ((region6/torontoDwellings)*100).toFixed(2);//households
        var penetr7 = ((region7/torontoHouseholds)*100).toFixed(2);//households
        var penetr8 = ((region8/torontoHouseholds)*100).toFixed(2);//households
        var penetr9 = ((region9/torontoHouseholds)*100).toFixed(2);//households
        var penetr10 = ((region10/torontoHouseholds)*100).toFixed(2);//households
        var penetr11 = ((region11/torontoHouseholds)*100).toFixed(2);//households
        var penetr12 = ((region12/torontoHouseholds)*100).toFixed(2);//households
        var penetr13 = ((region13/torontoHouseholds)*100).toFixed(2);//households
        var penetr14 = ((region14/torontoHouseholds)*100).toFixed(2);//households
        var penetr15 = ((region15/torontoHouseholds)*100).toFixed(2);//households
        var penetr16 = ((region16/torontoHouseholds)*100).toFixed(2);//households
        var penetr17 = ((region17/torontoHouseholds)*100).toFixed(2);//households
        var penetr18 = ((region18/torontoHouseholds)*100).toFixed(2);//households
        var penetr19 = ((region19/torontoPopulation)*100).toFixed(2);//population
        var penetr20 = ((region20/torontoPopulation)*100).toFixed(2);//population
        var penetr21 = ((region21/torontoPopulation)*100).toFixed(2);//population
        var penetr22 = ((region22/torontoPopulation)*100).toFixed(2);//households
        var penetr23 = ((region23/torontoPopulation)*100).toFixed(2);//households
        var penetr24 = ((region24/torontoPopulation)*100).toFixed(2);//households
        var penetr25 = ((region25/torontoPopulation)*100).toFixed(2);//households
        var penetr26 = ((region26/torontoPopulation)*100).toFixed(2);//households
        var penetr27 = ((region27/torontoPopulation)*100).toFixed(2);//households
        var penetr28 = ((region28/torontoPopulation)*100).toFixed(2);//households
        var penetr29 = ((region29/torontoPopulation)*100).toFixed(2);//households
        var penetr30= ((region30/torontoPopulation)*100).toFixed(2);//households
        var penetr31 = ((region31/torontoPopulation)*100).toFixed(2);//households
        var penetr32 = ((region32/torontoPopulation)*100).toFixed(2);//households
        var penetr33 = ((region33/torontoPopulation)*100).toFixed(2);//population

        var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
        var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
        var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
        var regetr4 = ((themetotal4/(themetotal3))*100).toFixed(2);
        var regetr5 = ((themetotal5/(themetotal3))*100).toFixed(2);
        var regetr6 = ((themetotal6/(themetotal3))*100).toFixed(2);
        var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
        var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
        var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
        var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
        var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
        var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
        var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
        var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
        var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
        var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
        var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
        var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
        var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
        var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
        var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);
        var regetr22 = ((themetotal22/themetotal1)*100).toFixed(2);
        var regetr23 = ((themetotal23/themetotal1)*100).toFixed(2);
        var regetr24 = ((themetotal24/themetotal1)*100).toFixed(2);
        var regetr25 = ((themetotal25/themetotal1)*100).toFixed(2);
        var regetr26 = ((themetotal26/themetotal1)*100).toFixed(2);
        var regetr27 = ((themetotal27/themetotal1)*100).toFixed(2);
        var regetr28 = ((themetotal28/themetotal1)*100).toFixed(2);
        var regetr29 = ((themetotal29/themetotal1)*100).toFixed(2);
        var regetr30 = ((themetotal30/themetotal1)*100).toFixed(2);
        var regetr31 = ((themetotal31/themetotal1)*100).toFixed(2);
        var regetr32 = ((themetotal32/themetotal1)*100).toFixed(2);
        var regetr33 = ((themetotal33/themetotal1)*100).toFixed(2);

        //add to html content
        $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
        $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
        $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
        $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
        $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
        $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
        $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
        $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
        $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
        $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
        $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
        $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
        $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
        $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
        $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
        $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
        $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
        $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
        $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
        $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
        $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
        $( "#Total22" ).html( "<p>"+themetotal22+"</p>" );
        $( "#Total23" ).html( "<p>"+themetotal23+"</p>" );
        $( "#Total24" ).html( "<p>"+themetotal24+"</p>" );
        $( "#Total25" ).html( "<p>"+themetotal25+"</p>" );
        $( "#Total26" ).html( "<p>"+themetotal26+"</p>" );
        $( "#Total27" ).html( "<p>"+themetotal27+"</p>" );
        $( "#Total28" ).html( "<p>"+themetotal28+"</p>" );
        $( "#Total29" ).html( "<p>"+themetotal29+"</p>" );
        $( "#Total30" ).html( "<p>"+themetotal30+"</p>" );
        $( "#Total31" ).html( "<p>"+themetotal31+"</p>" );
        $( "#Total32" ).html( "<p>"+themetotal32+"</p>" );
        $( "#Total33" ).html( "<p>"+themetotal33+"</p>" );

        $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
        $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
        $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
        $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
        $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
        $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
        $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
        $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
        $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
        $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
        $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
        $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
        $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
        $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
        $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
        $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
        $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
        $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
        $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
        $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
        $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
        $( "#GroupPen22" ).html( "<p>"+penetr22+"%</p>" );
        $( "#GroupPen23" ).html( "<p>"+penetr23+"%</p>" );
        $( "#GroupPen24" ).html( "<p>"+penetr24+"%</p>" );
        $( "#GroupPen25" ).html( "<p>"+penetr25+"%</p>" );
        $( "#GroupPen26" ).html( "<p>"+penetr26+"%</p>" );
        $( "#GroupPen27" ).html( "<p>"+penetr27+"%</p>" );
        $( "#GroupPen28" ).html( "<p>"+penetr28+"%</p>" );
        $( "#GroupPen29" ).html( "<p>"+penetr29+"%</p>" );
        $( "#GroupPen30" ).html( "<p>"+penetr30+"%</p>" );
        $( "#GroupPen31" ).html( "<p>"+penetr31+"%</p>" );
        $( "#GroupPen32" ).html( "<p>"+penetr32+"%</p>" );
        $( "#GroupPen33" ).html( "<p>"+penetr33+"%</p>" );

        $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
        $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
        $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
        $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
        $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
        $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
        $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
        $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
        $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
        $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
        $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
        $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
        $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
        $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
        $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
        $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
        $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
        $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
        $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
        $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
        $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
        $( "#RegionPen22" ).html( "<p>"+regetr22+"%</p>" );
        $( "#RegionPen23" ).html( "<p>"+regetr23+"%</p>" );
        $( "#RegionPen24" ).html( "<p>"+regetr24+"%</p>" );
        $( "#RegionPen25" ).html( "<p>"+regetr25+"%</p>" );
        $( "#RegionPen26" ).html( "<p>"+regetr26+"%</p>" );
        $( "#RegionPen27" ).html( "<p>"+regetr27+"%</p>" );
        $( "#RegionPen28" ).html( "<p>"+regetr28+"%</p>" );
        $( "#RegionPen29" ).html( "<p>"+regetr29+"%</p>" );
        $( "#RegionPen30" ).html( "<p>"+regetr30+"%</p>" );
        $( "#RegionPen31" ).html( "<p>"+regetr31+"%</p>" );
        $( "#RegionPen32" ).html( "<p>"+regetr32+"%</p>" );
        $( "#RegionPen33" ).html( "<p>"+regetr33+"%</p>" );
      });


  //reset variables
  function resetstats() {
    queriednumbers1.length = 0;
    queriednumbers2.length = 0;
    queriednumbers3.length = 0;
    queriednumbers4.length = 0;
    queriednumbers5.length = 0;
    queriednumbers6.length = 0;
    queriednumbers7.length = 0;
    queriednumbers8.length = 0;
    queriednumbers9.length = 0;
    queriednumbers10.length = 0;
    queriednumbers11.length = 0;
    queriednumbers12.length = 0;
    queriednumbers13.length = 0;
    queriednumbers14.length = 0;
    queriednumbers15.length = 0;
    queriednumbers16.length = 0;
    queriednumbers17.length = 0;
    queriednumbers18.length = 0;
    queriednumbers19.length = 0;
    queriednumbers20.length = 0;
    queriednumbers21.length = 0;
    queriednumbers22.length = 0;
    queriednumbers23.length = 0;
    queriednumbers24.length = 0;
    queriednumbers25.length = 0;
    queriednumbers26.length = 0;
    queriednumbers27.length = 0;
    queriednumbers28.length = 0;
    queriednumbers29.length = 0;
    queriednumbers31.length = 0;
    queriednumbers32.length = 0;
    queriednumbers33.length = 0;
    activeids.length = 0;
    map.setLayoutProperty("Toronto-select", 'visibility', 'none');
    $(".diag").html( "<p>"+"-"+"</p>" );
  };

  $("#clear").click(resetstats);

    //restart functions
  $("#restart").click(function(){
    clearall();
    resetstats();
    });
  });

$("input[type=radio][id=btn2]").click(function(){
      var yorkPopulation = 1109909;
      var yorkHouseholds = 357085;
      var yorkDwellings = 449355;
      map.setLayoutProperty("York-gen", 'visibility', 'visible')
      yorkclear();
      map.flyTo({center: york_coord, zoom: 12, pitch: 45, bearing: 25})
      var queriednumbers1 = []
      var queriednumbers2 = []
      var queriednumbers3 = []
      var queriednumbers4 = []
      var queriednumbers5 = []
      var queriednumbers6 = []
      var queriednumbers7 = []
      var queriednumbers8 = []
      var queriednumbers9 = []
      var queriednumbers10 = []
      var queriednumbers11 = []
      var queriednumbers12 = []
      var queriednumbers13 = []
      var queriednumbers14 = []
      var queriednumbers15 = []
      var queriednumbers16 = []
      var queriednumbers17 = []
      var queriednumbers18 = []
      var queriednumbers19 = []
      var queriednumbers20 = []
      var queriednumbers21 = []
      var queriednumbers22 = []
      var queriednumbers23 = []
      var queriednumbers24 = []
      var queriednumbers25 = []
      var queriednumbers26 = []
      var queriednumbers27 = []
      var queriednumbers28 = []
      var queriednumbers29 = []
      var queriednumbers30 = []
      var queriednumbers31 = []
      var queriednumbers32 = []
      var queriednumbers33 = []
      var activeids = []

      map.on ('click', function (e){
      // query the feature that is clicked
        var features = map.queryRenderedFeatures(e.point, { layers: ["York-gen"]});
        if (!features.length){
            return;}
            // capture in a new variable the first feature clicked
            var dashape = features[0];
            var id = dashape.properties.dauid;
            var lowmun = dashape.properties.lower_tier_name;
            var uppmun = dashape.properties.upper_tier_name;
            var queriednumber1 = dashape.properties.population;
            var queriednumber2 = dashape.properties.households;
            var queriednumber3 = dashape.properties.dwellings;
            var queriednumber4 = dashape.properties.low_rise;
            var queriednumber5 = dashape.properties.mid_rise;
            var queriednumber6 = dashape.properties.high_rise;
            var queriednumber7 = dashape.properties.No_bedrooms;
            var queriednumber8 = dashape.properties.One_bedroom;
            var queriednumber9 = dashape.properties.Two_bedroom;
            var queriednumber10 = dashape.properties.Three_bedroom;
            var queriednumber11 = dashape.properties.Four_or_more_bedroom;
            var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
            var queriednumber13 = dashape.properties.More_than_one_person_per_room;
            var queriednumber14 = dashape.properties.One_person_household;
            var queriednumber15 = dashape.properties.Two_person_household;
            var queriednumber16 = dashape.properties.Three_person_household;
            var queriednumber17 = dashape.properties.Four_person_household;
            var queriednumber18 = dashape.properties.Five_person_household;
            var queriednumber19 = dashape.properties.commute_driver;
            var queriednumber20 = dashape.properties.commute_public_transit;
            var queriednumber21 = dashape.properties.commute_active;
            var queriednumber22 = dashape.properties._Less_10000;
            var queriednumber23 = dashape.properties.__10000_19999;
            var queriednumber24 = dashape.properties._20000_29999;
            var queriednumber25 = dashape.properties._30000_39999;
            var queriednumber26 = dashape.properties._40000_49999;
            var queriednumber27 = dashape.properties._50000_59999;
            var queriednumber28 = dashape.properties._60000_69999;
            var queriednumber29 = dashape.properties._70000_79999;
            var queriednumber30 = dashape.properties._80000_89999;
            var queriednumber31 = dashape.properties._90000_99999;
            var queriednumber32 = dashape.properties._100000_150000;
            var queriednumber33 = dashape.properties._150000_Above;
            var region1 = yorkPopulation;
            var region2 = yorkHouseholds;
            var region3 = yorkDwellings;
            var region4 = dashape.properties.low_rise_regional;
            var region5 = dashape.properties.mid_rise_regional;
            var region6 = dashape.properties.high_rise_regional;
            var region7 = dashape.properties.No_bedrooms_regional;
            var region8 = dashape.properties.One_bedroom_regional;
            var region9 = dashape.properties.Two_bedroom_regional;
            var region10 = dashape.properties.Three_bedroom_regional;
            var region11 = dashape.properties.Four_bedroom_regional;
            var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
            var region13 = dashape.properties.More_than_one_person_per_room_regional;
            var region14 = dashape.properties.One_person_household_regional;
            var region15 = dashape.properties.Two_person_household_regional;
            var region16 = dashape.properties.Three_person_household_regional;
            var region17 = dashape.properties.Four_person_household_regional;
            var region18 = dashape.properties.Five_person_household_regional;
            var region19 = dashape.properties.commute_driver_regional;
            var region20 = dashape.properties.commute_public_transit_regional;
            var region21 = dashape.properties.commute_active_total_regional;
            var region22 = dashape.properties._Less_10000_regional;
            var region23 = dashape.properties.__10000_19999_regional;
            var region24 = dashape.properties._20000_29999_regional;
            var region25 = dashape.properties._30000_39999_regional;
            var region26 = dashape.properties._40000_49999_regional;
            var region27 = dashape.properties._50000_59999_regional;
            var region28 = dashape.properties._60000_69999_regional;
            var region29 = dashape.properties._70000_79999_regional;
            var region30 = dashape.properties._80000_89999_regional;
            var region31 = dashape.properties._90000_99999_regional;
            var region32 = dashape.properties._100000_150000_regional;
            var region33 = dashape.properties._150000_Above_regional;


            //dynamically toggle selection on click
              if (activeids.includes(id)===false) {
                queriednumbers1.push(queriednumber1);
                queriednumbers2.push(queriednumber2);
                queriednumbers3.push(queriednumber3);
                queriednumbers4.push(queriednumber4);
                queriednumbers5.push(queriednumber5);
                queriednumbers6.push(queriednumber6);
                queriednumbers7.push(queriednumber7);
                queriednumbers8.push(queriednumber8);
                queriednumbers9.push(queriednumber9);
                queriednumbers10.push(queriednumber10);
                queriednumbers11.push(queriednumber11);
                queriednumbers12.push(queriednumber12);
                queriednumbers13.push(queriednumber13);
                queriednumbers14.push(queriednumber14);
                queriednumbers15.push(queriednumber15);
                queriednumbers16.push(queriednumber16);
                queriednumbers17.push(queriednumber17);
                queriednumbers18.push(queriednumber18);
                queriednumbers19.push(queriednumber19);
                queriednumbers20.push(queriednumber20);
                queriednumbers21.push(queriednumber21);
                queriednumbers22.push(queriednumber22);
                queriednumbers23.push(queriednumber23);
                queriednumbers24.push(queriednumber24);
                queriednumbers25.push(queriednumber25);
                queriednumbers26.push(queriednumber26);
                queriednumbers27.push(queriednumber27);
                queriednumbers28.push(queriednumber28);
                queriednumbers29.push(queriednumber29);
                queriednumbers30.push(queriednumber30);
                queriednumbers31.push(queriednumber31);
                queriednumbers32.push(queriednumber32);
                queriednumbers33.push(queriednumber33);
                activeids.push(id);
                let filter = ['match', ['get', 'dauid'], activeids, true, false]
                map.setFilter("York-select",filter)
                map.setLayoutProperty("York-select", 'visibility', 'visible')
                console.log("You've added a DA. These are the activeids: "+activeids)
              }
              else if (activeids.includes(id)===true) {
                ind = activeids.indexOf(id)
                activeids.splice(ind,1);
                queriednumbers1.splice(ind,1);
                queriednumbers2.splice(ind,1);
                queriednumbers3.splice(ind,1);
                queriednumbers4.splice(ind,1);
                queriednumbers5.splice(ind,1);
                queriednumbers6.splice(ind,1);
                queriednumbers7.splice(ind,1);
                queriednumbers8.splice(ind,1);
                queriednumbers9.splice(ind,1);
                queriednumbers10.splice(ind,1);
                queriednumbers11.splice(ind,1);
                queriednumbers12.splice(ind,1);
                queriednumbers13.splice(ind,1);
                queriednumbers14.splice(ind,1);
                queriednumbers15.splice(ind,1);
                queriednumbers16.splice(ind,1);
                queriednumbers17.splice(ind,1);
                queriednumbers18.splice(ind,1);
                queriednumbers19.splice(ind,1);
                queriednumbers20.splice(ind,1);
                queriednumbers21.splice(ind,1);
                queriednumbers22.splice(ind,1);
                queriednumbers23.splice(ind,1);
                queriednumbers24.splice(ind,1);
                queriednumbers25.splice(ind,1);
                queriednumbers26.splice(ind,1);
                queriednumbers27.splice(ind,1);
                queriednumbers28.splice(ind,1);
                queriednumbers29.splice(ind,1);
                queriednumbers30.splice(ind,1);
                queriednumbers31.splice(ind,1);
                queriednumbers32.splice(ind,1);
                queriednumbers33.splice(ind,1);
                let filter = ['match', ['get', 'dauid'], activeids, true, false]
                map.setFilter("York-select",filter)
                map.setLayoutProperty("York-select", 'visibility', 'visible')
                console.log("You've removed a DA. These are the activeids: "+activeids)
              };

              //dynamically aggregate the values
              const add = (a, b) =>
                a + b
                var themetotal1 = queriednumbers1.reduce(add);
                var themetotal2 = queriednumbers2.reduce(add);
                var themetotal3 = queriednumbers3.reduce(add);
                var themetotal4 = queriednumbers4.reduce(add);
                var themetotal5 = queriednumbers5.reduce(add);
                var themetotal6 = queriednumbers6.reduce(add);
                var themetotal7 = queriednumbers7.reduce(add);
                var themetotal8 = queriednumbers8.reduce(add);
                var themetotal9 = queriednumbers9.reduce(add);
                var themetotal10 = queriednumbers10.reduce(add);
                var themetotal11 = queriednumbers11.reduce(add);
                var themetotal12 = queriednumbers12.reduce(add);
                var themetotal13 = queriednumbers13.reduce(add);
                var themetotal14 = queriednumbers14.reduce(add);
                var themetotal15 = queriednumbers15.reduce(add);
                var themetotal16 = queriednumbers16.reduce(add);
                var themetotal17 = queriednumbers17.reduce(add);
                var themetotal18 = queriednumbers18.reduce(add);
                var themetotal19 = queriednumbers19.reduce(add);
                var themetotal20 = queriednumbers20.reduce(add);
                var themetotal21 = queriednumbers21.reduce(add);
                var themetotal22 = queriednumbers22.reduce(add);
                var themetotal23 = queriednumbers23.reduce(add);
                var themetotal24 = queriednumbers24.reduce(add);
                var themetotal25 = queriednumbers25.reduce(add);
                var themetotal26 = queriednumbers26.reduce(add);
                var themetotal27 = queriednumbers27.reduce(add);
                var themetotal28 = queriednumbers28.reduce(add);
                var themetotal29 = queriednumbers29.reduce(add);
                var themetotal30 = queriednumbers30.reduce(add);
                var themetotal31 = queriednumbers31.reduce(add);
                var themetotal32 = queriednumbers32.reduce(add);
                var themetotal33 = queriednumbers33.reduce(add);

              //dynamically calculate the group percentage
              var penetr1 = ((region1/yorkPopulation)*100).toFixed(2);//population
              var penetr2 = ((region2/yorkHouseholds)*100).toFixed(2);//households
              var penetr3 = ((region3/yorkDwellings)*100).toFixed(2);//dwellings
              var penetr4 = ((region4/yorkDwellings)*100).toFixed(2);//households
              var penetr5 = ((region5/yorkDwellings)*100).toFixed(2);//households
              var penetr6 = ((region6/yorkDwellings)*100).toFixed(2);//households
              var penetr7 = ((region7/yorkHouseholds)*100).toFixed(2);//households
              var penetr8 = ((region8/yorkHouseholds)*100).toFixed(2);//households
              var penetr9 = ((region9/yorkHouseholds)*100).toFixed(2);//households
              var penetr10 = ((region10/yorkHouseholds)*100).toFixed(2);//households
              var penetr11 = ((region11/yorkHouseholds)*100).toFixed(2);//households
              var penetr12 = ((region12/yorkHouseholds)*100).toFixed(2);//households
              var penetr13 = ((region13/yorkHouseholds)*100).toFixed(2);//households
              var penetr14 = ((region14/yorkHouseholds)*100).toFixed(2);//households
              var penetr15 = ((region15/yorkHouseholds)*100).toFixed(2);//households
              var penetr16 = ((region16/yorkHouseholds)*100).toFixed(2);//households
              var penetr17 = ((region17/yorkHouseholds)*100).toFixed(2);//households
              var penetr18 = ((region18/yorkHouseholds)*100).toFixed(2);//households
              var penetr19 = ((region19/yorkPopulation)*100).toFixed(2);//population
              var penetr20 = ((region20/yorkPopulation)*100).toFixed(2);//population
              var penetr21 = ((region21/yorkPopulation)*100).toFixed(2);//population
              var penetr22 = ((region22/yorkPopulation)*100).toFixed(2);//households
              var penetr23 = ((region23/yorkPopulation)*100).toFixed(2);//households
              var penetr24 = ((region24/yorkPopulation)*100).toFixed(2);//households
              var penetr25 = ((region25/yorkPopulation)*100).toFixed(2);//households
              var penetr26 = ((region26/yorkPopulation)*100).toFixed(2);//households
              var penetr27 = ((region27/yorkPopulation)*100).toFixed(2);//households
              var penetr28 = ((region28/yorkPopulation)*100).toFixed(2);//households
              var penetr29 = ((region29/yorkPopulation)*100).toFixed(2);//households
              var penetr30= ((region30/yorkPopulation)*100).toFixed(2);//households
              var penetr31 = ((region31/yorkPopulation)*100).toFixed(2);//households
              var penetr32 = ((region32/yorkPopulation)*100).toFixed(2);//households
              var penetr33 = ((region33/yorkPopulation)*100).toFixed(2);//population

              var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
              var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
              var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
              var regetr4 = ((themetotal4/(themetotal3))*100).toFixed(2);
              var regetr5 = ((themetotal5/(themetotal3))*100).toFixed(2);
              var regetr6 = ((themetotal6/(themetotal3))*100).toFixed(2);
              var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
              var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
              var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
              var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
              var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
              var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
              var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
              var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
              var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
              var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
              var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
              var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
              var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
              var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
              var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);
              var regetr22 = ((themetotal22/themetotal1)*100).toFixed(2);
              var regetr23 = ((themetotal23/themetotal1)*100).toFixed(2);
              var regetr24 = ((themetotal24/themetotal1)*100).toFixed(2);
              var regetr25 = ((themetotal25/themetotal1)*100).toFixed(2);
              var regetr26 = ((themetotal26/themetotal1)*100).toFixed(2);
              var regetr27 = ((themetotal27/themetotal1)*100).toFixed(2);
              var regetr28 = ((themetotal28/themetotal1)*100).toFixed(2);
              var regetr29 = ((themetotal29/themetotal1)*100).toFixed(2);
              var regetr30 = ((themetotal30/themetotal1)*100).toFixed(2);
              var regetr31 = ((themetotal31/themetotal1)*100).toFixed(2);
              var regetr32 = ((themetotal32/themetotal1)*100).toFixed(2);
              var regetr33 = ((themetotal33/themetotal1)*100).toFixed(2);

              //add to html content
              $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
              $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
              $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
              $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
              $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
              $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
              $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
              $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
              $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
              $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
              $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
              $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
              $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
              $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
              $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
              $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
              $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
              $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
              $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
              $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
              $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
              $( "#Total22" ).html( "<p>"+themetotal22+"</p>" );
              $( "#Total23" ).html( "<p>"+themetotal23+"</p>" );
              $( "#Total24" ).html( "<p>"+themetotal24+"</p>" );
              $( "#Total25" ).html( "<p>"+themetotal25+"</p>" );
              $( "#Total26" ).html( "<p>"+themetotal26+"</p>" );
              $( "#Total27" ).html( "<p>"+themetotal27+"</p>" );
              $( "#Total28" ).html( "<p>"+themetotal28+"</p>" );
              $( "#Total29" ).html( "<p>"+themetotal29+"</p>" );
              $( "#Total30" ).html( "<p>"+themetotal30+"</p>" );
              $( "#Total31" ).html( "<p>"+themetotal31+"</p>" );
              $( "#Total32" ).html( "<p>"+themetotal32+"</p>" );
              $( "#Total33" ).html( "<p>"+themetotal33+"</p>" );

              $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
              $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
              $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
              $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
              $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
              $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
              $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
              $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
              $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
              $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
              $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
              $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
              $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
              $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
              $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
              $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
              $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
              $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
              $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
              $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
              $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
              $( "#GroupPen22" ).html( "<p>"+penetr22+"%</p>" );
              $( "#GroupPen23" ).html( "<p>"+penetr23+"%</p>" );
              $( "#GroupPen24" ).html( "<p>"+penetr24+"%</p>" );
              $( "#GroupPen25" ).html( "<p>"+penetr25+"%</p>" );
              $( "#GroupPen26" ).html( "<p>"+penetr26+"%</p>" );
              $( "#GroupPen27" ).html( "<p>"+penetr27+"%</p>" );
              $( "#GroupPen28" ).html( "<p>"+penetr28+"%</p>" );
              $( "#GroupPen29" ).html( "<p>"+penetr29+"%</p>" );
              $( "#GroupPen30" ).html( "<p>"+penetr30+"%</p>" );
              $( "#GroupPen31" ).html( "<p>"+penetr31+"%</p>" );
              $( "#GroupPen32" ).html( "<p>"+penetr32+"%</p>" );
              $( "#GroupPen33" ).html( "<p>"+penetr33+"%</p>" );

              $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
              $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
              $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
              $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
              $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
              $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
              $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
              $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
              $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
              $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
              $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
              $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
              $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
              $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
              $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
              $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
              $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
              $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
              $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
              $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
              $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
              $( "#RegionPen22" ).html( "<p>"+regetr22+"%</p>" );
              $( "#RegionPen23" ).html( "<p>"+regetr23+"%</p>" );
              $( "#RegionPen24" ).html( "<p>"+regetr24+"%</p>" );
              $( "#RegionPen25" ).html( "<p>"+regetr25+"%</p>" );
              $( "#RegionPen26" ).html( "<p>"+regetr26+"%</p>" );
              $( "#RegionPen27" ).html( "<p>"+regetr27+"%</p>" );
              $( "#RegionPen28" ).html( "<p>"+regetr28+"%</p>" );
              $( "#RegionPen29" ).html( "<p>"+regetr29+"%</p>" );
              $( "#RegionPen30" ).html( "<p>"+regetr30+"%</p>" );
              $( "#RegionPen31" ).html( "<p>"+regetr31+"%</p>" );
              $( "#RegionPen32" ).html( "<p>"+regetr32+"%</p>" );
              $( "#RegionPen33" ).html( "<p>"+regetr33+"%</p>" );
            });

          map.on('mousemove', function (e) {
              var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['York-gen']});
              if (hovFeatures.length) {
                map.setFilter(['York-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
              }
              else {
                map.setFilter(['York-hover'], ["==", "dauid", ""]);
              };
          });

          //reset variables
          function resetstats() {
            queriednumbers1.length = 0;
            queriednumbers2.length = 0;
            queriednumbers3.length = 0;
            queriednumbers4.length = 0;
            queriednumbers5.length = 0;
            queriednumbers6.length = 0;
            queriednumbers7.length = 0;
            queriednumbers8.length = 0;
            queriednumbers9.length = 0;
            queriednumbers10.length = 0;
            queriednumbers11.length = 0;
            queriednumbers12.length = 0;
            queriednumbers13.length = 0;
            queriednumbers14.length = 0;
            queriednumbers15.length = 0;
            queriednumbers16.length = 0;
            queriednumbers17.length = 0;
            queriednumbers18.length = 0;
            queriednumbers19.length = 0;
            queriednumbers20.length = 0;
            queriednumbers21.length = 0;
            queriednumbers22.length = 0;
            queriednumbers23.length = 0;
            queriednumbers24.length = 0;
            queriednumbers25.length = 0;
            queriednumbers26.length = 0;
            queriednumbers27.length = 0;
            queriednumbers28.length = 0;
            queriednumbers29.length = 0;
            queriednumbers31.length = 0;
            queriednumbers32.length = 0;
            queriednumbers33.length = 0;
            activeids.length = 0;
          map.setLayoutProperty("York-select", 'visibility', 'none');
          $(".diag").html( "<p>"+"-"+"</p>" );
        };

      $("#clear").click(resetstats);

        //restart functions
      $("#restart").click(function(){
        clearall();
        resetstats();
        });
    });

$("input[type=radio][id=btn3]").click(function(){
     var peelPopulation = 1381739;
     var peelHouseholds = 430180;
     var peelDwellings = 585265;
     map.setLayoutProperty("Peel-gen", 'visibility', 'visible')
     peelclear();
     map.flyTo({center: peel_coord, zoom: 12, bearing: 0, pitch: 45 })
     var queriednumbers1 = []
     var queriednumbers2 = []
     var queriednumbers3 = []
     var queriednumbers4 = []
     var queriednumbers5 = []
     var queriednumbers6 = []
     var queriednumbers7 = []
     var queriednumbers8 = []
     var queriednumbers9 = []
     var queriednumbers10 = []
     var queriednumbers11 = []
     var queriednumbers12 = []
     var queriednumbers13 = []
     var queriednumbers14 = []
     var queriednumbers15 = []
     var queriednumbers16 = []
     var queriednumbers17 = []
     var queriednumbers18 = []
     var queriednumbers19 = []
     var queriednumbers20 = []
     var queriednumbers21 = []
     var queriednumbers22 = []
     var queriednumbers23 = []
     var queriednumbers24 = []
     var queriednumbers25 = []
     var queriednumbers26 = []
     var queriednumbers27 = []
     var queriednumbers28 = []
     var queriednumbers29 = []
     var queriednumbers30 = []
     var queriednumbers31 = []
     var queriednumbers32 = []
     var queriednumbers33 = []
     var activeids = []

     map.on ('click', function (e){
     // query the feature that is clicked
     var features = map.queryRenderedFeatures(e.point, { layers: ["Peel-gen"]});
     if (!features.length){
         return;}
         // capture in a new variable the first feature clicked
         var dashape = features[0];
         var id = dashape.properties.dauid;
         var lowmun = dashape.properties.lower_tier_name;
         var uppmun = dashape.properties.upper_tier_name;
         var queriednumber1 = dashape.properties.population;
         var queriednumber2 = dashape.properties.households;
         var queriednumber3 = dashape.properties.dwellings;
         var queriednumber4 = dashape.properties.low_rise;
         var queriednumber5 = dashape.properties.mid_rise;
         var queriednumber6 = dashape.properties.high_rise;
         var queriednumber7 = dashape.properties.No_bedrooms;
         var queriednumber8 = dashape.properties.One_bedroom;
         var queriednumber9 = dashape.properties.Two_bedroom;
         var queriednumber10 = dashape.properties.Three_bedroom;
         var queriednumber11 = dashape.properties.Four_or_more_bedroom;
         var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
         var queriednumber13 = dashape.properties.More_than_one_person_per_room;
         var queriednumber14 = dashape.properties.One_person_household;
         var queriednumber15 = dashape.properties.Two_person_household;
         var queriednumber16 = dashape.properties.Three_person_household;
         var queriednumber17 = dashape.properties.Four_person_household;
         var queriednumber18 = dashape.properties.Five_person_household;
         var queriednumber19 = dashape.properties.commute_driver;
         var queriednumber20 = dashape.properties.commute_public_transit;
         var queriednumber21 = dashape.properties.commute_active;
         var queriednumber22 = dashape.properties._Less_10000;
         var queriednumber23 = dashape.properties.__10000_19999;
         var queriednumber24 = dashape.properties._20000_29999;
         var queriednumber25 = dashape.properties._30000_39999;
         var queriednumber26 = dashape.properties._40000_49999;
         var queriednumber27 = dashape.properties._50000_59999;
         var queriednumber28 = dashape.properties._60000_69999;
         var queriednumber29 = dashape.properties._70000_79999;
         var queriednumber30 = dashape.properties._80000_89999;
         var queriednumber31 = dashape.properties._90000_99999;
         var queriednumber32 = dashape.properties._100000_150000;
         var queriednumber33 = dashape.properties._150000_Above;
         var region1 = peelPopulation;
         var region2 = peelHouseholds;
         var region3 = peelDwellings;
         var region4 = dashape.properties.low_rise_regional;
         var region5 = dashape.properties.mid_rise_regional;
         var region6 = dashape.properties.high_rise_regional;
         var region7 = dashape.properties.No_bedrooms_regional;
         var region8 = dashape.properties.One_bedroom_regional;
         var region9 = dashape.properties.Two_bedroom_regional;
         var region10 = dashape.properties.Three_bedroom_regional;
         var region11 = dashape.properties.Four_bedroom_regional;
         var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
         var region13 = dashape.properties.More_than_one_person_per_room_regional;
         var region14 = dashape.properties.One_person_household_regional;
         var region15 = dashape.properties.Two_person_household_regional;
         var region16 = dashape.properties.Three_person_household_regional;
         var region17 = dashape.properties.Four_person_household_regional;
         var region18 = dashape.properties.Five_person_household_regional;
         var region19 = dashape.properties.commute_driver_regional;
         var region20 = dashape.properties.commute_public_transit_regional;
         var region21 = dashape.properties.commute_active_total_regional;
         var region22 = dashape.properties._Less_10000_regional;
         var region23 = dashape.properties.__10000_19999_regional;
         var region24 = dashape.properties._20000_29999_regional;
         var region25 = dashape.properties._30000_39999_regional;
         var region26 = dashape.properties._40000_49999_regional;
         var region27 = dashape.properties._50000_59999_regional;
         var region28 = dashape.properties._60000_69999_regional;
         var region29 = dashape.properties._70000_79999_regional;
         var region30 = dashape.properties._80000_89999_regional;
         var region31 = dashape.properties._90000_99999_regional;
         var region32 = dashape.properties._100000_150000_regional;
         var region33 = dashape.properties._150000_Above_regional;

         //dynamically toggle selection on click
           if (activeids.includes(id)===false) {
             queriednumbers1.push(queriednumber1);
             queriednumbers2.push(queriednumber2);
             queriednumbers3.push(queriednumber3);
             queriednumbers4.push(queriednumber4);
             queriednumbers5.push(queriednumber5);
             queriednumbers6.push(queriednumber6);
             queriednumbers7.push(queriednumber7);
             queriednumbers8.push(queriednumber8);
             queriednumbers9.push(queriednumber9);
             queriednumbers10.push(queriednumber10);
             queriednumbers11.push(queriednumber11);
             queriednumbers12.push(queriednumber12);
             queriednumbers13.push(queriednumber13);
             queriednumbers14.push(queriednumber14);
             queriednumbers15.push(queriednumber15);
             queriednumbers16.push(queriednumber16);
             queriednumbers17.push(queriednumber17);
             queriednumbers18.push(queriednumber18);
             queriednumbers19.push(queriednumber19);
             queriednumbers20.push(queriednumber20);
             queriednumbers21.push(queriednumber21);
             queriednumbers22.push(queriednumber22);
             queriednumbers23.push(queriednumber23);
             queriednumbers24.push(queriednumber24);
             queriednumbers25.push(queriednumber25);
             queriednumbers26.push(queriednumber26);
             queriednumbers27.push(queriednumber27);
             queriednumbers28.push(queriednumber28);
             queriednumbers29.push(queriednumber29);
             queriednumbers30.push(queriednumber30);
             queriednumbers31.push(queriednumber31);
             queriednumbers32.push(queriednumber32);
             queriednumbers33.push(queriednumber33);
             activeids.push(id);
             let filter = ['match', ['get', 'dauid'], activeids, true, false]
             map.setFilter("Peel-select",filter)
             map.setLayoutProperty("Peel-select", 'visibility', 'visible')
             console.log("You've added a DA. These are the activeids: "+activeids)
           }
           else if (activeids.includes(id)===true) {
             ind = activeids.indexOf(id)
             activeids.splice(ind,1);
             queriednumbers1.splice(ind,1);
             queriednumbers2.splice(ind,1);
             queriednumbers3.splice(ind,1);
             queriednumbers4.splice(ind,1);
             queriednumbers5.splice(ind,1);
             queriednumbers6.splice(ind,1);
             queriednumbers7.splice(ind,1);
             queriednumbers8.splice(ind,1);
             queriednumbers9.splice(ind,1);
             queriednumbers10.splice(ind,1);
             queriednumbers11.splice(ind,1);
             queriednumbers12.splice(ind,1);
             queriednumbers13.splice(ind,1);
             queriednumbers14.splice(ind,1);
             queriednumbers15.splice(ind,1);
             queriednumbers16.splice(ind,1);
             queriednumbers17.splice(ind,1);
             queriednumbers18.splice(ind,1);
             queriednumbers19.splice(ind,1);
             queriednumbers20.splice(ind,1);
             queriednumbers21.splice(ind,1);
             queriednumbers22.splice(ind,1);
             queriednumbers23.splice(ind,1);
             queriednumbers24.splice(ind,1);
             queriednumbers25.splice(ind,1);
             queriednumbers26.splice(ind,1);
             queriednumbers27.splice(ind,1);
             queriednumbers28.splice(ind,1);
             queriednumbers29.splice(ind,1);
             queriednumbers30.splice(ind,1);
             queriednumbers31.splice(ind,1);
             queriednumbers32.splice(ind,1);
             queriednumbers33.splice(ind,1);
             let filter = ['match', ['get', 'dauid'], activeids, true, false]
             map.setFilter("Peel-select",filter)
             map.setLayoutProperty("Peel-select", 'visibility', 'visible')
             console.log("You've removed a DA. These are the activeids: "+activeids)
           }

           //dynamically aggregate the values
           const add = (a, b) =>
             a + b
             var themetotal1 = queriednumbers1.reduce(add);
             var themetotal2 = queriednumbers2.reduce(add);
             var themetotal3 = queriednumbers3.reduce(add);
             var themetotal4 = queriednumbers4.reduce(add);
             var themetotal5 = queriednumbers5.reduce(add);
             var themetotal6 = queriednumbers6.reduce(add);
             var themetotal7 = queriednumbers7.reduce(add);
             var themetotal8 = queriednumbers8.reduce(add);
             var themetotal9 = queriednumbers9.reduce(add);
             var themetotal10 = queriednumbers10.reduce(add);
             var themetotal11 = queriednumbers11.reduce(add);
             var themetotal12 = queriednumbers12.reduce(add);
             var themetotal13 = queriednumbers13.reduce(add);
             var themetotal14 = queriednumbers14.reduce(add);
             var themetotal15 = queriednumbers15.reduce(add);
             var themetotal16 = queriednumbers16.reduce(add);
             var themetotal17 = queriednumbers17.reduce(add);
             var themetotal18 = queriednumbers18.reduce(add);
             var themetotal19 = queriednumbers19.reduce(add);
             var themetotal20 = queriednumbers20.reduce(add);
             var themetotal21 = queriednumbers21.reduce(add);
             var themetotal22 = queriednumbers22.reduce(add);
             var themetotal23 = queriednumbers23.reduce(add);
             var themetotal24 = queriednumbers24.reduce(add);
             var themetotal25 = queriednumbers25.reduce(add);
             var themetotal26 = queriednumbers26.reduce(add);
             var themetotal27 = queriednumbers27.reduce(add);
             var themetotal28 = queriednumbers28.reduce(add);
             var themetotal29 = queriednumbers29.reduce(add);
             var themetotal30 = queriednumbers30.reduce(add);
             var themetotal31 = queriednumbers31.reduce(add);
             var themetotal32 = queriednumbers32.reduce(add);
             var themetotal33 = queriednumbers33.reduce(add);

           //dynamically calculate the group percentage
           var penetr1 = ((region1/peelPopulation)*100).toFixed(2);//population
           var penetr2 = ((region2/peelHouseholds)*100).toFixed(2);//households
           var penetr3 = ((region3/peelDwellings)*100).toFixed(2);//dwellings
           var penetr4 = ((region4/peelDwellings)*100).toFixed(2);//households
           var penetr5 = ((region5/peelDwellings)*100).toFixed(2);//households
           var penetr6 = ((region6/peelDwellings)*100).toFixed(2);//households
           var penetr7 = ((region7/peelHouseholds)*100).toFixed(2);//households
           var penetr8 = ((region8/peelHouseholds)*100).toFixed(2);//households
           var penetr9 = ((region9/peelHouseholds)*100).toFixed(2);//households
           var penetr10 = ((region10/peelHouseholds)*100).toFixed(2);//households
           var penetr11 = ((region11/peelHouseholds)*100).toFixed(2);//households
           var penetr12 = ((region12/peelHouseholds)*100).toFixed(2);//households
           var penetr13 = ((region13/peelHouseholds)*100).toFixed(2);//households
           var penetr14 = ((region14/peelHouseholds)*100).toFixed(2);//households
           var penetr15 = ((region15/peelHouseholds)*100).toFixed(2);//households
           var penetr16 = ((region16/peelHouseholds)*100).toFixed(2);//households
           var penetr17 = ((region17/peelHouseholds)*100).toFixed(2);//households
           var penetr18 = ((region18/peelHouseholds)*100).toFixed(2);//households
           var penetr19 = ((region19/peelPopulation)*100).toFixed(2);//population
           var penetr20 = ((region20/peelPopulation)*100).toFixed(2);//population
           var penetr21 = ((region21/peelPopulation)*100).toFixed(2);//population
           var penetr22 = ((region22/peelPopulation)*100).toFixed(2);//households
           var penetr23 = ((region23/peelPopulation)*100).toFixed(2);//households
           var penetr24 = ((region24/peelPopulation)*100).toFixed(2);//households
           var penetr25 = ((region25/peelPopulation)*100).toFixed(2);//households
           var penetr26 = ((region26/peelPopulation)*100).toFixed(2);//households
           var penetr27 = ((region27/peelPopulation)*100).toFixed(2);//households
           var penetr28 = ((region28/peelPopulation)*100).toFixed(2);//households
           var penetr29 = ((region29/peelPopulation)*100).toFixed(2);//households
           var penetr30 = ((region30/peelPopulation)*100).toFixed(2);//households
           var penetr31 = ((region31/peelPopulation)*100).toFixed(2);//households
           var penetr32 = ((region32/peelPopulation)*100).toFixed(2);//households
           var penetr33 = ((region33/peelPopulation)*100).toFixed(2);//population

           var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
           var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
           var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
           var regetr4 = ((themetotal4/(themetotal3))*100).toFixed(2);
           var regetr5 = ((themetotal5/(themetotal3))*100).toFixed(2);
           var regetr6 = ((themetotal6/(themetotal3))*100).toFixed(2);
           var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
           var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
           var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
           var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
           var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
           var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
           var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
           var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
           var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
           var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
           var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
           var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
           var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
           var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
           var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);
           var regetr22 = ((themetotal22/themetotal1)*100).toFixed(2);
           var regetr23 = ((themetotal23/themetotal1)*100).toFixed(2);
           var regetr24 = ((themetotal24/themetotal1)*100).toFixed(2);
           var regetr25 = ((themetotal25/themetotal1)*100).toFixed(2);
           var regetr26 = ((themetotal26/themetotal1)*100).toFixed(2);
           var regetr27 = ((themetotal27/themetotal1)*100).toFixed(2);
           var regetr28 = ((themetotal28/themetotal1)*100).toFixed(2);
           var regetr29 = ((themetotal29/themetotal1)*100).toFixed(2);
           var regetr30 = ((themetotal30/themetotal1)*100).toFixed(2);
           var regetr31 = ((themetotal31/themetotal1)*100).toFixed(2);
           var regetr32 = ((themetotal32/themetotal1)*100).toFixed(2);
           var regetr33 = ((themetotal33/themetotal1)*100).toFixed(2);

           //add to html content
           $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
           $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
           $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
           $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
           $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
           $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
           $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
           $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
           $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
           $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
           $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
           $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
           $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
           $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
           $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
           $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
           $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
           $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
           $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
           $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
           $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
           $( "#Total22" ).html( "<p>"+themetotal22+"</p>" );
           $( "#Total23" ).html( "<p>"+themetotal23+"</p>" );
           $( "#Total24" ).html( "<p>"+themetotal24+"</p>" );
           $( "#Total25" ).html( "<p>"+themetotal25+"</p>" );
           $( "#Total26" ).html( "<p>"+themetotal26+"</p>" );
           $( "#Total27" ).html( "<p>"+themetotal27+"</p>" );
           $( "#Total28" ).html( "<p>"+themetotal28+"</p>" );
           $( "#Total29" ).html( "<p>"+themetotal29+"</p>" );
           $( "#Total30" ).html( "<p>"+themetotal30+"</p>" );
           $( "#Total31" ).html( "<p>"+themetotal31+"</p>" );
           $( "#Total32" ).html( "<p>"+themetotal32+"</p>" );
           $( "#Total33" ).html( "<p>"+themetotal33+"</p>" );

           $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
           $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
           $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
           $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
           $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
           $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
           $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
           $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
           $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
           $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
           $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
           $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
           $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
           $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
           $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
           $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
           $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
           $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
           $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
           $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
           $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
           $( "#GroupPen22" ).html( "<p>"+penetr22+"%</p>" );
           $( "#GroupPen23" ).html( "<p>"+penetr23+"%</p>" );
           $( "#GroupPen24" ).html( "<p>"+penetr24+"%</p>" );
           $( "#GroupPen25" ).html( "<p>"+penetr25+"%</p>" );
           $( "#GroupPen26" ).html( "<p>"+penetr26+"%</p>" );
           $( "#GroupPen27" ).html( "<p>"+penetr27+"%</p>" );
           $( "#GroupPen28" ).html( "<p>"+penetr28+"%</p>" );
           $( "#GroupPen29" ).html( "<p>"+penetr29+"%</p>" );
           $( "#GroupPen30" ).html( "<p>"+penetr30+"%</p>" );
           $( "#GroupPen31" ).html( "<p>"+penetr31+"%</p>" );
           $( "#GroupPen32" ).html( "<p>"+penetr32+"%</p>" );
           $( "#GroupPen33" ).html( "<p>"+penetr33+"%</p>" );

           $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
           $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
           $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
           $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
           $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
           $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
           $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
           $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
           $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
           $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
           $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
           $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
           $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
           $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
           $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
           $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
           $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
           $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
           $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
           $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
           $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
           $( "#RegionPen22" ).html( "<p>"+regetr22+"%</p>" );
           $( "#RegionPen23" ).html( "<p>"+regetr23+"%</p>" );
           $( "#RegionPen24" ).html( "<p>"+regetr24+"%</p>" );
           $( "#RegionPen25" ).html( "<p>"+regetr25+"%</p>" );
           $( "#RegionPen26" ).html( "<p>"+regetr26+"%</p>" );
           $( "#RegionPen27" ).html( "<p>"+regetr27+"%</p>" );
           $( "#RegionPen28" ).html( "<p>"+regetr28+"%</p>" );
           $( "#RegionPen29" ).html( "<p>"+regetr29+"%</p>" );
           $( "#RegionPen30" ).html( "<p>"+regetr30+"%</p>" );
           $( "#RegionPen31" ).html( "<p>"+regetr31+"%</p>" );
           $( "#RegionPen32" ).html( "<p>"+regetr32+"%</p>" );
           $( "#RegionPen33" ).html( "<p>"+regetr33+"%</p>" );
         });

       map.on('mousemove', function (e) {
           var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Peel-gen']});
           if (hovFeatures.length) {
             map.setFilter(['Peel-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
           }
           else {
             map.setFilter(['Peel-hover'], ["==", "dauid", ""]);
           };
       });


       //reset variables
       function resetstats() {
       queriednumbers1.length = 0;
       queriednumbers2.length = 0;
       queriednumbers3.length = 0;
       queriednumbers4.length = 0;
       queriednumbers5.length = 0;
       queriednumbers6.length = 0;
       queriednumbers7.length = 0;
       queriednumbers8.length = 0;
       queriednumbers9.length = 0;
       queriednumbers10.length = 0;
       queriednumbers11.length = 0;
       queriednumbers12.length = 0;
       queriednumbers13.length = 0;
       queriednumbers14.length = 0;
       queriednumbers15.length = 0;
       queriednumbers16.length = 0;
       queriednumbers17.length = 0;
       queriednumbers18.length = 0;
       queriednumbers19.length = 0;
       queriednumbers20.length = 0;
       queriednumbers21.length = 0;
       queriednumbers22.length = 0;
       queriednumbers23.length = 0;
       queriednumbers24.length = 0;
       queriednumbers25.length = 0;
       queriednumbers26.length = 0;
       queriednumbers27.length = 0;
       queriednumbers28.length = 0;
       queriednumbers30.length = 0;
       queriednumbers31.length = 0;
       queriednumbers32.length = 0;
       queriednumbers33.length = 0;
       activeids.length = 0;
       map.setLayoutProperty("Peel-select", 'visibility', 'none');
       $(".diag").html( "<p>"+"-"+"</p>" );
       };

       $("#clear").click(function(){
         resetstats();
       });

         //restart functions
       $("#restart").click(function(){
         clearall();
         resetstats();
       });
    });

$("input[type=radio][id=btn4]").click(function(){
      var durhamPopulation = 645862;
      var durhamHouseholds = 227905;
      var durhamDwellings = 287925;
      map.setLayoutProperty("Durham-gen", 'visibility', 'visible')
      durhamclear();
      map.flyTo({center: durham_coord, zoom: 12, bearing: 0, pitch: 45})
      var queriednumbers1 = []
      var queriednumbers2 = []
      var queriednumbers3 = []
      var queriednumbers4 = []
      var queriednumbers5 = []
      var queriednumbers6 = []
      var queriednumbers7 = []
      var queriednumbers8 = []
      var queriednumbers9 = []
      var queriednumbers10 = []
      var queriednumbers11 = []
      var queriednumbers12 = []
      var queriednumbers13 = []
      var queriednumbers14 = []
      var queriednumbers15 = []
      var queriednumbers16 = []
      var queriednumbers17 = []
      var queriednumbers18 = []
      var queriednumbers19 = []
      var queriednumbers20 = []
      var queriednumbers21 = []
      var queriednumbers22 = []
      var queriednumbers23 = []
      var queriednumbers24 = []
      var queriednumbers25 = []
      var queriednumbers26 = []
      var queriednumbers27 = []
      var queriednumbers28 = []
      var queriednumbers29 = []
      var queriednumbers30 = []
      var queriednumbers31 = []
      var queriednumbers32 = []
      var queriednumbers33 = []
      var activeids = []

      map.on ('click', function (e){
      // query the feature that is clicked
      var features = map.queryRenderedFeatures(e.point, { layers: ["Durham-gen"]});
      if (!features.length){
          return;}
          // capture in a new variable the first feature clicked
          var dashape = features[0];
          var id = dashape.properties.dauid;
          var lowmun = dashape.properties.lower_tier_name;
          var uppmun = dashape.properties.upper_tier_name;
          var queriednumber1 = dashape.properties.population;
          var queriednumber2 = dashape.properties.households;
          var queriednumber3 = dashape.properties.dwellings;
          var queriednumber4 = dashape.properties.low_rise;
          var queriednumber5 = dashape.properties.mid_rise;
          var queriednumber6 = dashape.properties.high_rise;
          var queriednumber7 = dashape.properties.No_bedrooms;
          var queriednumber8 = dashape.properties.One_bedroom;
          var queriednumber9 = dashape.properties.Two_bedroom;
          var queriednumber10 = dashape.properties.Three_bedroom;
          var queriednumber11 = dashape.properties.Four_or_more_bedroom;
          var queriednumber12 = dashape.properties.One_or_fewer_people_per_room;
          var queriednumber13 = dashape.properties.More_than_one_person_per_room;
          var queriednumber14 = dashape.properties.One_person_household;
          var queriednumber15 = dashape.properties.Two_person_household;
          var queriednumber16 = dashape.properties.Three_person_household;
          var queriednumber17 = dashape.properties.Four_person_household;
          var queriednumber18 = dashape.properties.Five_person_household;
          var queriednumber19 = dashape.properties.commute_driver;
          var queriednumber20 = dashape.properties.commute_public_transit;
          var queriednumber21 = dashape.properties.commute_active;
          var queriednumber22 = dashape.properties._Less_10000;
          var queriednumber23 = dashape.properties.__10000_19999;
          var queriednumber24 = dashape.properties._20000_29999;
          var queriednumber25 = dashape.properties._30000_39999;
          var queriednumber26 = dashape.properties._40000_49999;
          var queriednumber27 = dashape.properties._50000_59999;
          var queriednumber28 = dashape.properties._60000_69999;
          var queriednumber29 = dashape.properties._70000_79999;
          var queriednumber30 = dashape.properties._80000_89999;
          var queriednumber31 = dashape.properties._90000_99999;
          var queriednumber32 = dashape.properties._100000_150000;
          var queriednumber33 = dashape.properties._150000_Above;
          var region1 = durhamPopulation;
          var region2 = durhamHouseholds;
          var region3 = durhamDwellings;
          var region4 = dashape.properties.low_rise_regional;
          var region5 = dashape.properties.mid_rise_regional;
          var region6 = dashape.properties.high_rise_regional;
          var region7 = dashape.properties.No_bedrooms_regional;
          var region8 = dashape.properties.One_bedroom_regional;
          var region9 = dashape.properties.Two_bedroom_regional;
          var region10 = dashape.properties.Three_bedroom_regional;
          var region11 = dashape.properties.Four_bedroom_regional;
          var region12 = dashape.properties.One_or_fewer_people_per_room_regional;
          var region13 = dashape.properties.More_than_one_person_per_room_regional;
          var region14 = dashape.properties.One_person_household_regional;
          var region15 = dashape.properties.Two_person_household_regional;
          var region16 = dashape.properties.Three_person_household_regional;
          var region17 = dashape.properties.Four_person_household_regional;
          var region18 = dashape.properties.Five_person_household_regional;
          var region19 = dashape.properties.commute_driver_regional;
          var region20 = dashape.properties.commute_public_transit_regional;
          var region21 = dashape.properties.commute_active_total_regional;
          var region22 = dashape.properties._Less_10000_regional;
          var region23 = dashape.properties.__10000_19999_regional;
          var region24 = dashape.properties._20000_29999_regional;
          var region25 = dashape.properties._30000_39999_regional;
          var region26 = dashape.properties._40000_49999_regional;
          var region27 = dashape.properties._50000_59999_regional;
          var region28 = dashape.properties._60000_69999_regional;
          var region29 = dashape.properties._70000_79999_regional;
          var region30 = dashape.properties._80000_89999_regional;
          var region31 = dashape.properties._90000_99999_regional;
          var region32 = dashape.properties._100000_150000_regional;
          var region33 = dashape.properties._150000_Above_regional;
          //dynamically toggle selection on click
            if (activeids.includes(id)===false) {
              queriednumbers1.push(queriednumber1);
              queriednumbers2.push(queriednumber2);
              queriednumbers3.push(queriednumber3);
              queriednumbers4.push(queriednumber4);
              queriednumbers5.push(queriednumber5);
              queriednumbers6.push(queriednumber6);
              queriednumbers7.push(queriednumber7);
              queriednumbers8.push(queriednumber8);
              queriednumbers9.push(queriednumber9);
              queriednumbers10.push(queriednumber10);
              queriednumbers11.push(queriednumber11);
              queriednumbers12.push(queriednumber12);
              queriednumbers13.push(queriednumber13);
              queriednumbers14.push(queriednumber14);
              queriednumbers15.push(queriednumber15);
              queriednumbers16.push(queriednumber16);
              queriednumbers17.push(queriednumber17);
              queriednumbers18.push(queriednumber18);
              queriednumbers19.push(queriednumber19);
              queriednumbers20.push(queriednumber20);
              queriednumbers21.push(queriednumber21);
              queriednumbers22.push(queriednumber22);
              queriednumbers23.push(queriednumber23);
              queriednumbers24.push(queriednumber24);
              queriednumbers25.push(queriednumber25);
              queriednumbers26.push(queriednumber26);
              queriednumbers27.push(queriednumber27);
              queriednumbers28.push(queriednumber28);
              queriednumbers29.push(queriednumber29);
              queriednumbers30.push(queriednumber30);
              queriednumbers31.push(queriednumber31);
              queriednumbers32.push(queriednumber32);
              queriednumbers33.push(queriednumber33);
              activeids.push(id);
              let filter = ['match', ['get', 'dauid'], activeids, true, false]
              map.setFilter("Durham-select",filter)
              map.setLayoutProperty("Durham-select", 'visibility', 'visible')
              console.log("You've added a DA. These are the activeids: "+activeids)
            }
            else if (activeids.includes(id)===true) {
              ind = activeids.indexOf(id)
              activeids.splice(ind,1);
              queriednumbers1.splice(ind,1);
              queriednumbers2.splice(ind,1);
              queriednumbers3.splice(ind,1);
              queriednumbers4.splice(ind,1);
              queriednumbers5.splice(ind,1);
              queriednumbers6.splice(ind,1);
              queriednumbers7.splice(ind,1);
              queriednumbers8.splice(ind,1);
              queriednumbers9.splice(ind,1);
              queriednumbers10.splice(ind,1);
              queriednumbers11.splice(ind,1);
              queriednumbers12.splice(ind,1);
              queriednumbers13.splice(ind,1);
              queriednumbers14.splice(ind,1);
              queriednumbers15.splice(ind,1);
              queriednumbers16.splice(ind,1);
              queriednumbers17.splice(ind,1);
              queriednumbers18.splice(ind,1);
              queriednumbers19.splice(ind,1);
              queriednumbers20.splice(ind,1);
              queriednumbers21.splice(ind,1);
              queriednumbers22.splice(ind,1);
              queriednumbers23.splice(ind,1);
              queriednumbers24.splice(ind,1);
              queriednumbers25.splice(ind,1);
              queriednumbers26.splice(ind,1);
              queriednumbers27.splice(ind,1);
              queriednumbers28.splice(ind,1);
              queriednumbers29.splice(ind,1);
              queriednumbers30.splice(ind,1);
              queriednumbers31.splice(ind,1);
              queriednumbers32.splice(ind,1);
              queriednumbers33.splice(ind,1);
              let filter = ['match', ['get', 'dauid'], activeids, true, false]
              map.setFilter("Durham-select",filter)
              map.setLayoutProperty("Durham-select", 'visibility', 'visible')
              console.log("You've removed a DA. These are the activeids: "+activeids)
            }

            //dynamically aggregate the values
            const add = (a, b) =>
              a + b
              var themetotal1 = queriednumbers1.reduce(add);
              var themetotal2 = queriednumbers2.reduce(add);
              var themetotal3 = queriednumbers3.reduce(add);
              var themetotal4 = queriednumbers4.reduce(add);
              var themetotal5 = queriednumbers5.reduce(add);
              var themetotal6 = queriednumbers6.reduce(add);
              var themetotal7 = queriednumbers7.reduce(add);
              var themetotal8 = queriednumbers8.reduce(add);
              var themetotal9 = queriednumbers9.reduce(add);
              var themetotal10 = queriednumbers10.reduce(add);
              var themetotal11 = queriednumbers11.reduce(add);
              var themetotal12 = queriednumbers12.reduce(add);
              var themetotal13 = queriednumbers13.reduce(add);
              var themetotal14 = queriednumbers14.reduce(add);
              var themetotal15 = queriednumbers15.reduce(add);
              var themetotal16 = queriednumbers16.reduce(add);
              var themetotal17 = queriednumbers17.reduce(add);
              var themetotal18 = queriednumbers18.reduce(add);
              var themetotal19 = queriednumbers19.reduce(add);
              var themetotal20 = queriednumbers20.reduce(add);
              var themetotal21 = queriednumbers21.reduce(add);
              var themetotal22 = queriednumbers22.reduce(add);
              var themetotal23 = queriednumbers23.reduce(add);
              var themetotal24 = queriednumbers24.reduce(add);
              var themetotal25 = queriednumbers25.reduce(add);
              var themetotal26 = queriednumbers26.reduce(add);
              var themetotal27 = queriednumbers27.reduce(add);
              var themetotal28 = queriednumbers28.reduce(add);
              var themetotal29 = queriednumbers29.reduce(add);
              var themetotal30 = queriednumbers30.reduce(add);
              var themetotal31 = queriednumbers31.reduce(add);
              var themetotal32 = queriednumbers32.reduce(add);
              var themetotal33 = queriednumbers33.reduce(add);


            //dynamically calculate the group percentage
            var penetr1 = ((region1/durhamPopulation)*100).toFixed(2);//population
            var penetr2 = ((region2/durhamHouseholds)*100).toFixed(2);//households
            var penetr3 = ((region3/durhamDwellings)*100).toFixed(2);//dwellings
            var penetr4 = ((region4/durhamDwellings)*100).toFixed(2);//households
            var penetr5 = ((region5/durhamDwellings)*100).toFixed(2);//households
            var penetr6 = ((region6/durhamDwellings)*100).toFixed(2);//households
            var penetr7 = ((region7/durhamHouseholds)*100).toFixed(2);//households
            var penetr8 = ((region8/durhamHouseholds)*100).toFixed(2);//households
            var penetr9 = ((region9/durhamHouseholds)*100).toFixed(2);//households
            var penetr10 = ((region10/durhamHouseholds)*100).toFixed(2);//households
            var penetr11 = ((region11/durhamHouseholds)*100).toFixed(2);//households
            var penetr12 = ((region12/durhamHouseholds)*100).toFixed(2);//households
            var penetr13 = ((region13/durhamHouseholds)*100).toFixed(2);//households
            var penetr14 = ((region14/durhamHouseholds)*100).toFixed(2);//households
            var penetr15 = ((region15/durhamHouseholds)*100).toFixed(2);//households
            var penetr16 = ((region16/durhamHouseholds)*100).toFixed(2);//households
            var penetr17 = ((region17/durhamHouseholds)*100).toFixed(2);//households
            var penetr18 = ((region18/durhamHouseholds)*100).toFixed(2);//households
            var penetr19 = ((region19/durhamPopulation)*100).toFixed(2);//population
            var penetr20 = ((region20/durhamPopulation)*100).toFixed(2);//population
            var penetr21 = ((region21/durhamPopulation)*100).toFixed(2);//population
            var penetr22 = ((region22/durhamPopulation)*100).toFixed(2);//households
            var penetr23 = ((region23/durhamPopulation)*100).toFixed(2);//households
            var penetr24 = ((region24/durhamPopulation)*100).toFixed(2);//households
            var penetr25 = ((region25/durhamPopulation)*100).toFixed(2);//households
            var penetr26 = ((region26/durhamPopulation)*100).toFixed(2);//households
            var penetr27 = ((region27/durhamPopulation)*100).toFixed(2);//households
            var penetr28 = ((region28/durhamPopulation)*100).toFixed(2);//households
            var penetr29 = ((region29/durhamPopulation)*100).toFixed(2);//households
            var penetr30 = ((region30/durhamPopulation)*100).toFixed(2);//households
            var penetr31 = ((region31/durhamPopulation)*100).toFixed(2);//households
            var penetr32 = ((region32/durhamPopulation)*100).toFixed(2);//households
            var penetr33 = ((region33/durhamPopulation)*100).toFixed(2);//population

            var regetr1 = ((themetotal1/themetotal1)*100).toFixed(2);
            var regetr2 = ((themetotal2/themetotal2)*100).toFixed(2);
            var regetr3 = ((themetotal3/themetotal3)*100).toFixed(2);
            var regetr4 = ((themetotal4/(themetotal3))*100).toFixed(2);
            var regetr5 = ((themetotal5/(themetotal3))*100).toFixed(2);
            var regetr6 = ((themetotal6/(themetotal3))*100).toFixed(2);
            var regetr7 = ((themetotal7/themetotal2)*100).toFixed(2);
            var regetr8 = ((themetotal8/themetotal2)*100).toFixed(2);
            var regetr9 = ((themetotal9/themetotal2)*100).toFixed(2);
            var regetr10 = ((themetotal10/themetotal2)*100).toFixed(2);
            var regetr11 = ((themetotal11/themetotal2)*100).toFixed(2);
            var regetr12 = ((themetotal12/themetotal2)*100).toFixed(2);
            var regetr13 = ((themetotal13/themetotal2)*100).toFixed(2);
            var regetr14 = ((themetotal14/themetotal2)*100).toFixed(2);
            var regetr15 = ((themetotal15/themetotal2)*100).toFixed(2);
            var regetr16 = ((themetotal16/themetotal2)*100).toFixed(2);
            var regetr17 = ((themetotal17/themetotal2)*100).toFixed(2);
            var regetr18 = ((themetotal18/themetotal2)*100).toFixed(2);
            var regetr19 = ((themetotal19/themetotal1)*100).toFixed(2);
            var regetr20 = ((themetotal20/themetotal1)*100).toFixed(2);
            var regetr21 = ((themetotal21/themetotal1)*100).toFixed(2);
            var regetr22 = ((themetotal22/themetotal1)*100).toFixed(2);
            var regetr23 = ((themetotal23/themetotal1)*100).toFixed(2);
            var regetr24 = ((themetotal24/themetotal1)*100).toFixed(2);
            var regetr25 = ((themetotal25/themetotal1)*100).toFixed(2);
            var regetr26 = ((themetotal26/themetotal1)*100).toFixed(2);
            var regetr27 = ((themetotal27/themetotal1)*100).toFixed(2);
            var regetr28 = ((themetotal28/themetotal1)*100).toFixed(2);
            var regetr29 = ((themetotal29/themetotal1)*100).toFixed(2);
            var regetr30 = ((themetotal30/themetotal1)*100).toFixed(2);
            var regetr31 = ((themetotal31/themetotal1)*100).toFixed(2);
            var regetr32 = ((themetotal32/themetotal1)*100).toFixed(2);
            var regetr33 = ((themetotal33/themetotal1)*100).toFixed(2);

            //add to html content
            $( "#Total1" ).html( "<p>"+themetotal1+"</p>" );
            $( "#Total2" ).html( "<p>"+themetotal2+"</p>" );
            $( "#Total3" ).html( "<p>"+themetotal3+"</p>" );
            $( "#Total4" ).html( "<p>"+themetotal4+"</p>" );
            $( "#Total5" ).html( "<p>"+themetotal5+"</p>" );
            $( "#Total6" ).html( "<p>"+themetotal6+"</p>" );
            $( "#Total7" ).html( "<p>"+themetotal7+"</p>" );
            $( "#Total8" ).html( "<p>"+themetotal8+"</p>" );
            $( "#Total9" ).html( "<p>"+themetotal9+"</p>" );
            $( "#Total10" ).html( "<p>"+themetotal10+"</p>" );
            $( "#Total11" ).html( "<p>"+themetotal11+"</p>" );
            $( "#Total12" ).html( "<p>"+themetotal12+"</p>" );
            $( "#Total13" ).html( "<p>"+themetotal13+"</p>" );
            $( "#Total14" ).html( "<p>"+themetotal14+"</p>" );
            $( "#Total15" ).html( "<p>"+themetotal15+"</p>" );
            $( "#Total16" ).html( "<p>"+themetotal16+"</p>" );
            $( "#Total17" ).html( "<p>"+themetotal17+"</p>" );
            $( "#Total18" ).html( "<p>"+themetotal18+"</p>" );
            $( "#Total19" ).html( "<p>"+themetotal19+"</p>" );
            $( "#Total20" ).html( "<p>"+themetotal20+"</p>" );
            $( "#Total21" ).html( "<p>"+themetotal21+"</p>" );
            $( "#Total22" ).html( "<p>"+themetotal22+"</p>" );
            $( "#Total23" ).html( "<p>"+themetotal23+"</p>" );
            $( "#Total24" ).html( "<p>"+themetotal24+"</p>" );
            $( "#Total25" ).html( "<p>"+themetotal25+"</p>" );
            $( "#Total26" ).html( "<p>"+themetotal26+"</p>" );
            $( "#Total27" ).html( "<p>"+themetotal27+"</p>" );
            $( "#Total28" ).html( "<p>"+themetotal28+"</p>" );
            $( "#Total29" ).html( "<p>"+themetotal29+"</p>" );
            $( "#Total30" ).html( "<p>"+themetotal30+"</p>" );
            $( "#Total31" ).html( "<p>"+themetotal31+"</p>" );
            $( "#Total32" ).html( "<p>"+themetotal32+"</p>" );
            $( "#Total33" ).html( "<p>"+themetotal33+"</p>" );

            $( "#GroupPen1" ).html( "<p>"+penetr1+"%</p>" );
            $( "#GroupPen2" ).html( "<p>"+penetr2+"%</p>" );
            $( "#GroupPen3" ).html( "<p>"+penetr3+"%</p>" );
            $( "#GroupPen4" ).html( "<p>"+penetr4+"%</p>" );
            $( "#GroupPen5" ).html( "<p>"+penetr5+"%</p>" );
            $( "#GroupPen6" ).html( "<p>"+penetr6+"%</p>" );
            $( "#GroupPen7" ).html( "<p>"+penetr7+"%</p>" );
            $( "#GroupPen8" ).html( "<p>"+penetr8+"%</p>" );
            $( "#GroupPen9" ).html( "<p>"+penetr9+"%</p>" );
            $( "#GroupPen10" ).html( "<p>"+penetr10+"%</p>" );
            $( "#GroupPen11" ).html( "<p>"+penetr11+"%</p>" );
            $( "#GroupPen12" ).html( "<p>"+penetr12+"%</p>" );
            $( "#GroupPen13" ).html( "<p>"+penetr13+"%</p>" );
            $( "#GroupPen14" ).html( "<p>"+penetr14+"%</p>" );
            $( "#GroupPen15" ).html( "<p>"+penetr15+"%</p>" );
            $( "#GroupPen16" ).html( "<p>"+penetr16+"%</p>" );
            $( "#GroupPen17" ).html( "<p>"+penetr17+"%</p>" );
            $( "#GroupPen18" ).html( "<p>"+penetr18+"%</p>" );
            $( "#GroupPen19" ).html( "<p>"+penetr19+"%</p>" );
            $( "#GroupPen20" ).html( "<p>"+penetr20+"%</p>" );
            $( "#GroupPen21" ).html( "<p>"+penetr21+"%</p>" );
            $( "#GroupPen22" ).html( "<p>"+penetr22+"%</p>" );
            $( "#GroupPen23" ).html( "<p>"+penetr23+"%</p>" );
            $( "#GroupPen24" ).html( "<p>"+penetr24+"%</p>" );
            $( "#GroupPen25" ).html( "<p>"+penetr25+"%</p>" );
            $( "#GroupPen26" ).html( "<p>"+penetr26+"%</p>" );
            $( "#GroupPen27" ).html( "<p>"+penetr27+"%</p>" );
            $( "#GroupPen28" ).html( "<p>"+penetr28+"%</p>" );
            $( "#GroupPen29" ).html( "<p>"+penetr29+"%</p>" );
            $( "#GroupPen30" ).html( "<p>"+penetr30+"%</p>" );
            $( "#GroupPen31" ).html( "<p>"+penetr31+"%</p>" );
            $( "#GroupPen32" ).html( "<p>"+penetr32+"%</p>" );
            $( "#GroupPen33" ).html( "<p>"+penetr33+"%</p>" );

            $( "#RegionPen1" ).html( "<p>"+regetr1+"%</p>" );
            $( "#RegionPen2" ).html( "<p>"+regetr2+"%</p>" );
            $( "#RegionPen3" ).html( "<p>"+regetr3+"%</p>" );
            $( "#RegionPen4" ).html( "<p>"+regetr4+"%</p>" );
            $( "#RegionPen5" ).html( "<p>"+regetr5+"%</p>" );
            $( "#RegionPen6" ).html( "<p>"+regetr6+"%</p>" );
            $( "#RegionPen7" ).html( "<p>"+regetr7+"%</p>" );
            $( "#RegionPen8" ).html( "<p>"+regetr8+"%</p>" );
            $( "#RegionPen9" ).html( "<p>"+regetr9+"%</p>" );
            $( "#RegionPen10" ).html( "<p>"+regetr10+"%</p>" );
            $( "#RegionPen11" ).html( "<p>"+regetr11+"%</p>" );
            $( "#RegionPen12" ).html( "<p>"+regetr12+"%</p>" );
            $( "#RegionPen13" ).html( "<p>"+regetr13+"%</p>" );
            $( "#RegionPen14" ).html( "<p>"+regetr14+"%</p>" );
            $( "#RegionPen15" ).html( "<p>"+regetr15+"%</p>" );
            $( "#RegionPen16" ).html( "<p>"+regetr16+"%</p>" );
            $( "#RegionPen17" ).html( "<p>"+regetr17+"%</p>" );
            $( "#RegionPen18" ).html( "<p>"+regetr18+"%</p>" );
            $( "#RegionPen19" ).html( "<p>"+regetr19+"%</p>" );
            $( "#RegionPen20" ).html( "<p>"+regetr20+"%</p>" );
            $( "#RegionPen21" ).html( "<p>"+regetr21+"%</p>" );
            $( "#RegionPen22" ).html( "<p>"+regetr22+"%</p>" );
            $( "#RegionPen23" ).html( "<p>"+regetr23+"%</p>" );
            $( "#RegionPen24" ).html( "<p>"+regetr24+"%</p>" );
            $( "#RegionPen25" ).html( "<p>"+regetr25+"%</p>" );
            $( "#RegionPen26" ).html( "<p>"+regetr26+"%</p>" );
            $( "#RegionPen27" ).html( "<p>"+regetr27+"%</p>" );
            $( "#RegionPen28" ).html( "<p>"+regetr28+"%</p>" );
            $( "#RegionPen29" ).html( "<p>"+regetr29+"%</p>" );
            $( "#RegionPen30" ).html( "<p>"+regetr30+"%</p>" );
            $( "#RegionPen31" ).html( "<p>"+regetr31+"%</p>" );
            $( "#RegionPen32" ).html( "<p>"+regetr32+"%</p>" );
            $( "#RegionPen33" ).html( "<p>"+regetr33+"%</p>" );
          });

        map.on('mousemove', function (e) {
            var hovFeatures = map.queryRenderedFeatures(e.point, {layers: ['Durham-gen']});
            if (hovFeatures.length) {
              map.setFilter(['Durham-hover'], ["==", "dauid",hovFeatures[0].properties.dauid])
            }
            else {
              map.setFilter(['Durham-hover'], ["==", "dauid", ""]);
            };
        });


        //reset variables
        function resetstats() {
        queriednumbers1.length = 0;
        queriednumbers2.length = 0;
        queriednumbers3.length = 0;
        queriednumbers4.length = 0;
        queriednumbers5.length = 0;
        queriednumbers6.length = 0;
        queriednumbers7.length = 0;
        queriednumbers8.length = 0;
        queriednumbers9.length = 0;
        queriednumbers10.length = 0;
        queriednumbers11.length = 0;
        queriednumbers12.length = 0;
        queriednumbers13.length = 0;
        queriednumbers14.length = 0;
        queriednumbers15.length = 0;
        queriednumbers16.length = 0;
        queriednumbers17.length = 0;
        queriednumbers18.length = 0;
        queriednumbers19.length = 0;
        queriednumbers20.length = 0;
        queriednumbers21.length = 0;
        queriednumbers22.length = 0;
        queriednumbers23.length = 0;
        queriednumbers24.length = 0;
        queriednumbers25.length = 0;
        queriednumbers26.length = 0;
        queriednumbers27.length = 0;
        queriednumbers28.length = 0;
        queriednumbers29.length = 0;
        queriednumbers31.length = 0;
        queriednumbers32.length = 0;
        queriednumbers33.length = 0;
        activeids.length = 0;
        map.setLayoutProperty("Durham-select", 'visibility', 'none');
        $(".diag").html( "<p>"+"-"+"</p>" );
        };

        $("#clear").click(resetstats);

          //restart functions
        $("#restart").click(function(){
          clearall();
          resetstats();
        });
     });
});
</script>

</body>
</html>
