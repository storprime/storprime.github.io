<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'/>
  <title>Durham Commuters</title>
  <meta name = 'viewport' content='initial-scale=1, maximum-scale=1,user-scalable=no' />
  <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.4/mapbox-gl-draw.css' type='text/css' />
</head>

<!--map object -->
<div id='map'></div>

<style>
/*map style*/
#map {
      position:absolute;
      top:0;
      bottom:0;
      width:100%;
      z-index: 0;
     }
</style>


<body>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoic3RvcnByaW1lIiwiYSI6InR6YWtmU2MifQ.mzm3c3_RSxKKc5MgUe0Fig';

    var map = new mapboxgl.Map({
      container: 'map', //container id
      style: 'mapbox://styles/storprime/cjpslur6w0dbi2so8gb2r1953',
      center: [-78.892013,44.037565],
      zoom: 10, //starting zoom
      bearing: -16, // starting direction
      pitch: 0, //starting pitch

    });

    map.on('style.load', function() {
      // zoom and rotation controls for the <map>
        map.addControl (new mapboxgl.NavigationControl());

        map.setLight({
          'anchor':'map',
          'color':'white',
          'intensity': 0.40,
          'position': [45,45,45,],
        });

        //add sources
        map.addSource('Durham2-6wy63w', {
          type: "vector",
          url: "mapbox://storprime.8kdkezoj"
        }); //updated

        map.addSource('Durham_outline-azvjqv', {
          type: "vector",
          url: "mapbox://storprime.05f3xdtp"
        });

        //add map layers
        map.addLayer({
          'id': 'outline',
          'type': 'line',
          'source': 'Durham_outline-azvjqv',
          'source-layer': 'Durham_outline-azvjqv',
          'paint': {
            'line-color': '#212F3C',
            'line-width':4,
            'line-blur':1,
            'line-opacity':0.5
          }
        })

        map.addLayer({
          'id': '15 min or less',
          'type':'fill',
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-color': {
              'property': 'because QGIS is dumb_45 to 59 min_norm',
              'type':'interval',
              'stops': [
              [1, '#FFFFFF'],
              [2, '#F4D03F'],
              [3, '#F39C12'],
              [4, '#CA6F1E'],
              [5, '#A04000'],
              [10, '#6E2C00'],
              [20, '#6E2C00'],
              [30, '#6E2C00'],
              [40, '#6E2C00'],
              [100, '#6E2C00'],
            ]},
            'fill-opacity': 0.75,
            'fill-outline-color': '#212F3C',
          }
        },'road-label-large', 'road-label-medium', 'road-label-small');

        map.addLayer({
          'id': '15 min or less_3d',
          'type':'fill-extrusion',
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-extrusion-height': {
              'property': 'because QGIS is dumb_45 to 59 min_norm',
              'type':'interval',
              'stops': [
              [1, 0],
              [2, 200],
              [3, 300],
              [4, 400],
              [5, 500],
              [10, 1000],
              [20, 2000],
              [30, 3000],
              [40, 4000],
              [100, 10000],
            ]},

            'fill-extrusion-color': {
              'property': 'because QGIS is dumb_45 to 59 min_norm',
              'type':'interval',
              'stops': [
              [1, '#FFFFFF'],
              [2, '#F4D03F'],
              [3, '#F39C12'],
              [4, '#CA6F1E'],
              [5, '#A04000'],
              [10, '#6E2C00'],
              [20, '#6E2C00'],
              [30, '#6E2C00'],
              [40, '#6E2C00'],
              [100, '#6E2C00'],
            ]},
            'fill-extrusion-opacity': 0.90,
            'fill-extrusion-vertical-gradient': true,
          }
        },'road-label-large', 'road-label-medium', 'road-label-small');

        map.addLayer({
          'id': '15 to 29 min',
          'type':'fill',
          'layout': {
            visibility: 'none'},
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-color': {
              'property': 'because QGIS is dumb_15 to 29 min_norm',
              'type':'interval',
              'stops': [
              [10, '#DAF7A6'],
              [20, '#FFC300'],
              [30, '#FF5733'],
              [40, '#C70039'],
              [50, '#900C3F'],
              [60, '#581845'],
              [70, '#581845'],
              [80, '#581845'],
              [90, '#581845'],
              [100, '#581845'],
            ]}, 'fill-opacity': 0.75,
          }
        });

        map.addLayer({
          'id': '30 to 44 min',
          'type':'fill',
          'layout': {
            visibility: 'none'},
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-color': {
              'property': 'because QGIS is dumb_30 to 44 min_norm',
              'type':'interval',
              'stops': [
              [10, '#DAF7A6'],
              [20, '#FFC300'],
              [30, '#FF5733'],
              [40, '#C70039'],
              [50, '#900C3F'],
              [60, '#581845'],
              [70, '#581845'],
              [80, '#581845'],
              [90, '#581845'],
              [100, '#581845'],
            ]}, 'fill-opacity': 0.75,
          }
        });

        map.addLayer({
          'id': '45 to 59 min',
          'type':'fill',
          'layout': {
            visibility: 'none'},
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-color': {
              'property': 'because QGIS is dumb_45 to 59 min_norm',
              'type':'interval',
              'stops': [
              [10, '#DAF7A6'],
              [20, '#FFC300'],
              [30, '#FF5733'],
              [40, '#C70039'],
              [50, '#900C3F'],
              [60, '#581845'],
              [70, '#581845'],
              [80, '#581845'],
              [90, '#581845'],
              [100, '#581845'],
            ]}, 'fill-opacity': 0.75,
          }
        });

        map.addLayer({
          'id': 'over 60 min',
          'type':'fill',
          'layout': {
            visibility: 'none'},
          'source': 'Durham2-6wy63w',
          'source-layer': 'Durham2-6wy63w',
          'paint': {
            'fill-color': {
              'property': 'because QGIS is dumb_60 minutes and over_norm',
              'type':'interval',
              'stops': [
              [10, '#DAF7A6'],
              [20, '#FFC300'],
              [30, '#FF5733'],
              [40, '#C70039'],
              [50, '#900C3F'],
              [60, '#581845'],
              [70, '#581845'],
              [80, '#581845'],
              [90, '#581845'],
              [100, '#581845'],
            ]}, 'fill-opacity': 0.75,
          }
        });


      });
  </script>
</body>
</html>


